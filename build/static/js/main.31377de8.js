/*! For license information please see main.31377de8.js.LICENSE.txt */
!function(){var e={694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var u in n)r.call(n,u)&&n[u]&&e.push(u);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},176:function(e){"use strict";e.exports=function(e,t,n,r,i,a,o,u){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,u],l=0;(s=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function V(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function j(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function B(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case x:return"Portal";case E:return"Profiler";case _:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Ie=null,_e=null;function Ee(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Se(e){Ie?_e?_e.push(e):_e=[e]:Ie=e}function Te(){if(Ie){var e=Ie,t=_e;if(_e=Ie=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function De(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==Ie||null!==_e)&&(Ne(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Re=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ve=!1,Ue=null,je={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Je=i.unstable_requestPaint,Ye=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,It,_t,Et,St=!1,Tt=[],Ct=null,Nt=null,At=null,Dt=new Map,Pt=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){It(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Vt(e)&&n.delete(t)}function jt(){St=!1,null!==Ct&&Vt(Ct)&&(Ct=null),null!==Nt&&Vt(Nt)&&(Nt=null),null!==At&&Vt(At)&&(At=null),Dt.forEach(Ut),Pt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Nt&&Bt(Nt,e),null!==At&&Bt(At,e),Dt.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){if(Kt){var i=$t(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function En(){return _n}var Sn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Dn),Rn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Vn=String.fromCharCode(32),Un=!1;function jn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Se(r),0<(t=Wr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Hn=null;function Qn(e){Vr(e,0)}function $n(e){if(H(bi(e)))return e}function Jn(e,t){if("change"===e)return t}var Yn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Hn=Wn=null)}function nr(e){if("value"===e.propertyName&&$n(Hn)){var t=[];Gn(t,Hn,e,we(e)),De(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Hn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Ir={},_r={};function Er(e){if(Ir[e])return Ir[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return Ir[e]=n[t];return e}l&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Sr=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Nr=Er("transitionend"),Ar=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),s(t,[e])}for(var Rr=0;Rr<Dr.length;Rr++){var Or=Dr[Rr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Sr,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ve||(Ve=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Vr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ve)throw e=Ue,Ve=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,jr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Jt(t)){case 1:var i=Gt;break;case 4:i=Wt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}De((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Sr:case Tr:case Cr:s=yn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Pe(p,h))&&l.push(Gr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=h;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Jn;else if(Kn(u))if(Yn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Gn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Xt="value"in(Yt=i)?Yt.value:Yt.textContent,zn=!0)),0<(y=Wr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,Vn);case"textInput":return(e=t.data)===Vn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&jn(e,t)?(e=en(),Zt=Xt=Yt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Vr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],Ii=-1;function _i(e){return{current:e}}function Ei(e){0>Ii||(e.current=xi[Ii],xi[Ii]=null,Ii--)}function Si(e,t){Ii++,xi[Ii]=e.current,e.current=t}var Ti={},Ci=_i(Ti),Ni=_i(!1),Ai=Ti;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ei(Ni),Ei(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Si(Ci,t),Si(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Si(Ci,e),Si(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ni),Ei(Ci),Si(Ci,e)):Ei(Ni),Si(Ni,n)}var Vi=null,Ui=!1,ji=!1;function Bi(e){null===Vi?Vi=[e]:Vi.push(e)}function zi(){if(!ji&&null!==Vi){ji=!0;var e=0,t=kt;try{var n=Vi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vi=null,Ui=!1}catch(i){throw null!==Vi&&(Vi=Vi.slice(e+1)),He(Ze,zi),i}finally{kt=t,ji=!1}}return null}var qi=[],Ki=0,Gi=null,Wi=0,Hi=[],Qi=0,$i=null,Ji=1,Yi="";function Xi(e,t){qi[Ki++]=Wi,qi[Ki++]=Gi,Gi=e,Wi=t}function Zi(e,t,n){Hi[Qi++]=Ji,Hi[Qi++]=Yi,Hi[Qi++]=$i,$i=e;var r=Ji;e=Yi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,Yi=a+e}else Ji=1<<a|n<<i|r,Yi=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Wi=qi[--Ki],qi[Ki]=null;for(;e===$i;)$i=Hi[--Qi],Hi[Qi]=null,Yi=Hi[--Qi],Hi[Qi]=null,Ji=Hi[--Qi],Hi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Ji,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=_i(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ya.current;Ei(ya),e._currentValue=t}function Ia(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _a(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=f}}function Va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function ja(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Pi(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Da(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Pi(t)?Ai:Ci.current,i.context=Di(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Wa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===I?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Wa(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=Wa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Wa(e,null,t),n.return=e,n;case x:return(t=Vc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ha(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Xi(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===I&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===I){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Wa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===I?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Oc(o.type,o.key,o.props,null,r.mode,s)).ref=Wa(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Vc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ja=$a(!0),Ya=$a(!1),Xa={},Za=_i(Xa),eo=_i(Xa),to=_i(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Si(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Si(eo,e),Si(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var uo=_i(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function Io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function _o(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==bo;return bo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Ms|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Po(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Uo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&nc(t,e,1,-1)}function Vo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return To().memoizedState}function Bo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&Io(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Ko(e,t){return zo(2048,8,e,t)}function Go(e,t){return zo(4,2,e,t)}function Wo(e,t){return zo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Ho.bind(null,t,e),n)}function $o(){}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:Vo,useDebugValue:$o,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=Vo(!1),t=e[0];return e=Zo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=Ns.identifierPrefix;if(ia){var n=Yi;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:Jo,useContext:Ea,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Yo,useReducer:No,useRef:jo,useState:function(){return No(Co)},useDebugValue:$o,useDeferredValue:function(e){return Xo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:Jo,useContext:Ea,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Yo,useReducer:Ao,useRef:jo,useState:function(){return Ao(Co)},useDebugValue:$o,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Xo(t,mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Gs=r),hu(0,t)},n}function vu(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Ya(t,null,n,r):Ja(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return _a(t,i),r=_o(e,t,n,r,a,i),n=Eo(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Iu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,_u(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Rc(a,r)).ref=t.ref,e.return=t,t.child=e}function _u(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Rs,Ps),Ps|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Rs,Ps),Ps|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Rs,Ps),Ps|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Rs,Ps),Ps|=r;return wu(e,t,i,n),t.child}function Su(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Pi(n)?Ai:Ci.current;return a=Di(t,a),_a(t,i),n=_o(e,t,n,r,a,i),r=Eo(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Cu(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(_a(t,i),null===t.stateNode)qu(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Di(t,c=Pi(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Aa?("function"===typeof l&&(ja(t,n,l,r),s=t.memoizedState),(u=Aa||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Di(t,s=Pi(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(ja(t,n,d,r),p=t.memoizedState),(c=Aa||za(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Su(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ja(t,e.child,null,a),t.child=Ja(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Du(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Pu,Ru,Ou,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):Vu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Uu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ja(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return Uu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Uu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nc(r,e,i,-1))}return vc(),Uu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Qi++]=Ji,Hi[Qi++]=Yi,Hi[Qi++]=$i,Ji=e.id,Yi=e.overflow,$i=t),(t=Vu(t,r.children)).flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Rc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Rc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uu(e,t,n,r){return null!==r&&pa(r),Ja(t,e.child,null,n),(e=Vu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ju(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ia(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ju(e,n,t);else if(19===e.tag)ju(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wu(t),null;case 1:case 17:return Pi(t.type)&&Ri(),Wu(t),null;case 3:return r=t.stateNode,io(),Ei(Ni),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Wu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ru(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":J(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Pu(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":J(e,r),i=$(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wu(t),null;case 6:if(e&&null!=t.stateNode)Ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wu(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Os&&(Os=3):vc())),null!==t.updateQueue&&(t.flags|=4),Wu(t),null);case 4:return io(),null===e&&zr(t.stateNode.containerInfo),Wu(t),null;case 10:return xa(t.type._context),Wu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Wu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Gu(o,!1);else{if(0!==Os||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Gu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>zs&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Wu(t),null}else 2*Ye()-o.renderingStartTime>zs&&1073741824!==n&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=uo.current,Si(uo,r?1&n|2:1&n),t):(Wu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ps)&&(Wu(t),6&t.subtreeFlags&&(t.flags|=8192)):Wu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ni),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Pu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ru=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Ju=!1,Yu="function"===typeof WeakSet?WeakSet:Set,Xu=null;function Zu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){_c(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){_c(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function hs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Ju||Zu(n,t);case 6:var r=ls,i=fs;ls=null,hs(e,t,n),fs=i,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=fs,ls=n.stateNode.containerInfo,fs=!0,hs(e,t,n),ls=r,fs=i;break;case 0:case 11:case 14:case 15:if(!Ju&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}hs(e,t,n);break;case 1:if(!Ju&&(Zu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){_c(n,t,u)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?(Ju=(r=Ju)||null!==n.memoizedState,hs(e,t,n),Ju=r):hs(e,t,n);break;default:hs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Yu),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){_c(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ys(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(m){_c(e,e.return,m)}try{ns(5,e,e.return)}catch(m){_c(e,e.return,m)}}break;case 1:vs(t,e),ys(e),512&r&&null!==n&&Zu(n,n.return);break;case 5:if(vs(t,e),ys(e),512&r&&null!==n&&Zu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){_c(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&Y(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){_c(e,e.return,m)}}break;case 6:if(vs(t,e),ys(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){_c(e,e.return,m)}}break;case 3:if(vs(t,e),ys(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){_c(e,e.return,m)}break;case 4:default:vs(t,e),ys(e);break;case 13:vs(t,e),ys(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Ye())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Ju=(l=Ju)||f,vs(t,e),Ju=l):vs(t,e),ys(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Xu=e,f=e.child;null!==f;){for(h=Xu=f;null!==Xu;){switch(p=(d=Xu).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Zu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){_c(r,n,m)}}break;case 5:Zu(d,d.return);break;case 22:if(null!==d.memoizedState){ws(h);continue}}null!==p?(p.return=d,Xu=p):ws(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){_c(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){_c(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vs(t,e),ys(e),4&r&&ps(e);case 21:}}function ys(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){_c(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Xu=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Xu;){var i=Xu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Ju;u=$u;var c=Ju;if($u=o,(Ju=s)&&!c)for(Xu=i;null!==Xu;)s=(o=Xu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Xu=s):xs(i);for(;null!==a;)Xu=a,ks(a,t,n),a=a.sibling;Xu=i,$u=u,Ju=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Xu=a):bs(e)}}function bs(e){for(;null!==Xu;){var t=Xu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ju||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ju)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Va(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Va(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Ju||512&t.flags&&is(t)}catch(d){_c(t,t.return,d)}}if(t===e){Xu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xu=n;break}Xu=t.return}}function ws(e){for(;null!==Xu;){var t=Xu;if(t===e){Xu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xu=n;break}Xu=t.return}}function xs(e){for(;null!==Xu;){var t=Xu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){_c(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){_c(t,i,s)}}var a=t.return;try{is(t)}catch(s){_c(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){_c(t,o,s)}}}catch(s){_c(t,t.return,s)}if(t===e){Xu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Xu=u;break}Xu=t.return}}var Is,_s=Math.ceil,Es=b.ReactCurrentDispatcher,Ss=b.ReactCurrentOwner,Ts=b.ReactCurrentBatchConfig,Cs=0,Ns=null,As=null,Ds=0,Ps=0,Rs=_i(0),Os=0,Ls=null,Ms=0,Fs=0,Vs=0,Us=null,js=null,Bs=0,zs=1/0,qs=null,Ks=!1,Gs=null,Ws=null,Hs=!1,Qs=null,$s=0,Js=0,Ys=null,Xs=-1,Zs=0;function ec(){return 0!==(6&Cs)?Ye():-1!==Xs?Xs:Xs=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Ds?Ds&-Ds:null!==va.transition?(0===Zs&&(Zs=vt()),Zs):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nc(e,t,n,r){if(50<Js)throw Js=0,Ys=null,Error(a(185));yt(e,n,r),0!==(2&Cs)&&e===Ns||(e===Ns&&(0===(2&Cs)&&(Fs|=n),4===Os&&uc(e,Ds)),rc(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(zs=Ye()+500,Ui&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Ds:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,Bi(e)}(sc.bind(null,e)):Bi(sc.bind(null,e)),oi((function(){0===(6&Cs)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xs=-1,Zs=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Ds:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Cs;Cs|=2;var o=pc();for(Ns===e&&Ds===t||(qs=null,zs=Ye()+500,hc(e,t));;)try{gc();break}catch(s){dc(e,s)}wa(),Es.current=o,Cs=i,null!==As?t=0:(Ns=null,Ds=0,t=Os)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,hc(e,0),uc(e,r),rc(e,Ye()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,hc(e,0),uc(e,r),rc(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,js,qs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Bs+500-Ye())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,js,qs),t);break}wc(e,js,qs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_s(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,js,qs),r);break}wc(e,js,qs);break;default:throw Error(a(329))}}}return rc(e,Ye()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Us;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=js,js=n,null!==t&&oc(t)),e}function oc(e){null===js?js=e:js.push.apply(js,e)}function uc(e,t){for(t&=~Vs,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Cs))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return rc(e,Ye()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,hc(e,0),uc(e,t),rc(e,Ye()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,js,qs),rc(e,Ye()),null}function cc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(zs=Ye()+500,Ui&&zi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&Cs)&&xc();var t=Cs;Cs|=1;var n=Ts.transition,r=kt;try{if(Ts.transition=null,kt=1,e)return e()}finally{kt=r,Ts.transition=n,0===(6&(Cs=t))&&zi()}}function fc(){Ps=Rs.current,Ei(Rs)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Ei(Ni),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:xa(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Ns=e,As=e=Rc(e.current,null),Ds=Ps=t,Os=0,Ls=null,Vs=Fs=Ms=0,js=Us=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function dc(e,t){for(;;){var n=As;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Ss.current=null,null===n||null===n.return){Os=1,Ls=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ds,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Os&&(Os=2),null===Us?Us=[o]:Us.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ws||!Ws.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,As===n&&null!==n&&(As=n=n.return);continue}break}}function pc(){var e=Es.current;return Es.current=ou,null===e?ou:e}function vc(){0!==Os&&3!==Os&&2!==Os||(Os=4),null===Ns||0===(268435455&Ms)&&0===(268435455&Fs)||uc(Ns,Ds)}function mc(e,t){var n=Cs;Cs|=2;var r=pc();for(Ns===e&&Ds===t||(qs=null,hc(e,t));;)try{yc();break}catch(i){dc(e,i)}if(wa(),Cs=n,Es.current=r,null!==As)throw Error(a(261));return Ns=null,Ds=0,Os}function yc(){for(;null!==As;)kc(As)}function gc(){for(;null!==As&&!$e();)kc(As)}function kc(e){var t=Is(e.alternate,e,Ps);e.memoizedProps=e.pendingProps,null===t?bc(e):As=t,Ss.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Hu(n,t,Ps)))return void(As=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Os=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Os&&(Os=5)}function wc(e,t,n){var r=kt,i=Ts.transition;try{Ts.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Qs);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(As=Ns=null,Ds=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hs||(Hs=!0,Nc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Ss.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Xu=t;null!==Xu;)if(e=(t=Xu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xu=e;else for(;null!==Xu;){t=Xu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){_c(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xu=e;break}Xu=t.return}v=ts,ts=!1}(e,n),ms(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),Je(),Cs=s,kt=u,Ts.transition=o}else e.current=n;if(Hs&&(Hs=!1,Qs=e,$s=i),0===(o=e.pendingLanes)&&(Ws=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,e=Gs,Gs=null,e;0!==(1&$s)&&0!==e.tag&&xc(),0!==(1&(o=e.pendingLanes))?e===Ys?Js++:(Js=0,Ys=e):Js=0,zi()}(e,t,n,r)}finally{Ts.transition=i,kt=r}return null}function xc(){if(null!==Qs){var e=bt($s),t=Ts.transition,n=kt;try{if(Ts.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,$s=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Xu=e.current;null!==Xu;){var o=Xu,u=o.child;if(0!==(16&Xu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Xu=l;null!==Xu;){var f=Xu;switch(f.tag){case 0:case 11:case 15:ns(8,f,o)}var h=f.child;if(null!==h)h.return=f,Xu=h;else for(;null!==Xu;){var d=(f=Xu).sibling,p=f.return;if(as(f),f===l){Xu=null;break}if(null!==d){d.return=p,Xu=d;break}Xu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Xu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Xu=u;else e:for(;null!==Xu;){if(0!==(2048&(o=Xu).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Xu=g;break e}Xu=o.return}}var k=e.current;for(Xu=k;null!==Xu;){var b=(u=Xu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Xu=b;else e:for(u=k;null!==Xu;){if(0!==(2048&(s=Xu).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(x){_c(s,s.return,x)}if(s===u){Xu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Xu=w;break e}Xu=s.return}}if(Cs=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Ts.transition=t}}return!1}function Ic(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function _c(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Ds&n)===n&&(4===Os||3===Os&&(130023424&Ds)===Ds&&500>Ye()-Bs?hc(e,0):Vs|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Na(e,t))&&(yt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sc(e,n)}function Nc(e,t){return He(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Ac(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Pc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case I:return Lc(n.children,i,o,t);case _:u=8,i|=8;break;case E:return(e=Dc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=Dc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Dc(19,n,t,i)).elementType=A,e.lanes=o,e;case R:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case C:u=11;break e;case D:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Dc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,o,u,s){return e=new Uc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Dc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function Bc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function zc(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=jc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Ra(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Kc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Is=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Si(uo,1&uo.current),null!==(e=Ku(e,t,n))?e.sibling:null);Si(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Ku(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qu(e,t),e=t.pendingProps;var i=Di(t,Ci.current);_a(t,n),i=_o(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Da(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=Iu(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Du(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Du(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ya(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ku(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Su(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ja(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ra(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ia(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Ia(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,_a(t,n),r=r(i=Ea(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),Iu(e,t,r,i=ma(r.type,i),n);case 15:return _u(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),qu(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,_a(t,n),qa(t,r,i),Ga(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=jc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),lc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}Jc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},Jc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Kc(null,e,null,null)})),t[pi]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Ye()),0===(6&Cs)&&(zs=Ye()+500,zi()))}break;case 13:lc((function(){var t=Na(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Hc(e,1)}},xt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nc(t,e,134217728,ec());Hc(e,134217728)}},It=function(e){if(13===e.tag){var t=tc(e),n=Na(e,t);if(null!==n)nc(n,e,t,ec());Hc(e,t)}},_t=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ne=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Se,Te,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(a(200));return Bc(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,I={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!_.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:I.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:I};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=I.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!_.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,R(x);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(S),S=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,_=!1,E=null,S=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?I():(_=!1,E=null)}}else _=!1}if("function"===typeof k)I=function(){k(A)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,P=D.port2;D.port1.onmessage=A,I=function(){P.postMessage(null)}}else I=function(){y(A,0)};function R(e){E=e,_||(_=!0,I())}function O(e,n){S=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(S),S=-1):m=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,R(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},391:function(e){"use strict";var t=function(){};e.exports=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".bf36a60c.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="multi-step-form:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkmulti_step_form=self.webpackChunkmulti_step_form||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return At},SDK_VERSION:function(){return qn},_DEFAULT_ENTRY_NAME:function(){return An},_addComponent:function(){return On},_addOrOverwriteComponent:function(){return Ln},_apps:function(){return Pn},_clearComponents:function(){return Un},_components:function(){return Rn},_getProvider:function(){return Fn},_registerComponent:function(){return Mn},_removeServiceInstance:function(){return Vn},deleteApp:function(){return Hn},getApp:function(){return Gn},getApps:function(){return Wn},initializeApp:function(){return Kn},onLog:function(){return Jn},registerVersion:function(){return $n},setLogLevel:function(){return Yn}});var t=n(791),r=n(250);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e){if(Array.isArray(e))return e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){return u(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||c(e,t)||l()}function h(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function d(e,t){if(null==e)return{};var n,r,i=h(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=n(694),v=n.n(p),m=n(7),y=n.n(m),g=n(184),k=["as","className","type","tooltip"],b={type:y().string,tooltip:y().bool,as:y().elementType},w=t.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,i=e.className,a=e.type,u=void 0===a?"valid":a,s=e.tooltip,c=void 0!==s&&s,l=d(e,k);return(0,g.jsx)(r,o(o({},l),{},{ref:t,className:v()(i,"".concat(u,"-").concat(c?"tooltip":"feedback"))}))}));w.displayName="Feedback",w.propTypes=b;var x=w,I=t.createContext({}),_=["xxl","xl","lg","md","sm","xs"],E=t.createContext({prefixes:{},breakpoints:_});E.Consumer,E.Provider;function S(e,n){var r=(0,t.useContext)(E).prefixes;return e||r[n]||n}var T=["id","bsPrefix","className","type","isValid","isInvalid","as"],C=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,a=e.className,u=e.type,s=void 0===u?"checkbox":u,c=e.isValid,l=void 0!==c&&c,f=e.isInvalid,h=void 0!==f&&f,p=e.as,m=void 0===p?"input":p,y=d(e,T),k=(0,t.useContext)(I).controlId;return i=S(i,"form-check-input"),(0,g.jsx)(m,o(o({},y),{},{ref:n,type:s,id:r||k,className:v()(a,i,l&&"is-valid",h&&"is-invalid")}))}));C.displayName="FormCheckInput";var N=C,A=["bsPrefix","className","htmlFor"],D=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.htmlFor,u=d(e,A),s=(0,t.useContext)(I).controlId;return r=S(r,"form-check-label"),(0,g.jsx)("label",o(o({},u),{},{ref:n,htmlFor:a||s,className:v()(i,r)}))}));D.displayName="FormCheckLabel";var P=D;var R=["id","bsPrefix","bsSwitchPrefix","inline","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"],O=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,a=e.bsSwitchPrefix,u=e.inline,s=void 0!==u&&u,c=e.disabled,l=void 0!==c&&c,f=e.isValid,h=void 0!==f&&f,p=e.isInvalid,m=void 0!==p&&p,y=e.feedbackTooltip,k=void 0!==y&&y,b=e.feedback,w=e.feedbackType,_=e.className,E=e.style,T=e.title,C=void 0===T?"":T,A=e.type,D=void 0===A?"checkbox":A,O=e.label,L=e.children,M=e.as,F=void 0===M?"input":M,V=d(e,R);i=S(i,"form-check"),a=S(a,"form-switch");var U=(0,t.useContext)(I).controlId,j=(0,t.useMemo)((function(){return{controlId:r||U}}),[U,r]),B=!L&&null!=O&&!1!==O||function(e,n){return t.Children.toArray(e).some((function(e){return t.isValidElement(e)&&e.type===n}))}(L,P),z=(0,g.jsx)(N,o(o({},V),{},{type:"switch"===D?"checkbox":D,ref:n,isValid:h,isInvalid:m,disabled:l,as:F}));return(0,g.jsx)(I.Provider,{value:j,children:(0,g.jsx)("div",{style:E,className:v()(_,B&&i,s&&"".concat(i,"-inline"),"switch"===D&&a),children:L||(0,g.jsxs)(g.Fragment,{children:[z,B&&(0,g.jsx)(P,{title:C,children:O}),b&&(0,g.jsx)(x,{type:w,tooltip:k,children:b})]})})})}));O.displayName="FormCheck";var L=Object.assign(O,{Input:N,Label:P}),M=(n(391),["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"]),F=t.forwardRef((function(e,n){var r,a,u=e.bsPrefix,s=e.type,c=e.size,l=e.htmlSize,f=e.id,h=e.className,p=e.isValid,m=void 0!==p&&p,y=e.isInvalid,k=void 0!==y&&y,b=e.plaintext,w=e.readOnly,x=e.as,_=void 0===x?"input":x,E=d(e,M),T=(0,t.useContext)(I).controlId;(u=S(u,"form-control"),b)?r=i({},"".concat(u,"-plaintext"),!0):(i(a={},u,!0),i(a,"".concat(u,"-").concat(c),c),r=a);return(0,g.jsx)(_,o(o({},E),{},{type:s,size:l,ref:n,readOnly:w,id:f||T,className:v()(h,r,m&&"is-valid",k&&"is-invalid","color"===s&&"".concat(u,"-color"))}))}));F.displayName="FormControl";var V=Object.assign(F,{Feedback:x}),U=/-(.)/g;var j=["className","bsPrefix","as"],B=function(e){return e[0].toUpperCase()+(t=e,t.replace(U,(function(e,t){return t.toUpperCase()}))).slice(1);var t};var z=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.displayName,i=void 0===r?B(e):r,a=n.Component,u=n.defaultProps,s=t.forwardRef((function(t,n){var r=t.className,i=t.bsPrefix,u=t.as,s=void 0===u?a||"div":u,c=d(t,j),l=S(i,e);return(0,g.jsx)(s,o({ref:n,className:v()(r,l)},c))}));return s.defaultProps=u,s.displayName=i,s}("form-floating"),q=["controlId","as"],K=t.forwardRef((function(e,n){var r=e.controlId,i=e.as,a=void 0===i?"div":i,u=d(e,q),s=(0,t.useMemo)((function(){return{controlId:r}}),[r]);return(0,g.jsx)(I.Provider,{value:s,children:(0,g.jsx)(a,o(o({},u),{},{ref:n}))})}));K.displayName="FormGroup";var G=K,W=["as","bsPrefix","className"],H=["className"];function Q(e){var n=e.as,r=e.bsPrefix,i=e.className,a=d(e,W);r=S(r,"col");var u=(0,t.useContext)(E).breakpoints,s=[],c=[];return u.forEach((function(e){var t,n,i,o=a[e];delete a[e],"object"===typeof o&&null!=o?(t=o.span,n=o.offset,i=o.order):t=o;var u="xs"!==e?"-".concat(e):"";t&&s.push(!0===t?"".concat(r).concat(u):"".concat(r).concat(u,"-").concat(t)),null!=i&&c.push("order".concat(u,"-").concat(i)),null!=n&&c.push("offset".concat(u,"-").concat(n))})),[o(o({},a),{},{className:v().apply(void 0,[i].concat(s,c))}),{as:n,bsPrefix:r,spans:s}]}var $=t.forwardRef((function(e,t){var n=f(Q(e),2),r=n[0],i=r.className,a=d(r,H),u=n[1],s=u.as,c=void 0===s?"div":s,l=u.bsPrefix,h=u.spans;return(0,g.jsx)(c,o(o({},a),{},{ref:t,className:v()(i,!h.length&&l)}))}));$.displayName="Col";var J=$,Y=["as","bsPrefix","column","visuallyHidden","className","htmlFor"],X=t.forwardRef((function(e,n){var r=e.as,i=void 0===r?"label":r,a=e.bsPrefix,u=e.column,s=e.visuallyHidden,c=e.className,l=e.htmlFor,f=d(e,Y),h=(0,t.useContext)(I).controlId;a=S(a,"form-label");var p="col-form-label";"string"===typeof u&&(p="".concat(p," ").concat(p,"-").concat(u));var m=v()(c,a,s&&"visually-hidden",u&&p);return l=l||h,u?(0,g.jsx)(J,o({ref:n,as:"label",className:m,htmlFor:l},f)):(0,g.jsx)(i,o({ref:n,className:m,htmlFor:l},f))}));X.displayName="FormLabel",X.defaultProps={column:!1,visuallyHidden:!1};var Z=X,ee=["bsPrefix","className","id"],te=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.id,u=d(e,ee),s=(0,t.useContext)(I).controlId;return r=S(r,"form-range"),(0,g.jsx)("input",o(o({},u),{},{type:"range",ref:n,className:v()(i,r),id:a||s}))}));te.displayName="FormRange";var ne=te,re=["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"],ie=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.size,a=e.htmlSize,u=e.className,s=e.isValid,c=void 0!==s&&s,l=e.isInvalid,f=void 0!==l&&l,h=e.id,p=d(e,re),m=(0,t.useContext)(I).controlId;return r=S(r,"form-select"),(0,g.jsx)("select",o(o({},p),{},{size:a,ref:n,className:v()(u,r,i&&"".concat(r,"-").concat(i),c&&"is-valid",f&&"is-invalid"),id:h||m}))}));ie.displayName="FormSelect";var ae=ie,oe=["bsPrefix","className","as","muted"],ue=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=void 0===i?"small":i,u=e.muted,s=d(e,oe);return n=S(n,"form-text"),(0,g.jsx)(a,o(o({},s),{},{ref:t,className:v()(r,n,u&&"text-muted")}))}));ue.displayName="FormText";var se=ue,ce=t.forwardRef((function(e,t){return(0,g.jsx)(L,o(o({},e),{},{ref:t,type:"switch"}))}));ce.displayName="Switch";var le=Object.assign(ce,{Input:L.Input,Label:L.Label}),fe=["bsPrefix","className","children","controlId","label"],he=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.children,a=e.controlId,u=e.label,s=d(e,fe);return n=S(n,"form-floating"),(0,g.jsxs)(G,o(o({ref:t,className:v()(r,n),controlId:a},s),{},{children:[i,(0,g.jsx)("label",{htmlFor:a,children:u})]}))}));he.displayName="FloatingLabel";var de=he,pe=["className","validated","as"],ve={_ref:y().any,validated:y().bool,as:y().elementType},me=t.forwardRef((function(e,t){var n=e.className,r=e.validated,i=e.as,a=void 0===i?"form":i,u=d(e,pe);return(0,g.jsx)(a,o(o({},u),{},{ref:t,className:v()(n,r&&"was-validated")}))}));me.displayName="Form",me.propTypes=ve;var ye=Object.assign(me,{Group:G,Control:V,Floating:z,Check:L,Switch:le,Label:Z,Text:se,Range:ne,Select:ae,FloatingLabel:de}),ge=function(e){var t=e.values,n=e.handleChange;return(0,g.jsx)("div",{children:(0,g.jsxs)(ye,{className:"mt-5",children:[(0,g.jsx)("h4",{children:"Fale um pouco sobre voc\xea"}),(0,g.jsxs)(ye.Group,{className:"mt-5",children:[(0,g.jsx)(ye.Label,{children:"Qual seu trabalho?"}),(0,g.jsx)(ye.Control,{defaultValue:t.trabalho,onChange:n("trabalho"),type:"text",placeholder:"Seu trabalho"})]}),(0,g.jsxs)(ye.Group,{className:"mt-5",children:[(0,g.jsx)(ye.Label,{children:"Em que cidade voc\xea mora?"}),(0,g.jsx)(ye.Control,{defaultValue:t.cidade,onChange:n("cidade"),type:"text",placeholder:"Cidade"})]}),(0,g.jsxs)(ye.Group,{className:"mt-5",children:[(0,g.jsx)(ye.Label,{children:"Qual seu pa\xeds?"}),(0,g.jsx)(ye.Control,{defaultValue:t.pais,onChange:n("pais"),type:"text",placeholder:"Pa\xeds"})]})]})})};function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ke.apply(this,arguments)}n(176);function be(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function we(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function xe(e,n){return Object.keys(n).reduce((function(r,i){var a,o=r,u=o[be(i)],s=o[i],c=h(o,[be(i),i].map(we)),l=n[i],f=function(e,n,r){var i=(0,t.useRef)(void 0!==e),a=(0,t.useState)(n),o=a[0],u=a[1],s=void 0!==e,c=i.current;return i.current=s,!s&&c&&o!==n&&u(n),[s?e:o,(0,t.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r&&r.apply(void 0,[e].concat(n)),u(e)}),[r])]}(s,u,e[l]),d=f[0],p=f[1];return ke({},c,((a={})[i]=d,a[l]=p,a))}),e)}function Ie(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function _e(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function Ee(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}Ie.__suppressDeprecationWarning=!0,_e.__suppressDeprecationWarning=!0,Ee.__suppressDeprecationWarning=!0;var Se=Function.prototype.bind.call(Function.prototype.call,[].slice);var Te=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};var Ce=function(e,n){return(0,t.useMemo)((function(){return function(e,t){var n=Te(e),r=Te(t);return function(e){n&&n(e),r&&r(e)}}(e,n)}),[e,n])},Ne=t.createContext(null);Ne.displayName="NavContext";var Ae=Ne,De=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},Pe=t.createContext(null),Re=t.createContext(null);function Oe(e){return"".concat("data-rr-ui-").concat(e)}var Le=function(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e}),[e]),n};function Me(e){var n=Le(e);return(0,t.useCallback)((function(){return n.current&&n.current.apply(n,arguments)}),[n])}var Fe=["as","disabled"];function Ve(e){var t=e.tagName,n=e.disabled,r=e.href,i=e.target,a=e.rel,o=e.role,u=e.onClick,s=e.tabIndex,c=void 0===s?0:s,l=e.type;t||(t=null!=r||null!=i||null!=a?"a":"button");var f={tagName:t};if("button"===t)return[{type:l||"button",disabled:n},f];var h=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==u||u(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=o?o:"button",disabled:void 0,tabIndex:n?void 0:c,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?a:void 0,onClick:h,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),h(e))}},f]}var Ue=t.forwardRef((function(e,t){var n=e.as,r=e.disabled,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Fe),a=f(Ve(Object.assign({tagName:n,disabled:r},i)),2),o=a[0],u=a[1].tagName;return(0,g.jsx)(u,Object.assign({},i,o,{ref:t}))}));Ue.displayName="Button";var je=Ue,Be=["as","active","eventKey"];function ze(e){var n=e.key,r=e.onClick,i=e.active,a=e.id,o=e.role,u=e.disabled,s=(0,t.useContext)(Pe),c=(0,t.useContext)(Ae),l=(0,t.useContext)(Re),f=i,h={role:o};if(c){o||"tablist"!==c.role||(h.role="tab");var d=c.getControllerId(null!=n?n:null),p=c.getControlledId(null!=n?n:null);h[Oe("event-key")]=n,h.id=d||a,!(f=null==i&&null!=n?c.activeKey===n:i)&&(null!=l&&l.unmountOnExit||null!=l&&l.mountOnEnter)||(h["aria-controls"]=p)}return"tab"===h.role&&(h["aria-selected"]=f,f||(h.tabIndex=-1),u&&(h.tabIndex=-1,h["aria-disabled"]=!0)),h.onClick=Me((function(e){u||(null==r||r(e),null!=n&&s&&!e.isPropagationStopped()&&s(n,e))})),[h,{isActive:f}]}var qe=t.forwardRef((function(e,t){var n=e.as,r=void 0===n?je:n,i=e.active,a=e.eventKey,o=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Be),u=f(ze(Object.assign({key:De(a,o.href),active:i},o)),2),s=u[0],c=u[1];return s[Oe("active")]=c.isActive,(0,g.jsx)(r,Object.assign({},o,s,{ref:t}))}));qe.displayName="NavItem";var Ke=qe,Ge=["as","onSelect","activeKey","role","onKeyDown"];var We=function(){},He=Oe("event-key"),Qe=t.forwardRef((function(e,n){var r,i,a=e.as,o=void 0===a?"div":a,u=e.onSelect,s=e.activeKey,c=e.role,l=e.onKeyDown,f=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Ge),h=(0,t.useReducer)((function(e){return!e}),!1)[1],d=(0,t.useRef)(!1),p=(0,t.useContext)(Pe),v=(0,t.useContext)(Re);v&&(c=c||"tablist",s=v.activeKey,r=v.getControlledId,i=v.getControllerId);var m=(0,t.useRef)(null),y=function(e){var t=m.current;if(!t)return null;var n,r,i=(n=t,r="[".concat(He,"]:not([aria-disabled=true])"),Se(n.querySelectorAll(r))),a=t.querySelector("[aria-selected=true]");if(!a||a!==document.activeElement)return null;var o=i.indexOf(a);if(-1===o)return null;var u=o+e;return u>=i.length&&(u=0),u<0&&(u=i.length-1),i[u]},k=function(e,t){null!=e&&(null==u||u(e,t),null==p||p(e,t))};(0,t.useEffect)((function(){if(m.current&&d.current){var e=m.current.querySelector("[".concat(He,"][aria-selected=true]"));null==e||e.focus()}d.current=!1}));var b=Ce(n,m);return(0,g.jsx)(Pe.Provider,{value:k,children:(0,g.jsx)(Ae.Provider,{value:{role:c,activeKey:De(s),getControlledId:r||We,getControllerId:i||We},children:(0,g.jsx)(o,Object.assign({},f,{onKeyDown:function(e){if(null==l||l(e),v){var t,n;switch(e.key){case"ArrowLeft":case"ArrowUp":t=y(-1);break;case"ArrowRight":case"ArrowDown":t=y(1);break;default:return}if(t)e.preventDefault(),k(t.dataset[(n="EventKey","".concat("rrUi").concat(n))]||null,e),d.current=!0,h()}},ref:b,role:c}))})})}));Qe.displayName="Nav";var $e=Object.assign(Qe,{Item:Ke}),Je=["bsPrefix","active","disabled","eventKey","className","variant","action","as"],Ye=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.active,i=e.disabled,a=e.eventKey,u=e.className,s=e.variant,c=e.action,l=e.as,h=d(e,Je);n=S(n,"list-group-item");var p=f(ze(o({key:De(a,h.href),active:r},h)),2),m=p[0],y=p[1],k=Me((function(e){if(i)return e.preventDefault(),void e.stopPropagation();m.onClick(e)}));i&&void 0===h.tabIndex&&(h.tabIndex=-1,h["aria-disabled"]=!0);var b=l||(c?h.href?"a":"button":"div");return(0,g.jsx)(b,o(o(o({ref:t},h),m),{},{onClick:k,className:v()(u,n,y.isActive&&"active",i&&"disabled",s&&"".concat(n,"-").concat(s),c&&"".concat(n,"-action"))}))}));Ye.displayName="ListGroupItem";var Xe=Ye,Ze=["className","bsPrefix","variant","horizontal","numbered","as"],et=t.forwardRef((function(e,t){var n,r=xe(e,{activeKey:"onSelect"}),i=r.className,a=r.bsPrefix,u=r.variant,s=r.horizontal,c=r.numbered,l=r.as,f=void 0===l?"div":l,h=d(r,Ze),p=S(a,"list-group");return s&&(n=!0===s?"horizontal":"horizontal-".concat(s)),(0,g.jsx)($e,o(o({ref:t},h),{},{as:f,className:v()(i,p,u&&"".concat(p,"-").concat(u),n&&"".concat(p,"-").concat(n),c&&"".concat(p,"-numbered"))}))}));et.displayName="ListGroup";var tt=Object.assign(et,{Item:Xe});function nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function it(e,t,n){return t&&rt(e.prototype,t),n&&rt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function at(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(e,t){return ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ut(e,t)}function st(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ut(e,t)}function ct(e){return ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ct(e)}function lt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ft(e){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(e)}function ht(e,t){if(t&&("object"===ft(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ot(e)}function dt(e){var t=lt();return function(){var n,r=ct(e);if(t){var i=ct(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ht(this,n)}}function pt(e,t,n){return pt=lt()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&ut(i,n.prototype),i},pt.apply(null,arguments)}function vt(e){var t="function"===typeof Map?new Map:void 0;return vt=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return pt(e,arguments,ct(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ut(n,e)},vt(e)}var mt=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},yt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(mt(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},gt=function(e){return function(e){var t=mt(e);return yt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},kt=function(e){try{return yt.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function bt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=bt(e[n],t[n]));return e}var wt=function(){function e(){var t=this;nt(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return it(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function xt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[gt(JSON.stringify({alg:"none",type:"JWT"})),gt(JSON.stringify(a)),""].join(".")}function It(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function _t(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(It())}function Et(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function St(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Tt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Ct(){var e=It();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Nt(){return"object"===typeof indexedDB}var At=function(e){st(n,e);var t=dt(n);function n(e,r,i){var a;return nt(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(ot(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(ot(a),Dt.prototype.create),a}return it(n)}(vt(Error)),Dt=function(){function e(t,n,r){nt(this,e),this.service=t,this.serviceName=n,this.errors=r}return it(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Pt(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new At(n,a,t);return o}}]),e}();function Pt(e,t){return e.replace(Rt,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Rt=/\{\$([^}]+)}/g;function Ot(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Lt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Mt(u)&&Mt(s)){if(!Lt(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Mt(e){return null!==e&&"object"===typeof e}function Ft(e){for(var t=[],n=function(){var e=f(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Vt(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=f(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Ut(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function jt(e,t){var n=new Bt(e,t);return n.subscribe.bind(n)}var Bt=function(){function e(t,n){var r=this;nt(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return it(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=at(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=zt),void 0===r.error&&(r.error=zt),void 0===r.complete&&(r.complete=zt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function zt(){}function qt(e){return e&&e._delegate?e._delegate:e}function Kt(){Kt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(S){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new I(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return E()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=b(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(S){return{type:"throw",arg:S}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var p={};u(p,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(_([])));m&&m!==t&&n.call(m,i)&&(p=m);var y=d.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==ft(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function _(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=d,u(y,"constructor",d),u(d,"constructor",h),h.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),u(y,o,"Generator"),u(y,i,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function Gt(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Wt(e){return function(e){if(Array.isArray(e))return s(e)}(e)||Gt(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function Qt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Ht(a,r,i,o,u,"next",e)}function u(e){Ht(a,r,i,o,u,"throw",e)}o(void 0)}))}}var $t=function(){function e(t,n,r){nt(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return it(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Jt="[DEFAULT]",Yt=function(){function e(t,n){nt(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return it(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new wt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Jt})}catch(s){}var t,n=at(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=f(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Qt(Kt().mark((function e(){var t;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Wt(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Wt(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=at(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=f(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=at(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(tE){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Jt?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(tE){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt;return this.component?this.component.multipleInstances?e:Jt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Xt,Zt,en=function(){function e(t){nt(this,e),this.name=t,this.providers=new Map}return it(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Yt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),tn=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Zt||(Zt={}));var nn={debug:Zt.DEBUG,verbose:Zt.VERBOSE,info:Zt.INFO,warn:Zt.WARN,error:Zt.ERROR,silent:Zt.SILENT},rn=Zt.INFO,an=(i(Xt={},Zt.DEBUG,"log"),i(Xt,Zt.VERBOSE,"log"),i(Xt,Zt.INFO,"info"),i(Xt,Zt.WARN,"warn"),i(Xt,Zt.ERROR,"error"),Xt),on=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=an[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},un=function(){function e(t){nt(this,e),this.name=t,this._logLevel=rn,this._logHandler=on,this._userLogHandler=null,tn.push(this)}return it(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Zt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?nn[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Zt.DEBUG].concat(t)),this._logHandler.apply(this,[this,Zt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Zt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Zt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Zt.INFO].concat(t)),this._logHandler.apply(this,[this,Zt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Zt.WARN].concat(t)),this._logHandler.apply(this,[this,Zt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Zt.ERROR].concat(t)),this._logHandler.apply(this,[this,Zt.ERROR].concat(t))}}]),e}();var sn,cn;var ln=new WeakMap,fn=new WeakMap,hn=new WeakMap,dn=new WeakMap,pn=new WeakMap;var vn={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return fn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||hn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gn(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function mn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(cn||(cn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(kn(this),n),gn(ln.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return gn(e.apply(kn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[kn(this),t].concat(r));return hn.set(a,t.sort?t.sort():[t]),gn(a)}}function yn(e){return"function"===typeof e?mn(e):(e instanceof IDBTransaction&&function(e){if(!fn.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));fn.set(e,t)}}(e),t=e,(sn||(sn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,vn):e);var t}function gn(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(gn(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&ln.set(t,e)})).catch((function(){})),pn.set(t,e),t}(e);if(dn.has(e))return dn.get(e);var t=yn(e);return t!==e&&(dn.set(e,t),pn.set(t,e)),t}var kn=function(e){return pn.get(e)};var bn,wn,xn=["get","getKey","getAll","getAllKeys","count"],In=["put","add","delete","clear"],_n=new Map;function En(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(_n.get(t))return _n.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=In.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||xn.includes(n))){var a=function(){var e=Qt(Kt().mark((function e(t){var a,o,u,s,c,l,f=arguments;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return _n.set(t,a),a}}}vn=function(e){return o(o({},e),{},{get:function(t,n,r){return En(t,n)||e.get(t,n,r)},has:function(t,n){return!!En(t,n)||e.has(t,n)}})}(vn);var Sn=function(){function e(t){nt(this,e),this.container=t}return it(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Tn="@firebase/app",Cn="0.7.29",Nn=new un("@firebase/app"),An="[DEFAULT]",Dn=(i(bn={},Tn,"fire-core"),i(bn,"@firebase/app-compat","fire-core-compat"),i(bn,"@firebase/analytics","fire-analytics"),i(bn,"@firebase/analytics-compat","fire-analytics-compat"),i(bn,"@firebase/app-check","fire-app-check"),i(bn,"@firebase/app-check-compat","fire-app-check-compat"),i(bn,"@firebase/auth","fire-auth"),i(bn,"@firebase/auth-compat","fire-auth-compat"),i(bn,"@firebase/database","fire-rtdb"),i(bn,"@firebase/database-compat","fire-rtdb-compat"),i(bn,"@firebase/functions","fire-fn"),i(bn,"@firebase/functions-compat","fire-fn-compat"),i(bn,"@firebase/installations","fire-iid"),i(bn,"@firebase/installations-compat","fire-iid-compat"),i(bn,"@firebase/messaging","fire-fcm"),i(bn,"@firebase/messaging-compat","fire-fcm-compat"),i(bn,"@firebase/performance","fire-perf"),i(bn,"@firebase/performance-compat","fire-perf-compat"),i(bn,"@firebase/remote-config","fire-rc"),i(bn,"@firebase/remote-config-compat","fire-rc-compat"),i(bn,"@firebase/storage","fire-gcs"),i(bn,"@firebase/storage-compat","fire-gcs-compat"),i(bn,"@firebase/firestore","fire-fst"),i(bn,"@firebase/firestore-compat","fire-fst-compat"),i(bn,"fire-js","fire-js"),i(bn,"firebase","fire-js-all"),bn),Pn=new Map,Rn=new Map;function On(e,t){try{e.container.addComponent(t)}catch(n){Nn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ln(e,t){e.container.addOrOverwriteComponent(t)}function Mn(e){var t=e.name;if(Rn.has(t))return Nn.debug("There were multiple attempts to register component ".concat(t,".")),!1;Rn.set(t,e);var n,r=at(Pn.values());try{for(r.s();!(n=r.n()).done;){On(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Fn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Vn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:An;Fn(e,t).clearInstance(n)}function Un(){Rn.clear()}var jn=(i(wn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),i(wn,"bad-app-name","Illegal App name: '{$appName}"),i(wn,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),i(wn,"app-deleted","Firebase App named '{$appName}' already deleted"),i(wn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),i(wn,"invalid-log-argument","First argument to `onLog` must be null or a function."),i(wn,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),i(wn,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),i(wn,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),i(wn,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),wn),Bn=new Dt("app","Firebase",jn),zn=function(){function e(t,n,r){var i=this;nt(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $t("app",(function(){return i}),"PUBLIC"))}return it(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Bn.create("app-deleted",{appName:this._name})}}]),e}(),qn="9.9.1";function Kn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:An,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Bn.create("bad-app-name",{appName:String(i)});var a=Pn.get(i);if(a){if(Lt(e,a.options)&&Lt(r,a.config))return a;throw Bn.create("duplicate-app",{appName:i})}var o,u=new en(i),s=at(Rn.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new zn(e,r,u);return Pn.set(i,l),l}function Gn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An,t=Pn.get(e);if(!t)throw Bn.create("no-app",{appName:e});return t}function Wn(){return Array.from(Pn.values())}function Hn(e){return Qn.apply(this,arguments)}function Qn(){return(Qn=Qt(Kt().mark((function e(t){var n;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Pn.has(n)){e.next=6;break}return Pn.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $n(e,t,n){var r,i=null!==(r=Dn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Nn.warn(u.join(" "))}Mn(new $t("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Jn(e,t){if(null!==e&&"function"!==typeof e)throw Bn.create("invalid-log-argument");!function(e,t){var n,r=at(tn);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=nn[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Zt[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Yn(e){var t;t=e,tn.forEach((function(e){e.setLogLevel(t)}))}var Xn="firebase-heartbeat-store",Zn=null;function er(){return Zn||(Zn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=gn(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(gn(u.result),e.oldVersion,e.newVersion,gn(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Xn)}}).catch((function(e){throw Bn.create("storage-open",{originalErrorMessage:e.message})}))),Zn}function tr(e){return nr.apply(this,arguments)}function nr(){return nr=Qt(Kt().mark((function e(t){var n,r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er();case 3:return r=e.sent,e.abrupt("return",r.transaction(Xn).objectStore(Xn).get(ar(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Bn.create("storage-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),nr.apply(this,arguments)}function rr(e,t){return ir.apply(this,arguments)}function ir(){return ir=Qt(Kt().mark((function e(t,n){var r,i,a,o;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er();case 3:return i=e.sent,a=i.transaction(Xn,"readwrite"),o=a.objectStore(Xn),e.next=8,o.put(n,ar(t));case 8:return e.abrupt("return",a.done);case 11:throw e.prev=11,e.t0=e.catch(0),Bn.create("storage-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),ir.apply(this,arguments)}function ar(e){return"".concat(e.name,"!").concat(e.options.appId)}var or=function(){function e(t){var n=this;nt(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new fr(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return it(e,[{key:"triggerHeartbeat",value:function(){var e=Qt(Kt().mark((function e(){var t,n,r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=ur(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Qt(Kt().mark((function e(){var t,n,r,i,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=ur(),n=sr(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=gt(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ur(){return(new Date).toISOString().substring(0,10)}function sr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=at(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),hr(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),hr(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var cr,lr,fr=function(){function e(t){nt(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return it(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Nt()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Qt(Kt().mark((function e(){var t;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,tr(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Qt(Kt().mark((function e(t){var n,r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",rr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Qt(Kt().mark((function e(t){var n,r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",rr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Wt(r.heartbeats),Wt(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function hr(e){return gt(JSON.stringify({version:2,heartbeats:e})).length}cr="",Mn(new $t("platform-logger",(function(e){return new Sn(e)}),"PRIVATE")),Mn(new $t("heartbeat",(function(e){return new or(e)}),"PRIVATE")),$n(Tn,Cn,cr),$n(Tn,Cn,"esm2017"),$n("fire-js","");var dr=function(){function e(t,n){var r=this;nt(this,e),this._delegate=t,this.firebase=n,On(t,new $t("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return it(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Hn(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:An;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:An;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){On(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Ln(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),pr=(i(lr={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),i(lr,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),lr),vr=new Dt("app-compat","Firebase",pr);var mr=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Kn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Ot(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:$n,setLogLevel:Yn,onLog:Jn,apps:null,SDK_VERSION:qn,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Mn(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw vr.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&bt(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Ot(n,e=e||An))throw vr.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(dr);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){bt(n,e)},createSubscribe:jt,ErrorFactory:Dt,deepExtend:bt}),n}(),yr=new un("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){yr.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var gr=self.firebase.SDK_VERSION;gr&&gr.indexOf("LITE")>=0&&yr.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var kr=mr;!function(e){$n("@firebase/app-compat","0.1.30",e)}();function br(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ct(e)););return e}function wr(){return wr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=br(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},wr.apply(this,arguments)}kr.registerVersion("firebase","9.9.1","app-compat");function xr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Ir;Object.create;var _r="facebook.com",Er="github.com",Sr="google.com",Tr="password",Cr="twitter.com",Nr="EMAIL_SIGNIN",Ar="PASSWORD_RESET",Dr="RECOVER_EMAIL",Pr="REVERT_SECOND_FACTOR_ADDITION",Rr="VERIFY_AND_CHANGE_EMAIL",Or="VERIFY_EMAIL";function Lr(){return i({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Mr=function(){var e;return i(e={},"admin-restricted-operation","This operation is restricted to administrators only."),i(e,"argument-error",""),i(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),i(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),i(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),i(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),i(e,"cordova-not-ready","Cordova framework is not ready."),i(e,"cors-unsupported","This browser is not supported."),i(e,"credential-already-in-use","This credential is already associated with a different user account."),i(e,"custom-token-mismatch","The custom token corresponds to a different audience."),i(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),i(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),i(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),i(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),i(e,"email-already-in-use","The email address is already in use by another account."),i(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),i(e,"expired-action-code","The action code has expired."),i(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),i(e,"internal-error","An internal AuthError has occurred."),i(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),i(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),i(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),i(e,"invalid-auth-event","An internal AuthError has occurred."),i(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),i(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),i(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),i(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),i(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),i(e,"invalid-email","The email address is badly formatted."),i(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),i(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),i(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),i(e,"invalid-credential","The supplied auth credential is malformed or has expired."),i(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),i(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),i(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),i(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),i(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),i(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),i(e,"wrong-password","The password is invalid or the user does not have a password."),i(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),i(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),i(e,"invalid-provider-id","The specified provider ID is invalid."),i(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),i(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),i(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),i(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),i(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),i(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),i(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),i(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),i(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),i(e,"missing-continue-uri","A continue URL must be provided in the request."),i(e,"missing-iframe-start","An internal AuthError has occurred."),i(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),i(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),i(e,"missing-multi-factor-info","No second factor identifier is provided."),i(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),i(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),i(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),i(e,"app-deleted","This instance of FirebaseApp has been deleted."),i(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),i(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),i(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),i(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),i(e,"no-auth-event","An internal AuthError has occurred."),i(e,"no-such-provider","User was not linked to an account with the given provider."),i(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),i(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),i(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),i(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),i(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),i(e,"provider-already-linked","User can only be linked to one identity for the given provider."),i(e,"quota-exceeded","The project's quota for this operation has been exceeded."),i(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),i(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),i(e,"rejected-credential","The request contains malformed or mismatching credentials."),i(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),i(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),i(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),i(e,"timeout","The operation has timed out."),i(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),i(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),i(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),i(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),i(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),i(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),i(e,"unverified-email","The operation requires a verified email."),i(e,"user-cancelled","The user did not grant your application the permissions it requested."),i(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),i(e,"user-disabled","The user account has been disabled by an administrator."),i(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),i(e,"user-signed-out",""),i(e,"weak-password","The password must be 6 characters long or more."),i(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),i(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Fr=Lr,Vr=new Dt("auth","Firebase",Lr()),Ur=new un("@firebase/auth");function jr(e){if(Ur.logLevel<=Zt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ur.error.apply(Ur,["Auth (".concat(qn,"): ").concat(e)].concat(n))}}function Br(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Gr.apply(void 0,[e].concat(n))}function zr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Gr.apply(void 0,[e].concat(n))}function qr(e,t,n){var r=Object.assign(Object.assign({},Fr()),i({},t,n));return new Dt("auth","Firebase",r).create(t,{appName:e.name})}function Kr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Br(e,"argument-error"),qr(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Gr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Wt(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Wt(o)))}return Vr.create.apply(Vr,[e].concat(n))}function Wr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Gr.apply(void 0,[t].concat(r))}}function Hr(e){var t="INTERNAL ASSERTION FAILED: "+e;throw jr(t),new Error(t)}function Qr(e,t){e||Hr(t)}var $r=new Map;function Jr(e){Qr(e instanceof Function,"Expected a class definition");var t=$r.get(e);return t?(Qr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,$r.set(e,t),t)}function Yr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Xr(){return"http:"===Zr()||"https:"===Zr()}function Zr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var ei=function(){function e(t,n){nt(this,e),this.shortDelay=t,this.longDelay=n,Qr(n>t,"Short delay should be less than long delay!"),this.isMobile=_t()||Tt()}return it(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Xr()||St()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function ti(e,t){Qr(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var ni=function(){function e(){nt(this,e)}return it(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),ri=(i(Ir={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),i(Ir,"MISSING_CUSTOM_TOKEN","internal-error"),i(Ir,"INVALID_IDENTIFIER","invalid-email"),i(Ir,"MISSING_CONTINUE_URI","internal-error"),i(Ir,"INVALID_PASSWORD","wrong-password"),i(Ir,"MISSING_PASSWORD","internal-error"),i(Ir,"EMAIL_EXISTS","email-already-in-use"),i(Ir,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),i(Ir,"INVALID_IDP_RESPONSE","invalid-credential"),i(Ir,"INVALID_PENDING_TOKEN","invalid-credential"),i(Ir,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),i(Ir,"MISSING_REQ_TYPE","internal-error"),i(Ir,"EMAIL_NOT_FOUND","user-not-found"),i(Ir,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),i(Ir,"EXPIRED_OOB_CODE","expired-action-code"),i(Ir,"INVALID_OOB_CODE","invalid-action-code"),i(Ir,"MISSING_OOB_CODE","internal-error"),i(Ir,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),i(Ir,"INVALID_ID_TOKEN","invalid-user-token"),i(Ir,"TOKEN_EXPIRED","user-token-expired"),i(Ir,"USER_NOT_FOUND","user-token-expired"),i(Ir,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),i(Ir,"INVALID_CODE","invalid-verification-code"),i(Ir,"INVALID_SESSION_INFO","invalid-verification-id"),i(Ir,"INVALID_TEMPORARY_PROOF","invalid-credential"),i(Ir,"MISSING_SESSION_INFO","missing-verification-id"),i(Ir,"SESSION_EXPIRED","code-expired"),i(Ir,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),i(Ir,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),i(Ir,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),i(Ir,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),i(Ir,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),i(Ir,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),i(Ir,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),i(Ir,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),i(Ir,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),i(Ir,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),i(Ir,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Ir),ii=new ei(3e4,6e4);function ai(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function oi(e,t,n,r){return ui.apply(this,arguments)}function ui(){return ui=Qt(Kt().mark((function e(t,n,r,i){var a,o=arguments;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",si(t,a,Qt(Kt().mark((function e(){var a,o,u,s;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Ft(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",ni.fetch()(hi(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),ui.apply(this,arguments)}function si(e,t,n){return ci.apply(this,arguments)}function ci(){return(ci=Qt(Kt().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,d,p;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},ri),n),e.prev=2,a=new di(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw pi(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=f(c,2),h=l[0],d=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw pi(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw pi(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw pi(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw qr(t,p,d);case 34:Br(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof At)){e.next=41;break}throw e.t0;case 41:Br(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function li(e,t,n,r){return fi.apply(this,arguments)}function fi(){return fi=Qt(Kt().mark((function e(t,n,r,i){var a,o,u=arguments;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,oi(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Br(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),fi.apply(this,arguments)}function hi(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ti(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var di=function(){function e(t){var n=this;nt(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(zr(n.auth,"network-request-failed"))}),ii.get())}))}return it(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function pi(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=zr(e,t,r);return i.customData._tokenResponse=n,i}function vi(e,t){return mi.apply(this,arguments)}function mi(){return(mi=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oi(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yi(e,t){return gi.apply(this,arguments)}function gi(){return(gi=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oi(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ki(e,t){return bi.apply(this,arguments)}function bi(){return(bi=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oi(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wi(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function xi(){return xi=Qt(Kt().mark((function e(t){var n,r,i,a,o,u,s=arguments;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=qt(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Wr((a=_i(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:wi(Ii(a.auth_time)),issuedAtTime:wi(Ii(a.iat)),expirationTime:wi(Ii(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),xi.apply(this,arguments)}function Ii(e){return 1e3*Number(e)}function _i(e){var t,n=f(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return jr("JWT malformed, contained fewer than 3 sections"),null;try{var o=kt(i);return o?JSON.parse(o):(jr("Failed to decode base64 JWT payload"),null)}catch(u){return jr("Caught error parsing JWT payload as JSON",null===(t=u)||void 0===t?void 0:t.toString()),null}}function Ei(e,t){return Si.apply(this,arguments)}function Si(){return Si=Qt(Kt().mark((function e(t,n){var r=arguments;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof At&&Ti(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Si.apply(this,arguments)}function Ti(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Ci=function(){function e(t){nt(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return it(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Qt(Kt().mark((function t(){return Kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Qt(Kt().mark((function e(){var t;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ni=function(){function e(t,n){nt(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return it(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=wi(this.lastLoginAt),this.creationTime=wi(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Ai(e){return Di.apply(this,arguments)}function Di(){return Di=Qt(Kt().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Ei(t,ki(r,{idToken:i}));case 6:Wr(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Oi(o.providerUserInfo):[],s=Ri(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Ni(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Di.apply(this,arguments)}function Pi(){return(Pi=Qt(Kt().mark((function e(t){var n;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=qt(t),e.next=3,Ai(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ri(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Wt(n),Wt(t))}function Oi(e){return e.map((function(e){var t=e.providerId,n=xr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Li(e,t){return Mi.apply(this,arguments)}function Mi(){return(Mi=Qt(Kt().mark((function e(t,n){var r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,si(t,{},Qt(Kt().mark((function e(){var r,i,a,o,u,s;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ft({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=hi(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",ni.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fi=function(){function e(){nt(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return it(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Wr(e.idToken,"internal-error"),Wr("undefined"!==typeof e.idToken,"internal-error"),Wr("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=_i(e);return Wr(t,"internal-error"),Wr("undefined"!==typeof t.exp,"internal-error"),Wr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Qt(Kt().mark((function e(t){var n,r=arguments;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Wr(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Qt(Kt().mark((function e(t,n){var r,i,a,o;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Li(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Hr("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Wr("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Wr("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Wr("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Vi(e,t){Wr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Ui=function(){function e(t){nt(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=xr(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ci(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Wt(a.providerData):[],this.metadata=new Ni(a.createdAt||void 0,a.lastLoginAt||void 0)}return it(e,[{key:"getIdToken",value:function(){var e=Qt(Kt().mark((function e(t){var n;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ei(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Wr(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return xi.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Pi.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Wr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Wr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Qt(Kt().mark((function e(t){var n,r,i=arguments;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Ai(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Qt(Kt().mark((function e(){var t;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Ei(this,vi(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,I=n.stsTokenManager;Wr(k&&I,t,"internal-error");var _=Fi.fromJSON(this.name,I);Wr("string"===typeof k,t,"internal-error"),Vi(f,t.name),Vi(h,t.name),Wr("boolean"===typeof b,t,"internal-error"),Wr("boolean"===typeof w,t,"internal-error"),Vi(d,t.name),Vi(p,t.name),Vi(v,t.name),Vi(m,t.name),Vi(y,t.name),Vi(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:_,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=Qt(Kt().mark((function t(n,r){var i,a,o,u=arguments;return Kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Fi).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Ai(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),ji=function(){function e(){nt(this,e),this.type="NONE",this.storage={}}return it(e,[{key:"_isAvailable",value:function(){var e=Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Qt(Kt().mark((function e(t){var n;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();ji.type="NONE";var Bi=ji;function zi(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var qi=function(){function e(t,n,r){nt(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=zi(this.userKey,a.apiKey,o),this.fullPersistenceKey=zi("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return it(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Qt(Kt().mark((function e(){var t;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Ui._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Qt(Kt().mark((function e(t){var n;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Qt(Kt().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return Kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Jr(Bi),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Jr(Bi),u=zi(i,n.config.apiKey,n.name),s=null,c=at(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Ui._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Ki(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Qi(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Gi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ji(t))return"Blackberry";if(Yi(t))return"Webos";if(Wi(t))return"Safari";if((t.includes("chrome/")||Hi(t))&&!t.includes("edge/"))return"Chrome";if($i(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Gi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return/firefox\//i.test(e)}function Wi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Hi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return/crios\//i.test(e)}function Qi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return/iemobile/i.test(e)}function $i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return/android/i.test(e)}function Ji(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return/blackberry/i.test(e)}function Yi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return/webos/i.test(e)}function Xi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Zi(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return Xi(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function ea(){return Ct()&&10===document.documentMode}function ta(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return Xi(e)||$i(e)||Yi(e)||Ji(e)||/windows phone/i.test(e)||Qi(e)}function na(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ki(It());break;case"Worker":t="".concat(Ki(It()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(qn,"/").concat(r)}var ra=function(){function e(t){nt(this,e),this.auth=t,this.queue=[]}return it(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Qt(Kt().mark((function e(t){var n,r,i,a,o,u,s,c;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=at(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=at(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(l){}}}catch(f){u.e(f)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ia=function(){function e(t,n,r){nt(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oa(this),this.idTokenSubscription=new oa(this),this.beforeStateQueue=new ra(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vr,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return it(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Jr(t)),this._initializationPromise=this.queue(Qt(Kt().mark((function r(){var i,a;return Kt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,qi.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Qt(Kt().mark((function e(){var t;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Qt(Kt().mark((function e(t){var n,r,i,a,o,u,s;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Wr(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Qt(Kt().mark((function e(t){var n;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Qt(Kt().mark((function e(t){var n;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ai(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Qt(Kt().mark((function e(t){var n;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?qt(t):null)&&Wr(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Qt(Kt().mark((function e(t){var n,r=this,i=arguments;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Wr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Qt(Kt().mark((function n(){return Kt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Jr(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Dt("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Qt(Kt().mark((function e(t,n){var r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Qt(Kt().mark((function e(t){var n;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Wr(n=t&&Jr(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,qi.create(this,[Jr(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Qt(Kt().mark((function e(t){var n,r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Qt(Kt().mark((function e(t){var n=this;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Wr(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Wr(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=na(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Qt(Kt().mark((function e(){var t,n,r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function aa(e){return qt(e)}var oa=function(){function e(t){var n=this;nt(this,e),this.auth=t,this.observer=null,this.addObserver=jt((function(e){return n.observer=e}))}return it(e,[{key:"next",get:function(){return Wr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function ua(e,t,n){var r=aa(e);Wr(r._canInitEmulator,r,"emulator-config-failed"),Wr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=sa(t),o=function(e){var t=sa(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:ca(r.substr(a.length+1))}}var o=f(r.split(":"),2);return{host:o[0],port:ca(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function sa(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ca(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var la=function(){function e(t,n){nt(this,e),this.providerId=t,this.signInMethod=n}return it(e,[{key:"toJSON",value:function(){return Hr("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Hr("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Hr("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Hr("not implemented")}}]),e}();function fa(e,t){return ha.apply(this,arguments)}function ha(){return(ha=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oi(t,"POST","/v1/accounts:resetPassword",ai(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function da(e,t){return pa.apply(this,arguments)}function pa(){return(pa=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oi(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function va(e,t){return ma.apply(this,arguments)}function ma(){return(ma=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oi(t,"POST","/v1/accounts:update",ai(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ya(e,t){return ga.apply(this,arguments)}function ga(){return(ga=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",li(t,"POST","/v1/accounts:signInWithPassword",ai(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ka(e,t){return ba.apply(this,arguments)}function ba(){return(ba=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oi(t,"POST","/v1/accounts:sendOobCode",ai(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wa(e,t){return xa.apply(this,arguments)}function xa(){return(xa=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ka(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ia(e,t){return _a.apply(this,arguments)}function _a(){return(_a=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ka(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ea(e,t){return Sa.apply(this,arguments)}function Sa(){return(Sa=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ka(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ta(e,t){return Ca.apply(this,arguments)}function Ca(){return(Ca=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ka(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Na(e,t){return Aa.apply(this,arguments)}function Aa(){return(Aa=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",li(t,"POST","/v1/accounts:signInWithEmailLink",ai(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Da(e,t){return Pa.apply(this,arguments)}function Pa(){return(Pa=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",li(t,"POST","/v1/accounts:signInWithEmailLink",ai(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ra=function(e){st(n,e);var t=dt(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return nt(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return it(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ya(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Na(t,{email:this._email,oobCode:this._password}));case 5:Br(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",da(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Da(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Br(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(la);function Oa(e,t){return La.apply(this,arguments)}function La(){return(La=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",li(t,"POST","/v1/accounts:signInWithIdp",ai(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ma=function(e){st(n,e);var t=dt(n);function n(){var e;return nt(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return it(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Oa(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Oa(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Oa(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ft(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Br("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=xr(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(la);function Fa(e,t){return Va.apply(this,arguments)}function Va(){return(Va=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oi(t,"POST","/v1/accounts:sendVerificationCode",ai(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ua(){return(Ua=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",li(t,"POST","/v1/accounts:signInWithPhoneNumber",ai(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ja(){return(ja=Qt(Kt().mark((function e(t,n){var r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,li(t,"POST","/v1/accounts:signInWithPhoneNumber",ai(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw pi(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ba=i({},"USER_NOT_FOUND","user-not-found");function za(){return(za=Qt(Kt().mark((function e(t,n){var r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",li(t,"POST","/v1/accounts:signInWithPhoneNumber",ai(t,r),Ba));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qa=function(e){st(n,e);var t=dt(n);function n(e){var r;return nt(this,n),(r=t.call(this,"phone","phone")).params=e,r}return it(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Ua.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return ja.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return za.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(la);var Ka=function(){function e(t){var n,r,i,a,o,u;nt(this,e);var s=Vt(Ut(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Wr(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return it(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Vt(Ut(e)).link,n=t?Vt(Ut(t)).deep_link_id:null,r=Vt(Ut(e)).deep_link_id;return(r?Vt(Ut(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(tE){return null}}}]),e}();var Ga=function(){function e(){nt(this,e),this.providerId=e.PROVIDER_ID}return it(e,null,[{key:"credential",value:function(e,t){return Ra._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Ka.parseLink(t);return Wr(n,"argument-error"),Ra._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Ga.PROVIDER_ID="password",Ga.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ga.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Wa=function(){function e(t){nt(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return it(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Ha=function(e){st(n,e);var t=dt(n);function n(){var e;return nt(this,n),(e=t.apply(this,arguments)).scopes=[],e}return it(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Wt(this.scopes)}}]),n}(Wa),Qa=function(e){st(n,e);var t=dt(n);function n(){return nt(this,n),t.apply(this,arguments)}return it(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Wr(e.idToken||e.accessToken,"argument-error"),Ma._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Wr("providerId"in t&&"signInMethod"in t,"argument-error"),Ma._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Ha),$a=function(e){st(n,e);var t=dt(n);function n(){return nt(this,n),t.call(this,"facebook.com")}return it(n,null,[{key:"credential",value:function(e){return Ma._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(tE){return null}}}]),n}(Ha);$a.FACEBOOK_SIGN_IN_METHOD="facebook.com",$a.PROVIDER_ID="facebook.com";var Ja=function(e){st(n,e);var t=dt(n);function n(){var e;return nt(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return it(n,null,[{key:"credential",value:function(e,t){return Ma._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(tE){return null}}}]),n}(Ha);Ja.GOOGLE_SIGN_IN_METHOD="google.com",Ja.PROVIDER_ID="google.com";var Ya=function(e){st(n,e);var t=dt(n);function n(){return nt(this,n),t.call(this,"github.com")}return it(n,null,[{key:"credential",value:function(e){return Ma._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(tE){return null}}}]),n}(Ha);Ya.GITHUB_SIGN_IN_METHOD="github.com",Ya.PROVIDER_ID="github.com";var Xa=function(e){st(n,e);var t=dt(n);function n(e,r){var i;return nt(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return it(n,[{key:"_getIdTokenResponse",value:function(e){return Oa(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Oa(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Oa(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(la),Za=function(e){st(n,e);var t=dt(n);function n(e){return nt(this,n),Wr(e.startsWith("saml."),"argument-error"),t.call(this,e)}return it(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Xa.fromJSON(e);return Wr(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Xa._create(r,n)}catch(i){return null}}}]),n}(Wa),eo=function(e){st(n,e);var t=dt(n);function n(){return nt(this,n),t.call(this,"twitter.com")}return it(n,null,[{key:"credential",value:function(e,t){return Ma._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(tE){return null}}}]),n}(Ha);function to(e,t){return no.apply(this,arguments)}function no(){return(no=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",li(t,"POST","/v1/accounts:signUp",ai(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}eo.TWITTER_SIGN_IN_METHOD="twitter.com",eo.PROVIDER_ID="twitter.com";var ro=function(){function e(t){nt(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return it(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Qt(Kt().mark((function t(n,r,i){var a,o,u,s,c=arguments;return Kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Ui._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=io(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Qt(Kt().mark((function t(n,r,i){var a;return Kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=io(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function io(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function ao(){return ao=Qt(Kt().mark((function e(t){var n,r,i,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=aa(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new ro({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,to(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,ro._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),ao.apply(this,arguments)}var oo=function(e){st(n,e);var t=dt(n);function n(e,r,i,a){var o,u;return nt(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(ot(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return it(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(At);function uo(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw oo._fromErrorAndOperation(e,n,t,r);throw n}))}function so(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function co(e,t){return lo.apply(this,arguments)}function lo(){return lo=Qt(Kt().mark((function e(t,n){var r,i,a,o;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qt(t),e.next=3,po(!0,r,n);case 3:return e.t0=yi,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=so(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),lo.apply(this,arguments)}function fo(e,t){return ho.apply(this,arguments)}function ho(){return ho=Qt(Kt().mark((function e(t,n){var r,i,a=arguments;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Ei,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",ro._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),ho.apply(this,arguments)}function po(e,t,n){return vo.apply(this,arguments)}function vo(){return(vo=Qt(Kt().mark((function e(t,n,r){var i,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ai(n);case 2:i=so(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Wr(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mo(e,t){return yo.apply(this,arguments)}function yo(){return yo=Qt(Kt().mark((function e(t,n){var r,i,a,o,u,s,c,l=arguments;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,Ei(t,uo(a,o,n,t),r);case 6:return Wr((u=e.sent).idToken,a,"internal-error"),Wr(s=_i(u.idToken),a,"internal-error"),c=s.sub,Wr(t.uid===c,a,"user-mismatch"),e.abrupt("return",ro._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&Br(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),yo.apply(this,arguments)}function go(e,t){return ko.apply(this,arguments)}function ko(){return ko=Qt(Kt().mark((function e(t,n){var r,i,a,o,u=arguments;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,uo(t,i,n);case 4:return a=e.sent,e.next=7,ro._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),ko.apply(this,arguments)}function bo(e,t){return wo.apply(this,arguments)}function wo(){return(wo=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",go(aa(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xo(e,t){return Io.apply(this,arguments)}function Io(){return(Io=Qt(Kt().mark((function e(t,n){var r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qt(t),e.next=3,po(!1,r,n.providerId);case 3:return e.abrupt("return",fo(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _o(e,t){return Eo.apply(this,arguments)}function Eo(){return(Eo=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mo(qt(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function So(e,t){return To.apply(this,arguments)}function To(){return(To=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",li(t,"POST","/v1/accounts:signInWithCustomToken",ai(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Co(){return(Co=Qt(Kt().mark((function e(t,n){var r,i,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=aa(t),e.next=3,So(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,ro._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var No=function(){function e(t,n){nt(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return it(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Ao._fromServerResponse(e,t):Br(e,"internal-error")}}]),e}(),Ao=function(e){st(n,e);var t=dt(n);function n(e){var r;return nt(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return it(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(No);function Do(e,t,n){var r;Wr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Wr("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Wr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Wr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Po(){return(Po=Qt(Kt().mark((function e(t,n,r){var i,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qt(t),a={requestType:"PASSWORD_RESET",email:n},r&&Do(i,a,r),e.next=5,Ia(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ro(){return(Ro=Qt(Kt().mark((function e(t,n,r){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fa(qt(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oo(){return(Oo=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,va(qt(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lo(e,t){return Mo.apply(this,arguments)}function Mo(){return(Mo=Qt(Kt().mark((function e(t,n){var r,i,a,o;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qt(t),e.next=3,fa(r,{oobCode:n});case 3:i=e.sent,Wr(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Wr(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Wr(i.mfaInfo,r,"internal-error");case 13:Wr(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=No._fromServerResponse(aa(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fo(){return(Fo=Qt(Kt().mark((function e(t,n){var r,i;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lo(qt(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vo(e,t,n){return Uo.apply(this,arguments)}function Uo(){return(Uo=Qt(Kt().mark((function e(t,n,r){var i,a,o;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=aa(t),e.next=3,to(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,ro._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jo(){return(jo=Qt(Kt().mark((function e(t,n,r){var i,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qt(t),a={requestType:"EMAIL_SIGNIN",email:n},Wr(r.handleCodeInApp,i,"argument-error"),r&&Do(i,a,r),e.next=6,Ea(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bo(){return(Bo=Qt(Kt().mark((function e(t,n,r){var i,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qt(t),Wr((a=Ga.credentialWithLink(n,r||Yr()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",bo(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zo(e,t){return qo.apply(this,arguments)}function qo(){return(qo=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oi(t,"POST","/v1/accounts:createAuthUri",ai(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ko(){return(Ko=Qt(Kt().mark((function e(t,n){var r,i,a,o;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xr()?Yr():"http://localhost",i={identifier:n,continueUri:r},e.next=4,zo(qt(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Go(){return(Go=Qt(Kt().mark((function e(t,n){var r,i,a,o;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qt(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Do(r.auth,a,n),e.next=8,wa(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wo(){return(Wo=Qt(Kt().mark((function e(t,n,r){var i,a,o,u;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qt(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Do(i.auth,o,r),e.next=8,Ta(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ho(e,t){return Qo.apply(this,arguments)}function Qo(){return(Qo=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oi(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $o(){return($o=Qt(Kt().mark((function e(t,n){var r,i,a,o,u,s,c;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=qt(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Ei(a,Ho(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jo(e,t,n){return Yo.apply(this,arguments)}function Yo(){return(Yo=Qt(Kt().mark((function e(t,n,r){var i,a,o,u;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Ei(t,da(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xo=it((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};nt(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Zo=function(e){st(n,e);var t=dt(n);function n(e,r,i,a){var o;return nt(this,n),(o=t.call(this,e,r,i)).username=a,o}return it(n)}(Xo),eu=function(e){st(n,e);var t=dt(n);function n(e,r){return nt(this,n),t.call(this,e,"facebook.com",r)}return it(n)}(Xo),tu=function(e){st(n,e);var t=dt(n);function n(e,r){return nt(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return it(n)}(Zo),nu=function(e){st(n,e);var t=dt(n);function n(e,r){return nt(this,n),t.call(this,e,"google.com",r)}return it(n)}(Xo),ru=function(e){st(n,e);var t=dt(n);function n(e,r,i){return nt(this,n),t.call(this,e,"twitter.com",r,i)}return it(n)}(Zo);function iu(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=_i(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Xo(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new eu(a,i);case"github.com":return new tu(a,i);case"google.com":return new nu(a,i);case"twitter.com":return new ru(a,i,e.screenName||null);case"custom":case"anonymous":return new Xo(a,null);default:return new Xo(a,r,i)}}(n)}var au=function(){function e(t,n){nt(this,e),this.type=t,this.credential=n}return it(e,[{key:"toJSON",value:function(){return{multiFactorSession:i({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),ou=function(){function e(t,n,r){nt(this,e),this.session=t,this.hints=n,this.signInResolver=r}return it(e,[{key:"resolveSignIn",value:function(){var e=Qt(Kt().mark((function e(t){var n;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=aa(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return No._fromServerResponse(r,e)}));Wr(i.mfaPendingCredential,r,"internal-error");var o=au._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Qt(Kt().mark((function e(t){var a,u,s;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,ro._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Wr(n.user,r,"internal-error"),e.abrupt("return",ro._forOperation(n.user,n.operationType,u));case 17:Br(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function uu(e,t){return oi(e,"POST","/v2/accounts/mfaEnrollment:start",ai(e,t))}var su=function(){function e(t){var n=this;nt(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return No._fromServerResponse(t.auth,e)})))}))}return it(e,[{key:"getSession",value:function(){var e=Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=au,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Qt(Kt().mark((function e(t,n){var r,i,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Ei(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Qt(Kt().mark((function e(t){var n,r,i,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,Ei(this.user,oi(o=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",ai(o,{idToken:i,mfaEnrollmentId:r})));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var o}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),cu=new WeakMap;var lu="__sak",fu=function(){function e(t,n){nt(this,e),this.storageRetriever=t,this.type=n}return it(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(lu,"1"),this.storage.removeItem(lu),Promise.resolve(!0)):Promise.resolve(!1)}catch(tE){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var hu=function(e){st(n,e);var t=dt(n);function n(){var e;return nt(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=It();return Wi(e)||Xi(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=ta(),e._shouldAllowMigration=!0,e}return it(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);ea()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Qt(Kt().mark((function e(t,r){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wr(ct(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Qt(Kt().mark((function e(t){var r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wr(ct(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wr(ct(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(fu);hu.type="LOCAL";var du=hu,pu=function(e){st(n,e);var t=dt(n);function n(){return nt(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return it(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(fu);pu.type="SESSION";var vu=pu;function mu(e){return Promise.all(e.map(function(){var e=Qt(Kt().mark((function e(t){var n;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var yu=function(){function e(t){nt(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return it(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Qt(Kt().mark((function e(t){var n,r,i,a,o,u,s,c;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,mu(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function gu(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}yu.receivers=[];var ku=function(){function e(t){nt(this,e),this.target=t,this.handlers=new Set}return it(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Qt(Kt().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=gu("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function bu(){return window}function wu(){return"undefined"!==typeof bu().WorkerGlobalScope&&"function"===typeof bu().importScripts}function xu(){return Iu.apply(this,arguments)}function Iu(){return(Iu=Qt(Kt().mark((function e(){var t;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function _u(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Eu="firebaseLocalStorageDb",Su="firebaseLocalStorage",Tu="fbase_key",Cu=function(){function e(t){nt(this,e),this.request=t}return it(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Nu(e,t){return e.transaction([Su],t?"readwrite":"readonly").objectStore(Su)}function Au(){var e=indexedDB.deleteDatabase(Eu);return new Cu(e).toPromise()}function Du(){var e=indexedDB.open(Eu,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Su,{keyPath:Tu})}catch(r){n(r)}})),e.addEventListener("success",Qt(Kt().mark((function n(){var r;return Kt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Su)){n.next=12;break}return r.close(),n.next=5,Au();case 5:return n.t0=t,n.next=8,Du();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Pu(e,t,n){return Ru.apply(this,arguments)}function Ru(){return Ru=Qt(Kt().mark((function e(t,n,r){var a,o;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Nu(t,!0).put((i(a={},Tu,n),i(a,"value",r),a)),e.abrupt("return",new Cu(o).toPromise());case 2:case"end":return e.stop()}}),e)}))),Ru.apply(this,arguments)}function Ou(e,t){return Lu.apply(this,arguments)}function Lu(){return Lu=Qt(Kt().mark((function e(t,n){var r,i;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Nu(t,!1).get(n),e.next=3,new Cu(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Lu.apply(this,arguments)}function Mu(e,t){var n=Nu(e,!0).delete(t);return new Cu(n).toPromise()}var Fu=function(){function e(){nt(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return it(e,[{key:"_openDb",value:function(){var e=Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Du();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Qt(Kt().mark((function e(t){var n,r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wu()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Qt(Kt().mark((function e(){var t=this;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=yu._getInstance(wu()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Qt(Kt().mark((function e(n,r){var i;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Qt(Kt().mark((function e(){var t,n,r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xu();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new ku(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&_u()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Qt(Kt().mark((function e(){var t;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Du();case 5:return t=e.sent,e.next=8,Pu(t,lu,"1");case 8:return e.next=10,Mu(t,lu);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Qt(Kt().mark((function e(t,n){var r=this;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Pu(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Qt(Kt().mark((function e(t){var n;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Ou(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Qt(Kt().mark((function e(t){var n=this;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Mu(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Qt(Kt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Nu(e,!1).getAll();return new Cu(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=at(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Qt(Kt().mark((function t(){return Kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Fu.type="LOCAL";var Vu=Fu;function Uu(e,t){return oi(e,"POST","/v2/accounts/mfaSignIn:start",ai(e,t))}function ju(e){return Bu.apply(this,arguments)}function Bu(){return(Bu=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oi(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zu(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=zr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function qu(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Ku=1e12,Gu=function(){function e(t){nt(this,e),this.auth=t,this.counter=Ku,this._widgets=new Map}return it(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Wu(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Ku;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Ku;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Qt(Kt().mark((function e(t){var n,r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Ku,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Wu=function(){function e(t,n,r){var i=this;nt(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Wr(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return it(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Hu=qu("rcb"),Qu=new ei(3e4,6e4),$u="https://www.google.com/recaptcha/api.js?",Ju=function(){function e(){var t;nt(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=bu().grecaptcha)||void 0===t?void 0:t.render)}return it(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Wr(Yu(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(bu().grecaptcha):new Promise((function(r,i){var a=bu().setTimeout((function(){i(zr(e,"network-request-failed"))}),Qu.get());bu()[Hu]=function(){bu().clearTimeout(a),delete bu()[Hu];var o=bu().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(zr(e,"internal-error"))},zu("".concat($u,"?").concat(Ft({onload:Hu,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(zr(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=bu().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function Yu(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Xu=function(){function e(){nt(this,e)}return it(e,[{key:"load",value:function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Gu(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Zu="recaptcha",es={theme:"light",type:"image"},ts=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},es),r=arguments.length>2?arguments[2]:void 0;nt(this,e),this.parameters=n,this.type=Zu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=aa(r),this.isInvisible="invisible"===this.parameters.size,Wr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Wr(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Xu:new Ju,this.validateStartingState()}return it(e,[{key:"verify",value:function(){var e=Qt(Kt().mark((function e(){var t,n,r,i=this;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Wr(!this.parameters.sitekey,this.auth,"argument-error"),Wr(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Wr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=bu()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Wr(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Qt(Kt().mark((function e(){var t,n;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Qt(Kt().mark((function e(){var t;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wr(Xr()&&!wu(),this.auth,"internal-error"),e.next=3,ns();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,ju(this.auth);case 8:Wr(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Wr(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function ns(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var rs=function(){function e(t,n){nt(this,e),this.verificationId=t,this.onConfirmation=n}return it(e,[{key:"confirm",value:function(e){var t=qa._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function is(){return(is=Qt(Kt().mark((function e(t,n,r){var i,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=aa(t),e.next=3,ss(i,n,qt(r));case 3:return a=e.sent,e.abrupt("return",new rs(a,(function(e){return bo(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function as(e,t,n){return os.apply(this,arguments)}function os(){return(os=Qt(Kt().mark((function e(t,n,r){var i,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qt(t),e.next=3,po(!1,i,"phone");case 3:return e.next=5,ss(i.auth,n,qt(r));case 5:return a=e.sent,e.abrupt("return",new rs(a,(function(e){return xo(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function us(){return(us=Qt(Kt().mark((function e(t,n,r){var i,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qt(t),e.next=3,ss(i.auth,n,qt(r));case 3:return a=e.sent,e.abrupt("return",new rs(a,(function(e){return _o(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ss(e,t,n){return cs.apply(this,arguments)}function cs(){return cs=Qt(Kt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Wr("string"===typeof a,t,"argument-error"),Wr(r.type===Zu,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Wr("enroll"===u.type,t,"internal-error"),e.next=13,uu(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Wr("signin"===u.type,t,"internal-error"),Wr(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Uu(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Fa(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),cs.apply(this,arguments)}function ls(){return(ls=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fo(qt(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fs=function(){function e(t){nt(this,e),this.providerId=e.PROVIDER_ID,this.auth=aa(t)}return it(e,[{key:"verifyPhoneNumber",value:function(e,t){return ss(this.auth,e,qt(t))}}],[{key:"credential",value:function(e,t){return qa._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?qa._fromTokenResponse(n,r):null}}]),e}();function hs(e,t){return t?Jr(t):(Wr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}fs.PROVIDER_ID="phone",fs.PHONE_SIGN_IN_METHOD="phone";var ds=function(e){st(n,e);var t=dt(n);function n(e){var r;return nt(this,n),(r=t.call(this,"custom","custom")).params=e,r}return it(n,[{key:"_getIdTokenResponse",value:function(e){return Oa(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Oa(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Oa(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(la);function ps(e){return go(e.auth,new ds(e),e.bypassAuthState)}function vs(e){var t=e.auth,n=e.user;return Wr(n,t,"internal-error"),mo(n,new ds(e),e.bypassAuthState)}function ms(e){return ys.apply(this,arguments)}function ys(){return(ys=Qt(Kt().mark((function e(t){var n,r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Wr(r=t.user,n,"internal-error"),e.abrupt("return",fo(r,new ds(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var gs=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];nt(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return it(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Qt(Kt().mark((function t(n,r){return Kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Qt(Kt().mark((function e(t){var n,r,i,a,o,u,s;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ps;case"linkViaPopup":case"linkViaRedirect":return ms;case"reauthViaPopup":case"reauthViaRedirect":return vs;default:Br(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),ks=new ei(2e3,1e4);function bs(e,t,n){return ws.apply(this,arguments)}function ws(){return(ws=Qt(Kt().mark((function e(t,n,r){var i,a,o;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=aa(t),Kr(t,n,Wa),a=hs(i,r),o=new Es(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xs(){return(xs=Qt(Kt().mark((function e(t,n,r){var i,a,o;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kr((i=qt(t)).auth,n,Wa),a=hs(i.auth,r),o=new Es(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Is(e,t,n){return _s.apply(this,arguments)}function _s(){return(_s=Qt(Kt().mark((function e(t,n,r){var i,a,o;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kr((i=qt(t)).auth,n,Wa),a=hs(i.auth,r),o=new Es(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Es=function(e){st(n,e);var t=dt(n);function n(e,r,i,a,o){var u;return nt(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=ot(u),u}return it(n,[{key:"executeNotNull",value:function(){var e=Qt(Kt().mark((function e(){var t;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Wr(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Qt(Kt().mark((function e(){var t,n=this;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qr(1===this.filter.length,"Popup operations only handle one event"),t=gu(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(zr(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(zr(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(zr(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,ks.get())}()}}]),n}(gs);Es.currentPopupAction=null;var Ss=new Map,Ts=function(e){st(n,e);var t=dt(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return nt(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return it(n,[{key:"execute",value:function(){var e=Qt(Kt().mark((function e(){var t,r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Ss.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Cs(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,wr(ct(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Ss.set(this.auth._key(),t);case 21:return this.bypassAuthState||Ss.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Qt(Kt().mark((function e(t){var r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",wr(ct(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",wr(ct(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(gs);function Cs(e,t){return Ns.apply(this,arguments)}function Ns(){return(Ns=Qt(Kt().mark((function e(t,n){var r,i,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Os(n),i=Rs(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function As(e,t){return Ds.apply(this,arguments)}function Ds(){return(Ds=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rs(t)._set(Os(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ps(e,t){Ss.set(e._key(),t)}function Rs(e){return Jr(e._redirectPersistence)}function Os(e){return zi("pendingRedirect",e.config.apiKey,e.name)}function Ls(e,t,n){return function(e,t,n){return Ms.apply(this,arguments)}(e,t,n)}function Ms(){return(Ms=Qt(Kt().mark((function e(t,n,r){var i,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=aa(t),Kr(t,n,Wa),a=hs(i,r),e.next=5,As(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fs(e,t,n){return function(e,t,n){return Vs.apply(this,arguments)}(e,t,n)}function Vs(){return(Vs=Qt(Kt().mark((function e(t,n,r){var i,a,o;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kr((i=qt(t)).auth,n,Wa),a=hs(i.auth,r),e.next=5,As(a,i.auth);case 5:return e.next=7,Gs(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Us(e,t,n){return function(e,t,n){return js.apply(this,arguments)}(e,t,n)}function js(){return(js=Qt(Kt().mark((function e(t,n,r){var i,a,o;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kr((i=qt(t)).auth,n,Wa),a=hs(i.auth,r),e.next=5,po(!1,i,n.providerId);case 5:return e.next=7,As(a,i.auth);case 7:return e.next=9,Gs(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bs(e,t){return zs.apply(this,arguments)}function zs(){return(zs=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aa(t)._initializationPromise;case 2:return e.abrupt("return",qs(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qs(e,t){return Ks.apply(this,arguments)}function Ks(){return Ks=Qt(Kt().mark((function e(t,n){var r,i,a,o,u,s=arguments;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=aa(t),a=hs(i,n),o=new Ts(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Ks.apply(this,arguments)}function Gs(e){return Ws.apply(this,arguments)}function Ws(){return(Ws=Qt(Kt().mark((function e(t){var n;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=gu("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hs=function(){function e(t){nt(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return it(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $s(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!$s(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(zr(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qs(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Qs(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Qs(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function $s(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Js(e){return Ys.apply(this,arguments)}function Ys(){return Ys=Qt(Kt().mark((function e(t){var n,r=arguments;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",oi(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Ys.apply(this,arguments)}var Xs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zs=/^https?/;function ec(){return(ec=Qt(Kt().mark((function e(t){var n,r,i,a,o;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Js(t);case 4:n=e.sent,r=n.authorizedDomains,i=at(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!tc(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Br(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function tc(e){var t=Yr(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Zs.test(r))return!1;if(Xs.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var nc=new ei(3e4,6e4);function rc(){var e=bu().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Wt(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var ic=null;function ac(e){return ic=ic||function(e){return new Promise((function(t,n){var r,i,a;function o(){rc(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){rc(),n(zr(e,"network-request-failed"))},timeout:nc.get()})}if(null===(i=null===(r=bu().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=bu().gapi)||void 0===a?void 0:a.load)){var u=qu("iframefcb");return bu()[u]=function(){gapi.load?o():n(zr(e,"network-request-failed"))},zu("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw ic=null,e}))}(e),ic}var oc=new ei(5e3,15e3),uc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cc(e){var t=e.config;Wr(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?ti(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:qn},i=sc.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Ft(r).slice(1))}function lc(e){return fc.apply(this,arguments)}function fc(){return fc=Qt(Kt().mark((function e(t){var n,r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ac(t);case 2:return n=e.sent,Wr(r=bu().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:cc(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uc,dontclear:!0},(function(e){return new Promise(function(){var n=Qt(Kt().mark((function n(r,i){var a,o,u;return Kt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){bu().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=zr(t,"network-request-failed"),o=bu().setTimeout((function(){i(a)}),oc.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),fc.apply(this,arguments)}var hc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dc="_blank",pc="http://localhost",vc=function(){function e(t){nt(this,e),this.window=t,this.associatedEvent=null}return it(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function mc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},hc),{width:r.toString(),height:i.toString(),top:a,left:o}),c=It().toLowerCase();n&&(u=Hi(c)?dc:n),Gi(c)&&(t=t||pc,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=f(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Zi(c)&&"_self"!==u)return yc(t||"",u),new vc(null);var h=window.open(t||"",u,l);Wr(h,e,"popup-blocked");try{h.focus()}catch(d){}return new vc(h)}function yc(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var gc="__/auth/handler",kc="emulator/auth/handler";function bc(e,t,n,r,i,a){Wr(e.config.authDomain,e,"auth-domain-config-required"),Wr(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:qn,eventId:i};if(t instanceof Wa){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=f(s[u],2),l=c[0],h=c[1];o[l]=h}}if(t instanceof Ha){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(gc);return ti(t,kc)}(e),"?").concat(Ft(p).slice(1))}var wc="webStorageSupport",xc=function(){function e(){nt(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vu,this._completeRedirectFn=qs,this._overrideRedirectResult=Ps}return it(e,[{key:"_openPopup",value:function(){var e=Qt(Kt().mark((function e(t,n,r,i){var a,o;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qr(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=bc(t,n,r,Yr(),i),e.abrupt("return",mc(t,o,gu()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Qt(Kt().mark((function e(t,n,r,i){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=bc(t,n,r,Yr(),i),bu().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Qr(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Qt(Kt().mark((function e(t){var n,r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lc(t);case 2:return n=e.sent,r=new Hs(t),n.register("authEvent",(function(e){return Wr(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(wc,{type:wc},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Br(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return ec.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return ta()||Wi()||Xi()}}]),e}(),Ic=xc,_c=function(e){st(n,e);var t=dt(n);function n(e){var r;return nt(this,n),(r=t.call(this,"phone")).credential=e,r}return it(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return oi(e,"POST","/v2/accounts/mfaEnrollment:finalize",ai(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return oi(e,"POST","/v2/accounts/mfaSignIn:finalize",ai(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){nt(this,e),this.factorId=t}return it(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Hr("unexpected MultiFactorSessionType")}}}]),e}()),Ec=function(){function e(){nt(this,e)}return it(e,null,[{key:"assertion",value:function(e){return _c._fromCredential(e)}}]),e}();Ec.FACTOR_ID="phone";var Sc,Tc="@firebase/auth",Cc="0.20.5",Nc=function(){function e(t){nt(this,e),this.auth=t,this.internalListeners=new Map}return it(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Qt(Kt().mark((function e(t){var n;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Wr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Ac(){return window}Sc="Browser",Mn(new $t("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Wr(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Wr(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Sc,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:na(Sc)},i=new ia(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Jr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Mn(new $t("auth-internal",(function(e){return function(e){return new Nc(e)}(aa(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),$n(Tc,Cc,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Sc)),$n(Tc,Cc,"esm2017");function Dc(e,t,n){return Pc.apply(this,arguments)}function Pc(){return Pc=Qt(Kt().mark((function e(t,n,r){var i,a,o,u,s;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ac(),o=a.BuildInfo,Qr(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Vc(n.sessionId);case 4:return u=e.sent,s={},Xi()?s.ibi=o.packageName:$i()?s.apn=o.packageName:Br(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",bc(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Pc.apply(this,arguments)}function Rc(){return(Rc=Qt(Kt().mark((function e(t){var n,r,i;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ac(),r=n.BuildInfo,i={},Xi()?i.iosBundleId=r.packageName:$i()?i.androidPackageName=r.packageName:Br(t,"operation-not-supported-in-this-environment"),e.next=5,Js(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oc(e){var t=Ac().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Lc(e,t,n){return Mc.apply(this,arguments)}function Mc(){return Mc=Qt(Kt().mark((function e(t,n,r){var i,a,o;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ac(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(zr(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),$i()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Mc.apply(this,arguments)}function Fc(e){var t,n,r,i,a,o,u,s,c,l,f=Ac();Wr("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Wr("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Wr("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Wr("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Wr("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Vc(e){return Uc.apply(this,arguments)}function Uc(){return(Uc=Qt(Kt().mark((function e(t){var n,r,i;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=jc(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jc(e){if(Qr(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Bc=function(e){st(n,e);var t=dt(n);function n(){var e;return nt(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return it(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),wr(ct(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Hs);function zc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Hc(),postBody:null,tenantId:e.tenantId,error:zr(e,"no-auth-event")}}function qc(e,t){return Qc()._set($c(e),t)}function Kc(e){return Gc.apply(this,arguments)}function Gc(){return(Gc=Qt(Kt().mark((function e(t){var n;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qc()._get($c(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Qc()._remove($c(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wc(e,t){var n,r,i=function(e){var t=Jc(e),n=t.link?decodeURIComponent(t.link):void 0,r=Jc(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Jc(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Jc(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?zr(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Hc(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Qc(){return Jr(du)}function $c(e){return zi("authEvent",e.config.apiKey,e.name)}function Jc(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=u(t=n)||Gt(t)||c(t)||l();r[0];return Vt(r.slice(1).join("?"))}var Yc=function(){function e(){nt(this,e),this._redirectPersistence=vu,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=qs,this._overrideRedirectResult=Ps}return it(e,[{key:"_initialize",value:function(){var e=Qt(Kt().mark((function e(t){var n,r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Bc(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Br(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Qt(Kt().mark((function e(t,n,r,i){var a,o,u,s;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Fc(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Ss.clear(),e.next=10,this._originValidation(t);case 10:return o=zc(t,r,i),e.next=13,qc(t,o);case 13:return e.next=15,Dc(t,o,n);case 15:return u=e.sent,e.next=18,Oc(u);case 18:return s=e.sent,e.abrupt("return",Lc(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Rc.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Ac(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Qt(Kt().mark((function n(){return Kt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Kc(e);case 2:t.onEvent(Zc());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Qt(Kt().mark((function n(r){var i,a;return Kt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Kc(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Wc(i,r.url)),t.onEvent(a||Zc());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Ac().handleOpenURL=function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Xc=Yc;function Zc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:zr("no-auth-event")}}function el(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function tl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return!("file:"!==el()&&"ionic:"!==el()&&"capacitor:"!==el()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function nl(){return Ct()&&11===(null===document||void 0===document?void 0:document.documentMode)}function rl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return/Edge\/\d+/.test(e)}function il(){try{var e=self.localStorage,t=gu();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It();return nl()||rl(e)}()||Nt()}catch(n){return al()&&Nt()}return!1}function al(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function ol(){return("http:"===el()||"https:"===el()||St()||tl())&&!(Tt()||Et())&&il()&&!al()}function ul(){return tl()&&"undefined"!==typeof document}function sl(){return cl.apply(this,arguments)}function cl(){return(cl=Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ul()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ll={LOCAL:"local",NONE:"none",SESSION:"session"},fl=Wr,hl="persistence";function dl(e,t){fl(Object.values(ll).includes(t),e,"invalid-persistence-type"),Tt()?fl(t!==ll.SESSION,e,"unsupported-persistence-type"):Et()?fl(t===ll.NONE,e,"unsupported-persistence-type"):al()?fl(t===ll.NONE||t===ll.LOCAL&&Nt(),e,"unsupported-persistence-type"):fl(t===ll.NONE||il(),e,"unsupported-persistence-type")}function pl(e){return vl.apply(this,arguments)}function vl(){return(vl=Qt(Kt().mark((function e(t){var n,r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=ml(),r=zi(hl,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ml(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var yl=Wr,gl=function(){function e(){nt(this,e),this.browserResolver=Jr(Ic),this.cordovaResolver=Jr(Xc),this.underlyingResolver=null,this._redirectPersistence=vu,this._completeRedirectFn=qs,this._overrideRedirectResult=Ps}return it(e,[{key:"_initialize",value:function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Qt(Kt().mark((function e(t,n,r,i){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Qt(Kt().mark((function e(t,n,r,i){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return ul()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return yl(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Qt(Kt().mark((function e(){var t;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,sl();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function kl(e){return e.unwrap()}function bl(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new El(e,function(e,t){var n,r=qt(e),i=t;return Wr(t.customData.operationType,r,"argument-error"),Wr(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ou._fromError(r,i)}(e,t));else if(i){var a=wl(t),o=t;a&&(o.credential=a,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function wl(e){var t=(e instanceof At?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof At)&&"temporaryProof"in t&&"phoneNumber"in t)return fs.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Tr)return null;switch(r){case Sr:n=Ja;break;case _r:n=$a;break;case Er:n=Ya;break;case Cr:n=eo;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Xa._create(r,u):Ma._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Qa(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof At?n.credentialFromError(e):n.credentialFromResult(e)}function xl(e,t){return t.catch((function(t){throw t instanceof At&&bl(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,wl(t)),additionalUserInfo:iu(e),user:Sl.getOrCreate(r)}}))}function Il(e,t){return _l.apply(this,arguments)}function _l(){return(_l=Qt(Kt().mark((function e(t,n){var r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return xl(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var El=function(){function e(t,n){nt(this,e),this.resolver=n,this.auth=t.wrapped()}return it(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return xl(kl(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Sl=function(){function e(t){nt(this,e),this._delegate=t,this.multiFactor=function(e){var t=qt(e);return cu.has(t)||cu.set(t,su._fromUser(t)),cu.get(t)}(t)}return it(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xl(this.auth,xo(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Il(this.auth,as(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xl(this.auth,Is(this._delegate,t,gl)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pl(aa(this.auth));case 2:return e.abrupt("return",Us(this._delegate,t,gl));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xl(this.auth,_o(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Il(this.auth,function(e,t,n){return us.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return xl(this.auth,function(e,t,n){return xs.apply(this,arguments)}(this._delegate,e,gl))}},{key:"reauthenticateWithRedirect",value:function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pl(aa(this.auth));case 2:return e.abrupt("return",Fs(this._delegate,t,gl));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Go.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,co(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Jo(qt(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Jo(qt(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return ls.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return $o.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Wo.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Sl.USER_MAP=new WeakMap;var Tl=Wr,Cl=function(){function e(t,n){if(nt(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Tl(r,"invalid-api-key",{appName:t.name}),Tl(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?gl:void 0;this._delegate=n.initialize({options:{persistence:Al(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Mr),this.linkUnderlyingAuth()}return it(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Sl.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){ua(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Oo.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Lo(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Ro.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xl(this._delegate,Vo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Ko.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Ka.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Qt(Kt().mark((function e(){var t;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Tl(ol(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Bs(this._delegate,gl);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",xl(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){aa(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Nl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Nl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return jo.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Po.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Qt(Kt().mark((function e(t){var n,r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:dl(this._delegate,t),e.t0=t,e.next=e.t0===ll.SESSION?4:e.t0===ll.LOCAL?6:e.t0===ll.NONE?11:13;break;case 4:return n=vu,e.abrupt("break",14);case 6:return e.next=8,Jr(Vu)._isAvailable();case 8:return r=e.sent,n=r?Vu:du,e.abrupt("break",14);case 11:return n=Bi,e.abrupt("break",14);case 13:return e.abrupt("return",Br("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return xl(this._delegate,function(e){return ao.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return xl(this._delegate,bo(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return xl(this._delegate,function(e,t){return Co.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return xl(this._delegate,function(e,t,n){return bo(qt(e),Ga.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return xl(this._delegate,function(e,t,n){return Bo.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Il(this._delegate,function(e,t,n){return is.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Tl(ol(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",xl(this._delegate,bs(this._delegate,t,gl)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Tl(ol(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,pl(this._delegate);case 3:return e.abrupt("return",Ls(this._delegate,t,gl));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Fo.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Nl(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Sl.getOrCreate(e))},error:t,complete:n}}function Al(e,t){var n=function(e,t){var n=ml();if(!n)return[];var r=zi(hl,e,t);switch(n.getItem(r)){case ll.NONE:return[Bi];case ll.LOCAL:return[Vu,vu];case ll.SESSION:return[vu];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Vu)||n.push(Vu),"undefined"!==typeof window)for(var r=0,i=[du,vu];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Bi)||n.push(Bi),n}Cl.Persistence=ll;var Dl=function(){function e(){nt(this,e),this.providerId="phone",this._delegate=new fs(kl(kr.auth()))}return it(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return fs.credential(e,t)}}]),e}();Dl.PHONE_SIGN_IN_METHOD=fs.PHONE_SIGN_IN_METHOD,Dl.PROVIDER_ID=fs.PROVIDER_ID;var Pl,Rl=Wr,Ol=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:kr.app();nt(this,e),Rl(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new ts(t,n,i.auth()),this.type=this._delegate.type}return it(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Pl=kr).INTERNAL.registerComponent(new $t("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Cl(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Nr,PASSWORD_RESET:Ar,RECOVER_EMAIL:Dr,REVERT_SECOND_FACTOR_ADDITION:Pr,VERIFY_AND_CHANGE_EMAIL:Rr,VERIFY_EMAIL:Or}},EmailAuthProvider:Ga,FacebookAuthProvider:$a,GithubAuthProvider:Ya,GoogleAuthProvider:Ja,OAuthProvider:Qa,SAMLAuthProvider:Za,PhoneAuthProvider:Dl,PhoneMultiFactorGenerator:Ec,RecaptchaVerifier:Ol,TwitterAuthProvider:eo,Auth:Cl,AuthCredential:la,Error:At}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Pl.registerVersion("@firebase/auth-compat","0.2.18");var Ll,Ml="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Fl={},Vl=Vl||{},Ul=Ml||self;function jl(){}function Bl(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function zl(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ql="closure_uid_"+(1e9*Math.random()>>>0),Kl=0;function Gl(e,t,n){return e.call.apply(e.bind,arguments)}function Wl(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Hl(e,t,n){return(Hl=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Gl:Wl).apply(null,arguments)}function Ql(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function $l(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Jl(){this.s=this.s,this.o=this.o}var Yl={};Jl.prototype.s=!1,Jl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,ql)&&e[ql]||(e[ql]=++Kl)}(this);delete Yl[e]}},Jl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Xl=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Zl=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function ef(e){return Array.prototype.concat.apply([],arguments)}function tf(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function nf(e){return/^[\s\xa0]*$/.test(e)}var rf,af=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function of(e,t){return-1!=e.indexOf(t)}function uf(e,t){return e<t?-1:e>t?1:0}e:{var sf=Ul.navigator;if(sf){var cf=sf.userAgent;if(cf){rf=cf;break e}}rf=""}function lf(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function ff(e){var t={};for(var n in e)t[n]=e[n];return t}var hf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function df(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<hf.length;a++)n=hf[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function pf(e){return pf[" "](e),e}pf[" "]=jl;var vf,mf=of(rf,"Opera"),yf=of(rf,"Trident")||of(rf,"MSIE"),gf=of(rf,"Edge"),kf=gf||yf,bf=of(rf,"Gecko")&&!(of(rf.toLowerCase(),"webkit")&&!of(rf,"Edge"))&&!(of(rf,"Trident")||of(rf,"MSIE"))&&!of(rf,"Edge"),wf=of(rf.toLowerCase(),"webkit")&&!of(rf,"Edge");function xf(){var e=Ul.document;return e?e.documentMode:void 0}e:{var If="",_f=function(){var e=rf;return bf?/rv:([^\);]+)(\)|;)/.exec(e):gf?/Edge\/([\d\.]+)/.exec(e):yf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):wf?/WebKit\/(\S+)/.exec(e):mf?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(_f&&(If=_f?_f[1]:""),yf){var Ef=xf();if(null!=Ef&&Ef>parseFloat(If)){vf=String(Ef);break e}}vf=If}var Sf,Tf={};function Cf(){return function(e){var t=Tf;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=af(String(vf)).split("."),n=af("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=uf(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||uf(0==a[2].length,0==o[2].length)||uf(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Ul.document&&yf){var Nf=xf();Sf=Nf||(parseInt(vf,10)||void 0)}else Sf=void 0;var Af=Sf,Df=function(){if(!Ul.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ul.addEventListener("test",jl,t),Ul.removeEventListener("test",jl,t)}catch(n){}return e}();function Pf(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Rf(e,t){if(Pf.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(bf){e:{try{pf(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Of[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Rf.Z.h.call(this)}}Pf.prototype.h=function(){this.defaultPrevented=!0},$l(Rf,Pf);var Of={2:"touch",3:"pen",4:"mouse"};Rf.prototype.h=function(){Rf.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Lf="closure_listenable_"+(1e6*Math.random()|0),Mf=0;function Ff(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Mf,this.ca=this.fa=!1}function Vf(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Uf(e){this.src=e,this.g={},this.h=0}function jf(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Xl(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Vf(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Bf(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Uf.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Bf(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Ff(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var zf="closure_lm_"+(1e6*Math.random()|0),qf={};function Kf(e,t,n,r,i){if(r&&r.once)return Wf(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Kf(e,t[a],n,r,i);return null}return n=Zf(n),e&&e[Lf]?e.N(t,n,zl(r)?!!r.capture:!!r,i):Gf(e,t,n,!1,r,i)}function Gf(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=zl(i)?!!i.capture:!!i,u=Yf(e);if(u||(e[zf]=u=new Uf(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Jf;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Df||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent($f(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Wf(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Wf(e,t[a],n,r,i);return null}return n=Zf(n),e&&e[Lf]?e.O(t,n,zl(r)?!!r.capture:!!r,i):Gf(e,t,n,!0,r,i)}function Hf(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Hf(e,t[a],n,r,i);else r=zl(r)?!!r.capture:!!r,n=Zf(n),e&&e[Lf]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Bf(a=e.g[t],n,r,i))&&(Vf(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Yf(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Bf(t,n,r,i)),(n=-1<e?t[e]:null)&&Qf(n))}function Qf(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Lf])jf(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent($f(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Yf(t))?(jf(n,e),0==n.h&&(n.src=null,t[zf]=null)):Vf(e)}}}function $f(e){return e in qf?qf[e]:qf[e]="on"+e}function Jf(e,t){if(e.ca)e=!0;else{t=new Rf(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Qf(e),e=n.call(r,t)}return e}function Yf(e){return(e=e[zf])instanceof Uf?e:null}var Xf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zf(e){return"function"===typeof e?e:(e[Xf]||(e[Xf]=function(t){return e.handleEvent(t)}),e[Xf])}function eh(){Jl.call(this),this.i=new Uf(this),this.P=this,this.I=null}function th(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Pf(t,e);else if(t instanceof Pf)t.target=t.target||e;else{var i=t;df(t=new Pf(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=nh(o,r,!0,t)&&i}if(i=nh(o=t.g=e,r,!0,t)&&i,i=nh(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=nh(o=t.g=n[a],r,!1,t)&&i}function nh(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&jf(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}$l(eh,Jl),eh.prototype[Lf]=!0,eh.prototype.removeEventListener=function(e,t,n,r){Hf(this,e,t,n,r)},eh.prototype.M=function(){if(eh.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Vf(n[r]);delete t.g[e],t.h--}}this.I=null},eh.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},eh.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var rh=Ul.JSON.stringify;function ih(){var e=hh,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ah,oh=function(){function e(){nt(this,e),this.h=this.g=null}return it(e,[{key:"add",value:function(e,t){var n=uh.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),uh=new(function(){function e(t,n){nt(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return it(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new sh}),(function(e){return e.reset()})),sh=function(){function e(){nt(this,e),this.next=this.g=this.h=null}return it(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function ch(e){Ul.setTimeout((function(){throw e}),0)}function lh(e,t){ah||function(){var e=Ul.Promise.resolve(void 0);ah=function(){e.then(dh)}}(),fh||(ah(),fh=!0),hh.add(e,t)}var fh=!1,hh=new oh;function dh(){for(var e;e=ih();){try{e.h.call(e.g)}catch(n){ch(n)}var t=uh;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}fh=!1}function ph(e,t){eh.call(this),this.h=e||1,this.g=t||Ul,this.j=Hl(this.kb,this),this.l=Date.now()}function vh(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function mh(e,t,n){if("function"===typeof e)n&&(e=Hl(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Hl(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ul.setTimeout(e,t||0)}function yh(e){e.g=mh((function(){e.g=null,e.i&&(e.i=!1,yh(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}$l(ph,eh),(Ll=ph.prototype).da=!1,Ll.S=null,Ll.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),th(this,"tick"),this.da&&(vh(this),this.start()))}},Ll.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ll.M=function(){ph.Z.M.call(this),vh(this),delete this.g};var gh=function(e){st(n,e);var t=dt(n);function n(e,r){var i;return nt(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return it(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:yh(this)}},{key:"M",value:function(){wr(ct(n.prototype),"M",this).call(this),this.g&&(Ul.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Jl);function kh(e){Jl.call(this),this.h=e,this.g={}}$l(kh,Jl);var bh=[];function wh(e,t,n,r){Array.isArray(n)||(n&&(bh[0]=n.toString()),n=bh);for(var i=0;i<n.length;i++){var a=Kf(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function xh(e){lf(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Qf(e)}),e),e.g={}}function Ih(){this.g=!0}function _h(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return rh(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}kh.prototype.M=function(){kh.Z.M.call(this),xh(this)},kh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ih.prototype.Aa=function(){this.g=!1},Ih.prototype.info=function(){};var Eh={},Sh=null;function Th(){return Sh=Sh||new eh}function Ch(e){Pf.call(this,Eh.Ma,e)}function Nh(e){var t=Th();th(t,new Ch(t,e))}function Ah(e,t){Pf.call(this,Eh.STAT_EVENT,e),this.stat=t}function Dh(e){var t=Th();th(t,new Ah(t,e))}function Ph(e,t){Pf.call(this,Eh.Na,e),this.size=t}function Rh(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Ul.setTimeout((function(){e()}),t)}Eh.Ma="serverreachability",$l(Ch,Pf),Eh.STAT_EVENT="statevent",$l(Ah,Pf),Eh.Na="timingevent",$l(Ph,Pf);var Oh={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Lh={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Mh(){}function Fh(e){return e.h||(e.h=e.i())}function Vh(){}Mh.prototype.h=null;var Uh,jh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Bh(){Pf.call(this,"d")}function zh(){Pf.call(this,"c")}function qh(){}function Kh(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new kh(this),this.P=Wh,e=kf?125:void 0,this.W=new ph(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Gh}function Gh(){this.i=null,this.g="",this.h=!1}$l(Bh,Pf),$l(zh,Pf),$l(qh,Mh),qh.prototype.g=function(){return new XMLHttpRequest},qh.prototype.i=function(){return{}},Uh=new qh;var Wh=45e3,Hh={},Qh={};function $h(e,t,n){e.K=1,e.v=gd(hd(t)),e.s=n,e.U=!0,Jh(e,null)}function Jh(e,t){e.F=Date.now(),ed(e),e.A=hd(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Dd(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Gh,e.g=Rp(e.l,n?t:null,!e.s),0<e.O&&(e.L=new gh(Hl(e.Ia,e,e.g),e.O)),wh(e.V,e.g,"readystatechange",e.gb),t=e.H?ff(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Nh(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Yh(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Xh(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Zh(e,n))==Qh){4==t&&(e.o=4,Dh(14),i=!1),_h(e.j,e.m,null,"[Incomplete Response]");break}if(r==Hh){e.o=4,Dh(15),_h(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}_h(e.j,e.m,r,null),ad(e,r)}Yh(e)&&r!=Qh&&r!=Hh&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Dh(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ep(t),t.L=!0,Dh(11))):(_h(e.j,e.m,n,"[Invalid Chunked Response]"),id(e),rd(e))}function Zh(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Qh:(n=Number(t.substring(n,r)),isNaN(n)?Hh:(r+=1)+n>t.length?Qh:(t=t.substr(r,n),e.C=r+n,t))}function ed(e){e.Y=Date.now()+e.P,td(e,e.P)}function td(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Rh(Hl(e.eb,e),t)}function nd(e){e.B&&(Ul.clearTimeout(e.B),e.B=null)}function rd(e){0==e.l.G||e.I||Cp(e.l,e)}function id(e){nd(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,vh(e.W),xh(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function ad(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Ud(n.i,e)))if(n.I=e.N,!e.J&&Ud(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Tp(n),mp(n)}_p(n),Dh(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Rh(Hl(n.ab,n),6e3));if(1>=Vd(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Ap(n,11)}else if((e.J||n.g==e)&&Tp(n),!nf(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(of(l,"spdy")||of(l,"quic")||of(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(jd(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,yd(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Pp(r,r.H?r.la:null,r.W),d.J){Bd(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(nd(p),ed(p)),r.g=d}else Ip(r);0<n.l.length&&kp(n)}else"stop"!=a[0]&&"close"!=a[0]||Ap(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Ap(n,7):vp(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Nh(4)}catch(a){}}function od(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Bl(e)||"string"===typeof e)Zl(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Bl(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Bl(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function ud(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof ud)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function sd(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];cd(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)cd(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function cd(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Ll=Kh.prototype).setTimeout=function(e){this.P=e},Ll.gb=function(e){e=e.target;var t=this.L;t&&3==lp(e)?t.l():this.Ia(e)},Ll.Ia=function(e){try{if(e==this.g)e:{var t=lp(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||kf||this.g&&(this.h.h||this.g.ga()||fp(this.g)))){this.I||4!=t||7==n||Nh(8==n||0>=r?3:2),nd(this);var i=this.g.ba();this.N=i;t:if(Yh(this)){var a=fp(this.g);e="";var o=a.length,u=4==lp(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){id(this),rd(this);var s="";break t}this.h.i=new Ul.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!nf(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Dh(12),id(this),rd(this);break e}_h(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ad(this,i)}this.U?(Xh(this,t,s),kf&&this.i&&3==t&&(wh(this.V,this.W,"tick",this.fb),this.W.start())):(_h(this.j,this.m,s,null),ad(this,s)),4==t&&id(this),this.i&&!this.I&&(4==t?Cp(this.l,this):(this.i=!1,ed(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Dh(12)):(this.o=0,Dh(13)),id(this),rd(this)}}}catch(t){}},Ll.fb=function(){if(this.g){var e=lp(this.g),t=this.g.ga();this.C<t.length&&(nd(this),Xh(this,e,t),this.i&&4!=e&&ed(this))}},Ll.cancel=function(){this.I=!0,id(this)},Ll.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Nh(3),Dh(17)),id(this),this.o=2,rd(this)):td(this,this.Y-e)},(Ll=ud.prototype).R=function(){sd(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Ll.T=function(){return sd(this),this.g.concat()},Ll.get=function(e,t){return cd(this.h,e)?this.h[e]:t},Ll.set=function(e,t){cd(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Ll.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var ld=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function fd(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof fd){this.g=void 0!==t?t:e.g,dd(this,e.j),this.s=e.s,pd(this,e.i),vd(this,e.m),this.l=e.l,t=e.h;var n=new Td;n.i=t.i,t.g&&(n.g=new ud(t.g),n.h=t.h),md(this,n),this.o=e.o}else e&&(n=String(e).match(ld))?(this.g=!!t,dd(this,n[1]||"",!0),this.s=kd(n[2]||""),pd(this,n[3]||"",!0),vd(this,n[4]),this.l=kd(n[5]||"",!0),md(this,n[6]||"",!0),this.o=kd(n[7]||"")):(this.g=!!t,this.h=new Td(null,this.g))}function hd(e){return new fd(e)}function dd(e,t,n){e.j=n?kd(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function pd(e,t,n){e.i=n?kd(t,!0):t}function vd(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function md(e,t,n){t instanceof Td?(e.h=t,function(e,t){t&&!e.j&&(Cd(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Nd(this,t),Dd(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=bd(t,Ed)),e.h=new Td(t,e.g))}function yd(e,t,n){e.h.set(t,n)}function gd(e){return yd(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function kd(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function bd(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,wd),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function wd(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}fd.prototype.toString=function(){var e=[],t=this.j;t&&e.push(bd(t,xd,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(bd(t,xd,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(bd(n,"/"==n.charAt(0)?_d:Id,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",bd(n,Sd)),e.join("")};var xd=/[#\/\?@]/g,Id=/[#\?:]/g,_d=/[#\?]/g,Ed=/[#\?@]/g,Sd=/#/g;function Td(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Cd(e){e.g||(e.g=new ud,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Nd(e,t){Cd(e),t=Pd(e,t),cd(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,cd((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&sd(e)))}function Ad(e,t){return Cd(e),t=Pd(e,t),cd(e.g.h,t)}function Dd(e,t,n){Nd(e,t),0<n.length&&(e.i=null,e.g.set(Pd(e,t),tf(n)),e.h+=n.length)}function Pd(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Ll=Td.prototype).add=function(e,t){Cd(this),this.i=null,e=Pd(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ll.forEach=function(e,t){Cd(this),this.g.forEach((function(n,r){Zl(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Ll.T=function(){Cd(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Ll.R=function(e){Cd(this);var t=[];if("string"===typeof e)Ad(this,e)&&(t=ef(t,this.g.get(Pd(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=ef(t,e[n])}return t},Ll.set=function(e,t){return Cd(this),this.i=null,Ad(this,e=Pd(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ll.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Ll.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Rd=it((function e(t,n){nt(this,e),this.h=t,this.g=n}));function Od(e){this.l=e||Md,Ul.PerformanceNavigationTiming?e=0<(e=Ul.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Ul.g&&Ul.g.Ea&&Ul.g.Ea()&&Ul.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ld,Md=10;function Fd(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Vd(e){return e.h?1:e.g?e.g.size:0}function Ud(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function jd(e,t){e.g?e.g.add(t):e.h=t}function Bd(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function zd(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=at(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return tf(e.i)}function qd(){}function Kd(){this.g=new qd}function Gd(e,t,n){var r=n||"";try{od(e,(function(e,n){var i=e;zl(e)&&(i=rh(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Wd(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Hd(e){this.l=e.$b||null,this.j=e.ib||!1}function Qd(e,t){eh.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=$d,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Od.prototype.cancel=function(){if(this.i=zd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=at(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},qd.prototype.stringify=function(e){return Ul.JSON.stringify(e,void 0)},qd.prototype.parse=function(e){return Ul.JSON.parse(e,void 0)},$l(Hd,Mh),Hd.prototype.g=function(){return new Qd(this.l,this.j)},Hd.prototype.i=(Ld={},function(){return Ld}),$l(Qd,eh);var $d=0;function Jd(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Yd(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Xd(e)}function Xd(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ll=Qd.prototype).open=function(e,t){if(this.readyState!=$d)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Xd(this)},Ll.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Ul).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Ll.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yd(this)),this.readyState=$d},Ll.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Xd(this)),this.g&&(this.readyState=3,Xd(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Ul.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Jd(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Ll.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Yd(this):Xd(this),3==this.readyState&&Jd(this)}},Ll.Ua=function(e){this.g&&(this.response=this.responseText=e,Yd(this))},Ll.Ta=function(e){this.g&&(this.response=e,Yd(this))},Ll.ha=function(){this.g&&Yd(this)},Ll.setRequestHeader=function(e,t){this.v.append(e,t)},Ll.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ll.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Qd.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Zd=Ul.JSON.parse;function ep(e){eh.call(this),this.headers=new ud,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=tp,this.K=this.L=!1}$l(ep,eh);var tp="",np=/^https?$/i,rp=["POST","PUT"];function ip(e){return"content-type"==e.toLowerCase()}function ap(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,op(e),sp(e)}function op(e){e.D||(e.D=!0,th(e,"complete"),th(e,"error"))}function up(e){if(e.h&&"undefined"!=typeof Vl&&(!e.C[1]||4!=lp(e)||2!=e.ba()))if(e.v&&4==lp(e))mh(e.Fa,0,e);else if(th(e,"readystatechange"),4==lp(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(ld)[1]||null;if(!a&&Ul.self&&Ul.self.location){var o=Ul.self.location.protocol;a=o.substr(0,o.length-1)}i=!np.test(a?a.toLowerCase():"")}t=i}if(t)th(e,"complete"),th(e,"success");else{e.m=6;try{var u=2<lp(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",op(e)}}finally{sp(e)}}}function sp(e,t){if(e.g){cp(e);var n=e.g,r=e.C[0]?jl:null;e.g=null,e.C=null,t||th(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function cp(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Ul.clearTimeout(e.A),e.A=null)}function lp(e){return e.g?e.g.readyState:0}function fp(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case tp:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function hp(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return lf(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):yd(e,t,n))}function dp(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function pp(e){this.za=0,this.l=[],this.h=new Ih,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=dp("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=dp("baseRetryDelayMs",5e3,e),this.$a=dp("retryDelaySeedMs",1e4,e),this.Ya=dp("forwardChannelMaxRetries",2,e),this.ra=dp("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Od(e&&e.concurrentRequestLimit),this.Ca=new Kd,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function vp(e){if(yp(e),3==e.G){var t=e.V++,n=hd(e.F);yd(n,"SID",e.J),yd(n,"RID",t),yd(n,"TYPE","terminate"),wp(e,n),(t=new Kh(e,e.h,t,void 0)).K=2,t.v=gd(hd(n)),n=!1,Ul.navigator&&Ul.navigator.sendBeacon&&(n=Ul.navigator.sendBeacon(t.v.toString(),"")),!n&&Ul.Image&&((new Image).src=t.v,n=!0),n||(t.g=Rp(t.l,null),t.g.ea(t.v)),t.F=Date.now(),ed(t)}Dp(e)}function mp(e){e.g&&(Ep(e),e.g.cancel(),e.g=null)}function yp(e){mp(e),e.u&&(Ul.clearTimeout(e.u),e.u=null),Tp(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Ul.clearTimeout(e.m),e.m=null)}function gp(e,t){e.l.push(new Rd(e.Za++,t)),3==e.G&&kp(e)}function kp(e){Fd(e.i)||e.m||(e.m=!0,lh(e.Ha,e),e.C=0)}function bp(e,t){var n;n=t?t.m:e.V++;var r=hd(e.F);yd(r,"SID",e.J),yd(r,"RID",n),yd(r,"AID",e.U),wp(e,r),e.o&&e.s&&hp(r,e.o,e.s),n=new Kh(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=xp(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),jd(e.i,n),$h(n,r,t)}function wp(e,t){e.j&&od({},(function(e,n){yd(t,n,e)}))}function xp(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Hl(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Gd(l,o,"req"+c+"_")}catch(uv){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Ip(e){e.g||e.u||(e.Y=1,lh(e.Ga,e),e.A=0)}function _p(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Rh(Hl(e.Ga,e),Np(e,e.A)),e.A++,!0)}function Ep(e){null!=e.B&&(Ul.clearTimeout(e.B),e.B=null)}function Sp(e){e.g=new Kh(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=hd(e.oa);yd(t,"RID","rpc"),yd(t,"SID",e.J),yd(t,"CI",e.N?"0":"1"),yd(t,"AID",e.U),wp(e,t),yd(t,"TYPE","xmlhttp"),e.o&&e.s&&hp(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=gd(hd(t)),n.s=null,n.U=!0,Jh(n,e)}function Tp(e){null!=e.v&&(Ul.clearTimeout(e.v),e.v=null)}function Cp(e,t){var n=null;if(e.g==t){Tp(e),Ep(e),e.g=null;var r=2}else{if(!Ud(e.i,t))return;n=t.D,Bd(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;th(r=Th(),new Ph(r,n,t,i)),kp(e)}else Ip(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Vd(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Rh(Hl(e.Ha,e,t),Np(e,e.C)),e.C++,!0))}(e,t)||2==r&&_p(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ap(e,5);break;case 4:Ap(e,10);break;case 3:Ap(e,6);break;default:Ap(e,2)}}function Np(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Ap(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Hl(e.jb,e);n||(n=new fd("//www.google.com/images/cleardot.gif"),Ul.location&&"http"==Ul.location.protocol||dd(n,"https"),gd(n)),function(e,t){var n=new Ih;if(Ul.Image){var r=new Image;r.onload=Ql(Wd,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ql(Wd,n,r,"TestLoadImage: error",!1,t),r.onabort=Ql(Wd,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ql(Wd,n,r,"TestLoadImage: timeout",!1,t),Ul.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Dh(2);e.G=0,e.j&&e.j.va(t),Dp(e),yp(e)}function Dp(e){e.G=0,e.I=-1,e.j&&(0==zd(e.i).length&&0==e.l.length||(e.i.i.length=0,tf(e.l),e.l.length=0),e.j.ua())}function Pp(e,t,n){var r=function(e){return e instanceof fd?hd(e):new fd(e,void 0)}(n);if(""!=r.i)t&&pd(r,t+"."+r.i),vd(r,r.m);else{var i=Ul.location;r=function(e,t,n,r){var i=new fd(null,void 0);return e&&dd(i,e),t&&pd(i,t),n&&vd(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&lf(e.aa,(function(e,t){yd(r,t,e)})),t=e.D,n=e.sa,t&&n&&yd(r,t,n),yd(r,"VER",e.ma),wp(e,r),r}function Rp(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new ep(new Hd({ib:!0})):new ep(e.qa)).L=e.H,t}function Op(){}function Lp(){if(yf&&!(10<=Number(Af)))throw Error("Environmental error: no available transport.")}function Mp(e,t){eh.call(this),this.g=new pp(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!nf(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!nf(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Up(this)}function Fp(e){Bh.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Vp(){zh.call(this),this.status=1}function Up(e){this.g=e}(Ll=ep.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Uh.g(),this.C=this.u?Fh(this.u):Fh(Uh),this.g.onreadystatechange=Hl(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void ap(this,a)}e=n||"";var i=new ud(this.headers);r&&od(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=ip,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Ul.FormData&&e instanceof Ul.FormData,!(0<=Xl(rp,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{cp(this),0<this.B&&((this.K=function(e){return yf&&Cf()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Hl(this.pa,this)):this.A=mh(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){ap(this,a)}},Ll.pa=function(){"undefined"!=typeof Vl&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,th(this,"timeout"),this.abort(8))},Ll.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,th(this,"complete"),th(this,"abort"),sp(this))},Ll.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),sp(this,!0)),ep.Z.M.call(this)},Ll.Fa=function(){this.s||(this.F||this.v||this.l?up(this):this.cb())},Ll.cb=function(){up(this)},Ll.ba=function(){try{return 2<lp(this)?this.g.status:-1}catch(Ld){return-1}},Ll.ga=function(){try{return this.g?this.g.responseText:""}catch(Ld){return""}},Ll.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Zd(t)}},Ll.Da=function(){return this.m},Ll.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Ll=pp.prototype).ma=8,Ll.G=1,Ll.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Ll.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Kh(this,this.h,e,void 0),n=this.s;if(this.P&&(n?df(n=ff(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=xp(this,t,r),yd(i=hd(this.F),"RID",e),yd(i,"CVER",22),this.D&&yd(i,"X-HTTP-Session-Id",this.D),wp(this,i),this.o&&n&&hp(i,this.o,n),jd(this.i,t),this.Ra&&yd(i,"TYPE","init"),this.ja?(yd(i,"$req",r),yd(i,"SID","null"),t.$=!0,$h(t,i,null)):$h(t,i,r),this.G=2}}else 3==this.G&&(e?bp(this,e):0==this.l.length||Fd(this.i)||bp(this))},Ll.Ga=function(){if(this.u=null,Sp(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Rh(Hl(this.bb,this),e)}},Ll.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Dh(10),mp(this),Sp(this))},Ll.ab=function(){null!=this.v&&(this.v=null,mp(this),_p(this),Dh(19))},Ll.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Dh(2)):(this.h.info("Failed to ping google.com"),Dh(1))},(Ll=Op.prototype).xa=function(){},Ll.wa=function(){},Ll.va=function(){},Ll.ua=function(){},Ll.Oa=function(){},Lp.prototype.g=function(e,t){return new Mp(e,t)},$l(Mp,eh),Mp.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),lh(Hl(e.hb,e,t))),Dh(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Pp(e,null,e.W),kp(e)},Mp.prototype.close=function(){vp(this.g)},Mp.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,gp(this.g,t)}else this.v?((t={}).__data__=rh(e),gp(this.g,t)):gp(this.g,e)},Mp.prototype.M=function(){this.g.j=null,delete this.j,vp(this.g),delete this.g,Mp.Z.M.call(this)},$l(Fp,Bh),$l(Vp,zh),$l(Up,Op),Up.prototype.xa=function(){th(this.g,"a")},Up.prototype.wa=function(e){th(this.g,new Fp(e))},Up.prototype.va=function(e){th(this.g,new Vp(e))},Up.prototype.ua=function(){th(this.g,"b")},Lp.prototype.createWebChannel=Lp.prototype.g,Mp.prototype.send=Mp.prototype.u,Mp.prototype.open=Mp.prototype.m,Mp.prototype.close=Mp.prototype.close,Oh.NO_ERROR=0,Oh.TIMEOUT=8,Oh.HTTP_ERROR=6,Lh.COMPLETE="complete",Vh.EventType=jh,jh.OPEN="a",jh.CLOSE="b",jh.ERROR="c",jh.MESSAGE="d",eh.prototype.listen=eh.prototype.N,ep.prototype.listenOnce=ep.prototype.O,ep.prototype.getLastError=ep.prototype.La,ep.prototype.getLastErrorCode=ep.prototype.Da,ep.prototype.getStatus=ep.prototype.ba,ep.prototype.getResponseJson=ep.prototype.Qa,ep.prototype.getResponseText=ep.prototype.ga,ep.prototype.send=ep.prototype.ea;var jp=Fl.createWebChannelTransport=function(){return new Lp},Bp=Fl.getStatEventTarget=function(){return Th()},zp=Fl.ErrorCode=Oh,qp=Fl.EventType=Lh,Kp=Fl.Event=Eh,Gp=Fl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Wp=Fl.FetchXmlHttpFactory=Hd,Hp=Fl.WebChannel=Vh,Qp=Fl.XhrIo=ep,$p="@firebase/firestore",Jp=function(){function e(t){nt(this,e),this.uid=t}return it(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Jp.UNAUTHENTICATED=new Jp(null),Jp.GOOGLE_CREDENTIALS=new Jp("google-credentials-uid"),Jp.FIRST_PARTY=new Jp("first-party-uid"),Jp.MOCK_USER=new Jp("mock-user");var Yp="9.9.1",Xp=new un("@firebase/firestore");function Zp(){return Xp.logLevel}function ev(e){if(Xp.logLevel<=Zt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(rv);Xp.debug.apply(Xp,["Firestore (".concat(Yp,"): ").concat(e)].concat(Wt(i)))}}function tv(e){if(Xp.logLevel<=Zt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(rv);Xp.error.apply(Xp,["Firestore (".concat(Yp,"): ").concat(e)].concat(Wt(i)))}}function nv(e){if(Xp.logLevel<=Zt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(rv);Xp.warn.apply(Xp,["Firestore (".concat(Yp,"): ").concat(e)].concat(Wt(i)))}}function rv(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function iv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Yp,") INTERNAL ASSERTION FAILED: ")+e;throw tv(t),new Error(t)}function av(e,t){e||iv()}function ov(e,t){return e}var uv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},sv=function(e){st(n,e);var t=dt(n);function n(e,r){var i;return nt(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return it(n)}(At),cv=it((function e(){var t=this;nt(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),lv=it((function e(t,n){nt(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),fv=function(){function e(){nt(this,e)}return it(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Jp.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),hv=function(){function e(t){nt(this,e),this.token=t,this.changeListener=null}return it(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),dv=function(){function e(t){nt(this,e),this.t=t,this.currentUser=Jp.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return it(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new cv;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new cv,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){ev("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(ev("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new cv)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(ev("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(av("string"==typeof n.accessToken),new lv(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return av(null===e||"string"==typeof e),new Jp(e)}}]),e}(),pv=it((function e(t,n,r){nt(this,e),this.type="FirstParty",this.user=Jp.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),vv=function(){function e(t,n,r){nt(this,e),this.h=t,this.l=n,this.m=r}return it(e,[{key:"getToken",value:function(){return Promise.resolve(new pv(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Jp.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),mv=it((function e(t){nt(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),yv=function(){function e(t){nt(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return it(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&ev("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,ev("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){ev("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):ev("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(av("string"==typeof t.token),e.p=t.token,new mv(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function gv(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var kv=function(){function e(){nt(this,e)}return it(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=gv(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function bv(e,t){return e<t?-1:e>t?1:0}function wv(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function xv(e){return e+"\0"}var Iv=function(){function e(t,n){if(nt(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new sv(uv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new sv(uv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new sv(uv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new sv(uv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return it(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?bv(this.nanoseconds,e.nanoseconds):bv(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),_v=function(){function e(t){nt(this,e),this.timestamp=t}return it(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Iv(0,0))}},{key:"max",value:function(){return new e(new Iv(253402300799,999999999))}}]),e}(),Ev=function(){function e(t,n,r){nt(this,e),void 0===n?n=0:n>t.length&&iv(),void 0===r?r=t.length-n:r>t.length-n&&iv(),this.segments=t,this.offset=n,this.len=r}return it(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Sv=function(e){st(n,e);var t=dt(n);function n(){return nt(this,n),t.apply(this,arguments)}return it(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new sv(uv.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Wt(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ev),Tv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Cv=function(e){st(n,e);var t=dt(n);function n(){return nt(this,n),t.apply(this,arguments)}return it(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Tv.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new sv(uv.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new sv(uv.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new sv(uv.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new sv(uv.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ev),Nv=function(){function e(t){nt(this,e),this.path=t}return it(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Sv.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Sv.fromString(t))}},{key:"fromName",value:function(t){return new e(Sv.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Sv.emptyPath())}},{key:"comparator",value:function(e,t){return Sv.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Sv(t.slice()))}}]),e}(),Av=it((function e(t,n,r,i){nt(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Dv(e){return e.fields.find((function(e){return 2===e.kind}))}function Pv(e){return e.fields.filter((function(e){return 2!==e.kind}))}Av.UNKNOWN_ID=-1;var Rv=it((function e(t,n){nt(this,e),this.fieldPath=t,this.kind=n})),Ov=function(){function e(t,n){nt(this,e),this.sequenceNumber=t,this.offset=n}return it(e,null,[{key:"empty",value:function(){return new e(0,Fv.min())}}]),e}();function Lv(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=_v.fromTimestamp(1e9===r?new Iv(n+1,0):new Iv(n,r));return new Fv(i,Nv.empty(),t)}function Mv(e){return new Fv(e.readTime,e.key,-1)}var Fv=function(){function e(t,n,r){nt(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return it(e,null,[{key:"min",value:function(){return new e(_v.min(),Nv.empty(),-1)}},{key:"max",value:function(){return new e(_v.max(),Nv.empty(),-1)}}]),e}();function Vv(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Nv.comparator(e.documentKey,t.documentKey))?n:bv(e.largestBatchId,t.largestBatchId)}var Uv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",jv=function(){function e(){nt(this,e),this.onCommittedListeners=[]}return it(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Bv(e){return zv.apply(this,arguments)}function zv(){return zv=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===uv.FAILED_PRECONDITION&&t.message===Uv){e.next=2;break}throw t;case 2:ev("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),zv.apply(this,arguments)}var qv=function(){function e(t){var n=this;nt(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return it(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&iv(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=at(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Kv=function(){function e(t,n){var r=this;nt(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.T=new cv,this.transaction.oncomplete=function(){r.T.resolve()},this.transaction.onabort=function(){n.error?r.T.reject(new Hv(t,n.error)):r.T.resolve()},this.transaction.onerror=function(e){var n=Xv(e.target.error);r.T.reject(new Hv(t,n))}}return it(e,[{key:"A",get:function(){return this.T.promise}},{key:"abort",value:function(e){e&&this.T.reject(e),this.aborted||(ev("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"R",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new $v(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Hv(n,t)}}}]),e}(),Gv=function(){function e(t,n,r){nt(this,e),this.name=t,this.version=n,this.P=r,12.2===e.v(It())&&tv("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return it(e,[{key:"k",value:function(){var e=Qt(Kt().mark((function e(t){var n=this;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return ev("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Hv(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new sv(uv.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new sv(uv.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Hv(t,n))},i.onupgradeneeded=function(e){ev("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.P.O(t,i.transaction,e.oldVersion,n.version).next((function(){ev("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.M&&(this.db.onversionchange=function(e){return n.M(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"F",value:function(e){this.M=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Qt(Kt().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(Kt().mark((function e(){var n,o;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.k(t);case 2:return l.db=e.sent,n=Kv.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.R(),e})).catch((function(e){return n.abort(e),qv.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.A;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,ev("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return ev("SimpleDb","Removing database:",e),Jv(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"V",value:function(){if(!Nt())return!1;if(e.S())return!0;var t=It(),n=e.v(t),r=0<n&&n<10,i=e.D(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"S",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.C)}},{key:"N",value:function(e,t){return e.store(t)}},{key:"v",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"D",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Wv=function(){function e(t){nt(this,e),this.$=t,this.B=!1,this.L=null}return it(e,[{key:"isDone",get:function(){return this.B}},{key:"U",get:function(){return this.L}},{key:"cursor",set:function(e){this.$=e}},{key:"done",value:function(){this.B=!0}},{key:"q",value:function(e){this.L=e}},{key:"delete",value:function(){return Jv(this.$.delete())}}]),e}(),Hv=function(e){st(n,e);var t=dt(n);function n(e,r){var i;return nt(this,n),(i=t.call(this,uv.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return it(n)}(sv);function Qv(e){return"IndexedDbTransactionError"===e.name}var $v=function(){function e(t){nt(this,e),this.store=t}return it(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(ev("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ev("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Jv(n)}},{key:"add",value:function(e){return ev("SimpleDb","ADD",this.store.name,e,e),Jv(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Jv(this.store.get(e)).next((function(n){return void 0===n&&(n=null),ev("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return ev("SimpleDb","DELETE",this.store.name,e),Jv(this.store.delete(e))}},{key:"count",value:function(){return ev("SimpleDb","COUNT",this.store.name),Jv(this.store.count())}},{key:"K",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.G(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new qv((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"j",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new qv((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"W",value:function(e,t){ev("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.H=!1;var r=this.cursor(n);return this.G(r,(function(e,t,n){return n.delete()}))}},{key:"J",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.G(r,t)}},{key:"Y",value:function(e){var t=this.cursor({});return new qv((function(n,r){t.onerror=function(e){var t=Xv(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"G",value:function(e,t){var n=[];return new qv((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Wv(i),o=t(i.primaryKey,i.value,a);if(o instanceof qv){var u=o.catch((function(e){return a.done(),qv.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return qv.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Jv(e){return new qv((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Xv(e.target.error);n(t)}}))}var Yv=!1;function Xv(e){var t=Gv.v(It());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new sv("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Yv||(Yv=!0,setTimeout((function(){throw r}),0)),r}}return e}var Zv=function(){function e(t,n){nt(this,e),this.asyncQueue=t,this.X=n,this.task=null}return it(e,[{key:"start",value:function(){}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"Z",value:function(e){var t=this;ev("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=ev,e.t1="Documents written: ",e.next=6,t.X.tt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Qv(e.t4)){e.next=17;break}ev("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Bv(e.t4);case 19:return e.next=21,t.Z(1);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),em=function(){function e(t,n){nt(this,e),this.localStore=t,this.persistence=n}return it(e,[{key:"tt",value:function(){var e=Qt(Kt().mark((function e(){var t,n=this,r=arguments;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.et(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"et",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return qv.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return ev("IndexBackiller","Processing collection: ".concat(t)),n.nt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"nt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.st(i,n)})).next((function(n){return ev("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"st",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Mv(t);Vv(r,n)>0&&(n=r)})),new Fv(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),tm=function(){function e(t,n){var r=this;nt(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.it(e)},this.rt=function(e){return n.writeSequenceNumber(e)})}return it(e,[{key:"it",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.rt&&this.rt(e),e}}]),e}();function nm(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function rm(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function im(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}tm.ot=-1;var am=function(){function e(t,n){nt(this,e),this.comparator=t,this.root=n||um.EMPTY}return it(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,um.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,um.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new om(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new om(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new om(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new om(this.root,e,this.comparator,!0)}}]),e}(),om=function(){function e(t,n,r,i){nt(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return it(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),um=function(){function e(t,n,r,i,a){nt(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return it(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw iv();if(this.right.isRed())throw iv();var e=this.left.check();if(e!==this.right.check())throw iv();return e+(this.isRed()?0:1)}}]),e}();um.EMPTY=null,um.RED=!0,um.BLACK=!1,um.EMPTY=new(function(){function e(){nt(this,e),this.size=0}return it(e,[{key:"key",get:function(){throw iv()}},{key:"value",get:function(){throw iv()}},{key:"color",get:function(){throw iv()}},{key:"left",get:function(){throw iv()}},{key:"right",get:function(){throw iv()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new um(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var sm=function(){function e(t){nt(this,e),this.comparator=t,this.data=new am(this.comparator)}return it(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new cm(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new cm(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),cm=function(){function e(t){nt(this,e),this.iter=t}return it(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function lm(e){return e.hasNext()?e.getNext():void 0}var fm=function(){function e(t){nt(this,e),this.fields=t,t.sort(Cv.comparator)}return it(e,[{key:"unionWith",value:function(t){var n,r=new sm(Cv.comparator),i=at(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=at(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=at(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return wv(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var hm=function(e){function t(e){nt(this,t),this.binaryString=e}return it(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return bv(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();hm.EMPTY_BYTE_STRING=new hm("");var dm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pm(e){if(av(!!e),"string"==typeof e){var t=0,n=dm.exec(e);if(av(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:vm(e.seconds),nanos:vm(e.nanos)}}function vm(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function mm(e){return"string"==typeof e?hm.fromBase64String(e):hm.fromUint8Array(e)}function ym(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function gm(e){var t=e.mapValue.fields.__previous_value__;return ym(t)?gm(t):t}function km(e){var t=pm(e.mapValue.fields.__local_write_time__.timestampValue);return new Iv(t.seconds,t.nanos)}var bm=it((function e(t,n,r,i,a,o,u,s){nt(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),wm=function(){function e(t,n){nt(this,e),this.projectId=t,this.database=n||"(default)"}return it(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function xm(e){return null==e}function Im(e){return 0===e&&1/e==-1/0}function _m(e){return"number"==typeof e&&Number.isInteger(e)&&!Im(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Em={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Sm={nullValue:"NULL_VALUE"};function Tm(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ym(e)?4:Bm(e)?9007199254740991:10:iv()}function Cm(e,t){if(e===t)return!0;var n=Tm(e);if(n!==Tm(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return km(e).isEqual(km(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=pm(e.timestampValue),r=pm(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return mm(e.bytesValue).isEqual(mm(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return vm(e.geoPointValue.latitude)===vm(t.geoPointValue.latitude)&&vm(e.geoPointValue.longitude)===vm(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return vm(e.integerValue)===vm(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=vm(e.doubleValue),r=vm(t.doubleValue);return n===r?Im(n)===Im(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return wv(e.arrayValue.values||[],t.arrayValue.values||[],Cm);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(nm(n)!==nm(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Cm(n[i],r[i])))return!1;return!0}(e,t);default:return iv()}}function Nm(e,t){return void 0!==(e.values||[]).find((function(e){return Cm(e,t)}))}function Am(e,t){if(e===t)return 0;var n=Tm(e),r=Tm(t);if(n!==r)return bv(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return bv(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=vm(e.integerValue||e.doubleValue),r=vm(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Dm(e.timestampValue,t.timestampValue);case 4:return Dm(km(e),km(t));case 5:return bv(e.stringValue,t.stringValue);case 6:return function(e,t){var n=mm(e),r=mm(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=bv(n[i],r[i]);if(0!==a)return a}return bv(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=bv(vm(e.latitude),vm(t.latitude));return 0!==n?n:bv(vm(e.longitude),vm(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Am(n[i],r[i]);if(a)return a}return bv(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Em.mapValue&&t===Em.mapValue)return 0;if(e===Em.mapValue)return 1;if(t===Em.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=bv(r[o],a[o]);if(0!==u)return u;var s=Am(n[r[o]],i[a[o]]);if(0!==s)return s}return bv(r.length,a.length)}(e.mapValue,t.mapValue);default:throw iv()}}function Dm(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return bv(e,t);var n=pm(e),r=pm(t),i=bv(n.seconds,r.seconds);return 0!==i?i:bv(n.nanos,r.nanos)}function Pm(e){return Rm(e)}function Rm(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=pm(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?mm(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Nv.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=at(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Rm(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=at(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Rm(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):iv();var t,n}function Om(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Lm(e){return!!e&&"integerValue"in e}function Mm(e){return!!e&&"arrayValue"in e}function Fm(e){return!!e&&"nullValue"in e}function Vm(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Um(e){return!!e&&"mapValue"in e}function jm(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return rm(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=jm(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=jm(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Bm(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function zm(e){return"nullValue"in e?Sm:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Om(wm.empty(),Nv.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:iv()}function qm(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Om(wm.empty(),Nv.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Em:iv()}function Km(e,t){var n=Am(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Gm(e,t){var n=Am(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Wm=function(){function e(t){nt(this,e),this.value=t}return it(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Um(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jm(t)}},{key:"setAll",value:function(e){var t=this,n=Cv.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=jm(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Um(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Cm(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Um(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){rm(t,(function(t,n){return e[t]=n}));var r,i=at(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(jm(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Hm(e){var t=[];return rm(e.fields,(function(e,n){var r=new Cv([e]);if(Um(n)){var i=Hm(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=at(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new fm(t)}var Qm=function(){function e(t,n,r,i,a,o){nt(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return it(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Wm.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Wm.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=_v.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,_v.min(),_v.min(),Wm.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,_v.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,_v.min(),Wm.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,_v.min(),Wm.empty(),2)}}]),e}(),$m=it((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;nt(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ut=null}));function Jm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new $m(e,t,n,r,i,a,o)}function Ym(e){var t=ov(e);if(null===t.ut){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Pm(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),xm(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Pm(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Pm(e)})).join(",")),t.ut=n}return t.ut}function Xm(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!py(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Cm(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!my(e.startAt,t.startAt)&&my(e.endAt,t.endAt)}function Zm(e){return Nv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function ey(e,t){return e.filters.filter((function(e){return e instanceof ry&&e.field.isEqual(t)}))}function ty(e,t,n){var r,i=Sm,a=!0,o=at(ey(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Sm,c=!0;switch(u.op){case"<":case"<=":s=zm(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Sm}Km({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Km({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function ny(e,t,n){var r,i=Em,a=!0,o=at(ey(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Em,c=!0;switch(u.op){case">=":case">":s=qm(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Em}Gm({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Gm({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var ry=function(e){st(n,e);var t=dt(n);function n(e,r,i){var a;return nt(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return it(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Am(t,this.value)):null!==t&&Tm(this.value)===Tm(t)&&this.at(Am(t,this.value))}},{key:"at",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return iv()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new iy(e,t,r):"array-contains"===t?new sy(e,r):"in"===t?new cy(e,r):"not-in"===t?new ly(e,r):"array-contains-any"===t?new fy(e,r):new n(e,t,r)}},{key:"ct",value:function(e,t,n){return"in"===t?new ay(e,n):new oy(e,n)}}]),n}(function(){return it((function e(){nt(this,e)}))}()),iy=function(e){st(n,e);var t=dt(n);function n(e,r,i){var a;return nt(this,n),(a=t.call(this,e,r,i)).key=Nv.fromName(i.referenceValue),a}return it(n,[{key:"matches",value:function(e){var t=Nv.comparator(e.key,this.key);return this.at(t)}}]),n}(ry),ay=function(e){st(n,e);var t=dt(n);function n(e,r){var i;return nt(this,n),(i=t.call(this,e,"in",r)).keys=uy("in",r),i}return it(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(ry),oy=function(e){st(n,e);var t=dt(n);function n(e,r){var i;return nt(this,n),(i=t.call(this,e,"not-in",r)).keys=uy("not-in",r),i}return it(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(ry);function uy(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Nv.fromName(e.referenceValue)}))}var sy=function(e){st(n,e);var t=dt(n);function n(e,r){return nt(this,n),t.call(this,e,"array-contains",r)}return it(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Mm(t)&&Nm(t.arrayValue,this.value)}}]),n}(ry),cy=function(e){st(n,e);var t=dt(n);function n(e,r){return nt(this,n),t.call(this,e,"in",r)}return it(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Nm(this.value.arrayValue,t)}}]),n}(ry),ly=function(e){st(n,e);var t=dt(n);function n(e,r){return nt(this,n),t.call(this,e,"not-in",r)}return it(n,[{key:"matches",value:function(e){if(Nm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Nm(this.value.arrayValue,t)}}]),n}(ry),fy=function(e){st(n,e);var t=dt(n);function n(e,r){return nt(this,n),t.call(this,e,"array-contains-any",r)}return it(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Mm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Nm(t.value.arrayValue,e)}))}}]),n}(ry),hy=it((function e(t,n){nt(this,e),this.position=t,this.inclusive=n})),dy=it((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";nt(this,e),this.field=t,this.dir=n}));function py(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function vy(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Nv.comparator(Nv.fromName(o.referenceValue),n.key):Am(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function my(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Cm(e.position[n],t.position[n]))return!1;return!0}var yy=it((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;nt(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.lt=null,this.ft=null,this.startAt,this.endAt}));function gy(e,t,n,r,i,a,o,u){return new yy(e,t,n,r,i,a,o,u)}function ky(e){return new yy(e)}function by(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function wy(e){var t,n=at(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.ht())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function xy(e){return null!==e.collectionGroup}function Iy(e){var t=ov(e);if(null===t.lt){t.lt=[];var n=wy(t),r=by(t);if(null!==n&&null===r)n.isKeyField()||t.lt.push(new dy(n)),t.lt.push(new dy(Cv.keyField(),"asc"));else{var i,a=!1,o=at(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.lt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new dy(Cv.keyField(),s))}}}return t.lt}function _y(e){var t=ov(e);if(!t.ft)if("F"===t.limitType)t.ft=Jm(t.path,t.collectionGroup,Iy(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=at(Iy(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new dy(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new hy(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new hy(t.startAt.position,t.startAt.inclusive):null;t.ft=Jm(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.ft}function Ey(e,t,n){return new yy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Sy(e,t){return Xm(_y(e),_y(t))&&e.limitType===t.limitType}function Ty(e){return"".concat(Ym(_y(e)),"|lt:").concat(e.limitType)}function Cy(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Pm(t.value));var t})).join(", "),"]")),xm(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Pm(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Pm(e)})).join(",")),"Target(".concat(t,")")}(_y(e)),"; limitType=").concat(e.limitType,")")}function Ny(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Nv.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=at(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=at(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=vy(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Iy(e),t))&&!(e.endAt&&!function(e,t,n){var r=vy(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Iy(e),t))}(e,t)}function Ay(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Dy(e){return function(t,n){var r,i=!1,a=at(Iy(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Py(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Py(e,t,n){var r=e.field.isKeyField()?Nv.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Am(r,i):iv()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return iv()}}function Ry(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Im(t)?"-0":t}}function Oy(e){return{integerValue:""+e}}function Ly(e,t){return _m(t)?Oy(t):Ry(e,t)}var My=it((function e(){nt(this,e),this._=void 0}));function Fy(e,t,n){return e instanceof jy?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof By?zy(e,t):e instanceof qy?Ky(e,t):function(e,t){var n=Uy(e,t),r=Wy(n)+Wy(e._t);return Lm(n)&&Lm(e._t)?Oy(r):Ry(e.wt,r)}(e,t)}function Vy(e,t,n){return e instanceof By?zy(e,t):e instanceof qy?Ky(e,t):n}function Uy(e,t){return e instanceof Gy?Lm(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var jy=function(e){st(n,e);var t=dt(n);function n(){return nt(this,n),t.apply(this,arguments)}return it(n)}(My),By=function(e){st(n,e);var t=dt(n);function n(e){var r;return nt(this,n),(r=t.call(this)).elements=e,r}return it(n)}(My);function zy(e,t){var n,r=Hy(t),i=at(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Cm(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var qy=function(e){st(n,e);var t=dt(n);function n(e){var r;return nt(this,n),(r=t.call(this)).elements=e,r}return it(n)}(My);function Ky(e,t){var n,r=Hy(t),i=at(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Cm(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Gy=function(e){st(n,e);var t=dt(n);function n(e,r){var i;return nt(this,n),(i=t.call(this)).wt=e,i._t=r,i}return it(n)}(My);function Wy(e){return vm(e.integerValue||e.doubleValue)}function Hy(e){return Mm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Qy=it((function e(t,n){nt(this,e),this.field=t,this.transform=n}));var $y=it((function e(t,n){nt(this,e),this.version=t,this.transformResults=n})),Jy=function(){function e(t,n){nt(this,e),this.updateTime=t,this.exists=n}return it(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Yy(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Xy=it((function e(){nt(this,e)}));function Zy(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new fg(e.key,Jy.none()):new ig(e.key,e.data,Jy.none());var n,r=e.data,i=Wm.empty(),a=new sm(Cv.comparator),o=at(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new ag(e.key,i,new fm(a.toArray()),Jy.none())}function eg(e,t,n){e instanceof ig?function(e,t,n){var r=e.value.clone(),i=ug(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ag?function(e,t,n){if(Yy(e.precondition,t)){var r=ug(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(og(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function tg(e,t,n,r){return e instanceof ig?function(e,t,n,r){if(!Yy(e.precondition,t))return n;var i=e.value.clone(),a=sg(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof ag?function(e,t,n,r){if(!Yy(e.precondition,t))return n;var i=sg(e.fieldTransforms,r,t),a=t.data;return a.setAll(og(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Yy(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ng(e,t){var n,r=null,i=at(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Uy(a.transform,o||null);null!=u&&(null===r&&(r=Wm.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function rg(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&wv(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof By&&t instanceof By||e instanceof qy&&t instanceof qy?wv(e.elements,t.elements,Cm):e instanceof Gy&&t instanceof Gy?Cm(e._t,t._t):e instanceof jy&&t instanceof jy}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var ig=function(e){st(n,e);var t=dt(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return nt(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return it(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Xy),ag=function(e){st(n,e);var t=dt(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return nt(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return it(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Xy);function og(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function ug(e,t,n){var r=new Map;av(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Vy(o,u,n[i]))}return r}function sg(e,t,n){var r,i=new Map,a=at(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Fy(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var cg,lg,fg=function(e){st(n,e);var t=dt(n);function n(e,r){var i;return nt(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return it(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Xy),hg=function(e){st(n,e);var t=dt(n);function n(e,r){var i;return nt(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return it(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Xy),dg=it((function e(t){nt(this,e),this.count=t}));function pg(e){switch(e){default:return iv();case uv.CANCELLED:case uv.UNKNOWN:case uv.DEADLINE_EXCEEDED:case uv.RESOURCE_EXHAUSTED:case uv.INTERNAL:case uv.UNAVAILABLE:case uv.UNAUTHENTICATED:return!1;case uv.INVALID_ARGUMENT:case uv.NOT_FOUND:case uv.ALREADY_EXISTS:case uv.PERMISSION_DENIED:case uv.FAILED_PRECONDITION:case uv.ABORTED:case uv.OUT_OF_RANGE:case uv.UNIMPLEMENTED:case uv.DATA_LOSS:return!0}}function vg(e){if(void 0===e)return tv("GRPC error has no .code"),uv.UNKNOWN;switch(e){case cg.OK:return uv.OK;case cg.CANCELLED:return uv.CANCELLED;case cg.UNKNOWN:return uv.UNKNOWN;case cg.DEADLINE_EXCEEDED:return uv.DEADLINE_EXCEEDED;case cg.RESOURCE_EXHAUSTED:return uv.RESOURCE_EXHAUSTED;case cg.INTERNAL:return uv.INTERNAL;case cg.UNAVAILABLE:return uv.UNAVAILABLE;case cg.UNAUTHENTICATED:return uv.UNAUTHENTICATED;case cg.INVALID_ARGUMENT:return uv.INVALID_ARGUMENT;case cg.NOT_FOUND:return uv.NOT_FOUND;case cg.ALREADY_EXISTS:return uv.ALREADY_EXISTS;case cg.PERMISSION_DENIED:return uv.PERMISSION_DENIED;case cg.FAILED_PRECONDITION:return uv.FAILED_PRECONDITION;case cg.ABORTED:return uv.ABORTED;case cg.OUT_OF_RANGE:return uv.OUT_OF_RANGE;case cg.UNIMPLEMENTED:return uv.UNIMPLEMENTED;case cg.DATA_LOSS:return uv.DATA_LOSS;default:return iv()}}(lg=cg||(cg={}))[lg.OK=0]="OK",lg[lg.CANCELLED=1]="CANCELLED",lg[lg.UNKNOWN=2]="UNKNOWN",lg[lg.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lg[lg.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lg[lg.NOT_FOUND=5]="NOT_FOUND",lg[lg.ALREADY_EXISTS=6]="ALREADY_EXISTS",lg[lg.PERMISSION_DENIED=7]="PERMISSION_DENIED",lg[lg.UNAUTHENTICATED=16]="UNAUTHENTICATED",lg[lg.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lg[lg.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lg[lg.ABORTED=10]="ABORTED",lg[lg.OUT_OF_RANGE=11]="OUT_OF_RANGE",lg[lg.UNIMPLEMENTED=12]="UNIMPLEMENTED",lg[lg.INTERNAL=13]="INTERNAL",lg[lg.UNAVAILABLE=14]="UNAVAILABLE",lg[lg.DATA_LOSS=15]="DATA_LOSS";var mg=function(){function e(t,n){nt(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return it(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=at(n);try{for(i.s();!(r=i.n()).done;){var a=f(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){rm(this.inner,(function(t,n){var r,i=at(n);try{for(i.s();!(r=i.n()).done;){var a=f(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return im(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),yg=new am(Nv.comparator);function gg(){return yg}var kg=new am(Nv.comparator);function bg(){for(var e=kg,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function wg(e){var t=kg;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function xg(){return _g()}function Ig(){return _g()}function _g(){return new mg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Eg=new am(Nv.comparator),Sg=new sm(Nv.comparator);function Tg(){for(var e=Sg,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Cg=new sm(bv);function Ng(){return Cg}var Ag=function(){function e(t,n,r,i,a){nt(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return it(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Dg.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(_v.min(),r,Ng(),gg(),Tg())}}]),e}(),Dg=function(){function e(t,n,r,i,a){nt(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return it(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(hm.EMPTY_BYTE_STRING,n,Tg(),Tg(),Tg())}}]),e}(),Pg=it((function e(t,n,r,i){nt(this,e),this.gt=t,this.removedTargetIds=n,this.key=r,this.yt=i})),Rg=it((function e(t,n){nt(this,e),this.targetId=t,this.It=n})),Og=it((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hm.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;nt(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Lg=function(){function e(){nt(this,e),this.Tt=0,this.Et=Vg(),this.At=hm.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return it(e,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}},{key:"St",value:function(){var e=Tg(),t=Tg(),n=Tg();return this.Et.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:iv()}})),new Dg(this.At,this.Rt,e,t,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=Vg()}},{key:"Ct",value:function(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}},{key:"xt",value:function(e){this.bt=!0,this.Et=this.Et.remove(e)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Ot",value:function(){this.bt=!0,this.Rt=!0}}]),e}(),Mg=function(){function e(t){nt(this,e),this.Mt=t,this.Ft=new Map,this.$t=gg(),this.Bt=Fg(),this.Lt=new sm(bv)}return it(e,[{key:"Ut",value:function(e){var t,n=at(e.gt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt)}}catch(u){n.e(u)}finally{n.f()}var i,a=at(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Kt(o,e.key,e.yt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Gt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Qt(n);switch(e.state){case 0:t.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||t.removeTarget(n);break;case 3:t.jt(n)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:t.jt(n)&&(t.Wt(n),r.Vt(e.resumeToken));break;default:iv()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((function(e,r){n.jt(r)&&t(r)}))}},{key:"zt",value:function(e){var t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){var i=r.target;if(Zm(i))if(0===n){var a=new Nv(i.path);this.Kt(t,a,Qm.newNoDocument(a,_v.min()))}else av(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}},{key:"Yt",value:function(e){var t=this,n=new Map;this.Ft.forEach((function(r,i){var a=t.Ht(i);if(a){if(r.current&&Zm(a.target)){var o=new Nv(a.target.path);null!==t.$t.get(o)||t.Xt(i,o)||t.Kt(i,o,Qm.newNoDocument(o,e))}r.vt&&(n.set(i,r.St()),r.Dt())}}));var r=Tg();this.Bt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ht(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$t.forEach((function(t,n){return n.setReadTime(e)}));var i=new Ag(e,n,this.Lt,this.$t,r);return this.$t=gg(),this.Bt=Fg(),this.Lt=new sm(bv),i}},{key:"qt",value:function(e,t){if(this.jt(e)){var n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}}},{key:"Kt",value:function(e,t,n){if(this.jt(e)){var r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ft.delete(e)}},{key:"Jt",value:function(e){var t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Nt",value:function(e){this.Qt(e).Nt()}},{key:"Qt",value:function(e){var t=this.Ft.get(e);return t||(t=new Lg,this.Ft.set(e,t)),t}},{key:"Zt",value:function(e){var t=this.Bt.get(e);return t||(t=new sm(bv),this.Bt=this.Bt.insert(e,t)),t}},{key:"jt",value:function(e){var t=null!==this.Ht(e);return t||ev("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ht",value:function(e){var t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}},{key:"Wt",value:function(e){var t=this;this.Ft.set(e,new Lg),this.Mt.getRemoteKeysForTarget(e).forEach((function(n){t.Kt(e,n,null)}))}},{key:"Xt",value:function(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Fg(){return new am(Nv.comparator)}function Vg(){return new am(Nv.comparator)}var Ug={asc:"ASCENDING",desc:"DESCENDING"},jg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bg=it((function e(t,n){nt(this,e),this.databaseId=t,this.dt=n}));function zg(e,t){return e.dt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function qg(e,t){return e.dt?t.toBase64():t.toUint8Array()}function Kg(e,t){return zg(e,t.toTimestamp())}function Gg(e){return av(!!e),_v.fromTimestamp(function(e){var t=pm(e);return new Iv(t.seconds,t.nanos)}(e))}function Wg(e,t){return function(e){return new Sv(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Hg(e){var t=Sv.fromString(e);return av(mk(t)),t}function Qg(e,t){return Wg(e.databaseId,t.path)}function $g(e,t){var n=Hg(t);if(n.get(1)!==e.databaseId.projectId)throw new sv(uv.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new sv(uv.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Nv(Zg(n))}function Jg(e,t){return Wg(e.databaseId,t)}function Yg(e){var t=Hg(e);return 4===t.length?Sv.emptyPath():Zg(t)}function Xg(e){return new Sv(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Zg(e){return av(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ek(e,t,n){return{name:Qg(e,t),fields:n.value.mapValue.fields}}function tk(e,t,n){var r=$g(e,t.name),i=Gg(t.updateTime),a=new Wm({mapValue:{fields:t.fields}}),o=Qm.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function nk(e,t){return"found"in t?function(e,t){av(!!t.found),t.found.name,t.found.updateTime;var n=$g(e,t.found.name),r=Gg(t.found.updateTime),i=new Wm({mapValue:{fields:t.found.fields}});return Qm.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){av(!!t.missing),av(!!t.readTime);var n=$g(e,t.missing),r=Gg(t.readTime);return Qm.newNoDocument(n,r)}(e,t):iv()}function rk(e,t){var n;if(t instanceof ig)n={update:ek(e,t.key,t.value)};else if(t instanceof fg)n={delete:Qg(e,t.key)};else if(t instanceof ag)n={update:ek(e,t.key,t.data),updateMask:vk(t.fieldMask)};else{if(!(t instanceof hg))return iv();n={verify:Qg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof jy)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof By)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof qy)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Gy)return{fieldPath:t.field.canonicalString(),increment:n._t};throw iv()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Kg(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:iv()}(e,t.precondition)),n}function ik(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Jy.updateTime(Gg(e.updateTime)):void 0!==e.exists?Jy.exists(e.exists):Jy.none()}(t.currentDocument):Jy.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)av("REQUEST_TIME"===t.setToServerValue),n=new jy;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new By(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new qy(i)}else"increment"in t?n=new Gy(e,t.increment):iv();var a=Cv.fromServerFormat(t.fieldPath);return new Qy(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=$g(e,t.update.name),a=new Wm({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new fm(t.map((function(e){return Cv.fromServerFormat(e)})))}(t.updateMask);return new ag(i,a,o,n,r)}return new ig(i,a,n,r)}if(t.delete){var u=$g(e,t.delete);return new fg(u,n)}if(t.verify){var s=$g(e,t.verify);return new hg(s,n)}return iv()}function ak(e,t){return{documents:[Jg(e,t.path)]}}function ok(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Jg(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Jg(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Vm(e.value))return{unaryFilter:{field:fk(e.field),op:"IS_NAN"}};if(Fm(e.value))return{unaryFilter:{field:fk(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Vm(e.value))return{unaryFilter:{field:fk(e.field),op:"IS_NOT_NAN"}};if(Fm(e.value))return{unaryFilter:{field:fk(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fk(e.field),op:lk(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:fk(e.field),direction:ck(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.dt||xm(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function uk(e){var t=Yg(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){av(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=sk(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new dy(hk(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return xm(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new hy(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new hy(n,t)}(n.endAt)),gy(t,i,u,o,s,"F",c,l)}function sk(e){return e?void 0!==e.unaryFilter?[pk(e)]:void 0!==e.fieldFilter?[dk(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return sk(e)})).reduce((function(e,t){return e.concat(t)})):iv():[]}function ck(e){return Ug[e]}function lk(e){return jg[e]}function fk(e){return{fieldPath:e.canonicalString()}}function hk(e){return Cv.fromServerFormat(e.fieldPath)}function dk(e){return ry.create(hk(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return iv()}}(e.fieldFilter.op),e.fieldFilter.value)}function pk(e){switch(e.unaryFilter.op){case"IS_NAN":var t=hk(e.unaryFilter.field);return ry.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=hk(e.unaryFilter.field);return ry.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=hk(e.unaryFilter.field);return ry.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=hk(e.unaryFilter.field);return ry.create(i,"!=",{nullValue:"NULL_VALUE"});default:return iv()}}function vk(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function mk(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function yk(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=kk(t)),t=gk(e.get(n),t);return kk(t)}function gk(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function kk(e){return e+"\x01\x01"}function bk(e){var t=e.length;if(av(t>=2),2===t)return av("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Sv.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&iv(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:iv()}a=o+2}return new Sv(r)}var wk=["userId","batchId"];function xk(e,t){return[e,yk(t)]}function Ik(e,t,n){return[e,yk(t),n]}var _k={},Ek=["prefixPath","collectionGroup","readTime","documentId"],Sk=["prefixPath","collectionGroup","documentId"],Tk=["collectionGroup","readTime","prefixPath","documentId"],Ck=["canonicalId","targetId"],Nk=["targetId","path"],Ak=["path","targetId"],Dk=["collectionId","parent"],Pk=["indexId","uid"],Rk=["uid","sequenceNumber"],Ok=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Lk=["indexId","uid","orderedDocumentKey"],Mk=["userId","collectionPath","documentId"],Fk=["userId","collectionPath","largestBatchId"],Vk=["userId","collectionGroup","largestBatchId"],Uk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),jk=[].concat(Wt(Uk),["documentOverlays"]),Bk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],zk=Bk,qk=[].concat(zk,["indexConfiguration","indexState","indexEntries"]),Kk=function(e){st(n,e);var t=dt(n);function n(e,r){var i;return nt(this,n),(i=t.call(this)).ee=e,i.currentSequenceNumber=r,i}return it(n)}(jv);function Gk(e,t){var n=ov(e);return Gv.N(n.ee,t)}var Wk=function(){function e(t,n,r,i){nt(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return it(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&eg(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=at(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=tg(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=at(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=tg(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Ig();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Zy(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(_v.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Tg())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&wv(this.mutations,e.mutations,(function(e,t){return rg(e,t)}))&&wv(this.baseMutations,e.baseMutations,(function(e,t){return rg(e,t)}))}}]),e}(),Hk=function(){function e(t,n,r,i){nt(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return it(e,null,[{key:"from",value:function(t,n,r){av(t.mutations.length===r.length);for(var i=Eg,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Qk=function(){function e(t,n){nt(this,e),this.largestBatchId=t,this.mutation=n}return it(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),$k=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:_v.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:_v.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:hm.EMPTY_BYTE_STRING;nt(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return it(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Jk=it((function e(t){nt(this,e),this.ne=t}));function Yk(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Xk(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Qg(e,t.key),fields:t.data.value.mapValue.fields,updateTime:zg(e,t.version.toTimestamp())}}(e.ne,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Zk(t.version)};else{if(!t.isUnknownDocument())return iv();r.unknownDocument={path:n.path.toArray(),version:Zk(t.version)}}return r}function Xk(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Zk(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function eb(e){var t=new Iv(e.seconds,e.nanoseconds);return _v.fromTimestamp(t)}function tb(e,t){for(var n=(t.baseMutations||[]).map((function(t){return ik(e.ne,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return ik(e.ne,t)})),u=Iv.fromMillis(t.localWriteTimeMs);return new Wk(t.batchId,u,n,o)}function nb(e){var t,n,r=eb(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?eb(e.lastLimboFreeSnapshotVersion):_v.min();return void 0!==e.query.documents?(av(1===(n=e.query).documents.length),t=_y(ky(Yg(n.documents[0])))):t=function(e){return _y(uk(e))}(e.query),new $k(t,e.targetId,0,e.lastListenSequenceNumber,r,i,hm.fromBase64String(e.resumeToken))}function rb(e,t){var n,r=Zk(t.snapshotVersion),i=Zk(t.lastLimboFreeSnapshotVersion);n=Zm(t.target)?ak(e.ne,t.target):ok(e.ne,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ym(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function ib(e){var t=uk({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ey(t,t.limit,"L"):t}function ab(e,t){return new Qk(t.largestBatchId,ik(e.ne,t.overlayMutation))}function ob(e,t){var n=t.path.lastSegment();return[e,yk(t.path.popLast()),n]}function ub(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Zk(r.readTime),documentKey:yk(r.documentKey.path),largestBatchId:r.largestBatchId}}var sb=function(){function e(){nt(this,e)}return it(e,[{key:"getBundleMetadata",value:function(e,t){return cb(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:eb(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return cb(e).put({bundleId:(n=t).id,createTime:Zk(Gg(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return lb(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:ib(t.bundledQuery),readTime:eb(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return lb(e).put(function(e){return{name:e.name,readTime:Zk(Gg(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function cb(e){return Gk(e,"bundles")}function lb(e){return Gk(e,"namedQueries")}var fb=function(){function e(t,n){nt(this,e),this.wt=t,this.userId=n}return it(e,[{key:"getOverlay",value:function(e,t){var n=this;return hb(e).get(ob(this.userId,t)).next((function(e){return e?ab(n.wt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=xg();return qv.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Qk(t,a);i.push(r.ie(e,o))})),qv.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(yk(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(hb(e).W("collectionPathOverlayIndex",i))})),qv.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=xg(),a=yk(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return hb(e).K("collectionPathOverlayIndex",o).next((function(e){var t,n=at(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=ab(r.wt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=xg(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return hb(e).J({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=ab(a.wt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ie",value:function(e,t){return hb(e).put(function(e,t,n){var r=f(ob(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:rk(e.ne,n.mutation)}}(this.wt,this.userId,t))}}],[{key:"se",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function hb(e){return Gk(e,"documentOverlays")}var db=function(){function e(){nt(this,e)}return it(e,[{key:"re",value:function(e,t){this.oe(e,t),t.ue()}},{key:"oe",value:function(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(vm(e.integerValue));else if("doubleValue"in e){var n=vm(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),Im(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he("".concat(r.seconds||"")),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(mm(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?Bm(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):iv()}},{key:"le",value:function(e,t){this.ce(t,25),this.ge(e,t)}},{key:"ge",value:function(e,t){t.he(e)}},{key:"we",value:function(e,t){var n=e.fields||{};this.ce(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.le(a,t),this.oe(n[a],t)}}},{key:"me",value:function(e,t){var n=e.values||[];this.ce(t,50);var r,i=at(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.oe(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ce(t,37),Nv.fromName(e).path.forEach((function(e){n.ce(t,60),n.ge(e,t)}))}},{key:"ce",value:function(e,t){e.ae(t)}},{key:"fe",value:function(e){e.ae(2)}}]),e}();function pb(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function vb(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=pb(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}db.ye=new db;var mb=function(){function e(){nt(this,e),this.buffer=new Uint8Array(1024),this.position=0}return it(e,[{key:"pe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ie(n.value),n=t.next();this.Te()}},{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){var t,n=at(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{var a=r.codePointAt(0);this.Ie(240|a>>>18),this.Ie(128|63&a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Te()}},{key:"Pe",value:function(e){var t,n=at(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"ve",value:function(e){var t=this.Ve(e),n=vb(t);this.Se(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"De",value:function(e){var t=this.Ve(e),n=vb(t);this.Se(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ce",value:function(){this.xe(255),this.xe(255)}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Oe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ve",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ie",value:function(e){var t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}},{key:"Te",value:function(){this.xe(0),this.xe(1)}},{key:"Re",value:function(){this.ke(0),this.ke(1)}},{key:"xe",value:function(e){this.Se(1),this.buffer[this.position++]=e}},{key:"ke",value:function(e){this.Se(1),this.buffer[this.position++]=~e}},{key:"Se",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),yb=function(){function e(t){nt(this,e),this.Me=t}return it(e,[{key:"de",value:function(e){this.Me.pe(e)}},{key:"he",value:function(e){this.Me.be(e)}},{key:"ae",value:function(e){this.Me.ve(e)}},{key:"ue",value:function(){this.Me.Ce()}}]),e}(),gb=function(){function e(t){nt(this,e),this.Me=t}return it(e,[{key:"de",value:function(e){this.Me.Ee(e)}},{key:"he",value:function(e){this.Me.Pe(e)}},{key:"ae",value:function(e){this.Me.De(e)}},{key:"ue",value:function(){this.Me.Ne()}}]),e}(),kb=function(){function e(){nt(this,e),this.Me=new mb,this.Fe=new yb(this.Me),this.$e=new gb(this.Me)}return it(e,[{key:"seed",value:function(e){this.Me.seed(e)}},{key:"Be",value:function(e){return 0===e?this.Fe:this.$e}},{key:"Oe",value:function(){return this.Me.Oe()}},{key:"reset",value:function(){this.Me.reset()}}]),e}(),bb=function(){function e(t,n,r,i){nt(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return it(e,[{key:"Le",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function wb(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=xb(e.arrayValue,t.arrayValue))?n:0!==(n=xb(e.directionalValue,t.directionalValue))?n:Nv.comparator(e.documentKey,t.documentKey)}function xb(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Ib=function(){function e(t){nt(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];var n,r=at(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.ht()?this.Ke=i:this.qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return it(e,[{key:"Ge",value:function(e){var t=Dv(e);if(void 0!==t&&!this.Qe(t))return!1;for(var n=Pv(e),r=0,i=0;r<n.length&&this.Qe(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ke){var a=n[r];if(!this.je(this.Ke,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"Qe",value:function(e){var t,n=at(this.qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),_b=function(){function e(){nt(this,e),this.ze=new Eb}return it(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.ze.add(t),qv.resolve()}},{key:"getCollectionParents",value:function(e,t){return qv.resolve(this.ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return qv.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return qv.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return qv.resolve(null)}},{key:"getIndexType",value:function(e,t){return qv.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return qv.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return qv.resolve(null)}},{key:"getMinOffset",value:function(e,t){return qv.resolve(Fv.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return qv.resolve(Fv.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return qv.resolve()}},{key:"updateIndexEntries",value:function(e,t){return qv.resolve()}}]),e}(),Eb=function(){function e(){nt(this,e),this.index={}}return it(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new sm(Sv.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new sm(Sv.comparator)).toArray()}}]),e}(),Sb=new Uint8Array(0),Tb=function(){function e(t,n){nt(this,e),this.user=t,this.databaseId=n,this.He=new Eb,this.Je=new mg((function(e){return Ym(e)}),(function(e,t){return Xm(e,t)})),this.uid=t.uid||""}return it(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.He.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.He.add(t)}));var a={collectionId:r,parent:yk(i)};return Cb(e).put(a)}return qv.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[xv(t),""],!1,!0);return Cb(e).K(r).next((function(e){var r,i=at(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(bk(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Ab(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Db(e);return a.next((function(e){o.put(ub(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Ab(e),r=Db(e),i=Nb(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Nb(e),i=!0,a=new Map;return qv.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Tg(),o=[];return qv.forEach(a,(function(i,a){var u;ev("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Ym(t)));var s=function(e,t){var n=Dv(t);if(void 0===n)return null;var r,i=at(ey(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=at(Pv(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=at(ey(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=at(Pv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ty(e,o.fieldPath,e.startAt):ny(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new hy(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=at(Pv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ny(e,o.fieldPath,e.endAt):ty(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new hy(r,i)}(a,i),h=n.Ze(i,a,l),d=n.Ze(i,a,f),p=n.tn(i,a,c),v=n.en(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return qv.forEach(v,(function(n){return r.j(n,t.limit).next((function(t){t.forEach((function(t){var n=Nv.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return qv.resolve(null)}))}},{key:"Ye",value:function(e){var t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}},{key:"en",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.nn(t[s/c]):Sb,h=u.sn(e,f,n[s%c],r),d=u.rn(e,f,i[s%c],a),p=o.map((function(t){return u.sn(e,f,t,!0)}));l.push.apply(l,Wt(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"sn",value:function(e,t,n,r){var i=new bb(e,Nv.empty(),t,n);return r?i:i.Le()}},{key:"rn",value:function(e,t,n,r){var i=new bb(e,Nv.empty(),t,n);return r?i.Le():i}},{key:"Xe",value:function(e,t){var n=new Ib(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=at(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Ge(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return qv.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new sm(Cv.comparator),r=!1,i=at(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=at(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"on",value:function(e,t){var n,r=new kb,i=at(Pv(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Be(a.kind);db.ye.re(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Oe()}},{key:"nn",value:function(e){var t=new kb;return db.ye.re(e,t.Be(0)),t.Oe()}},{key:"un",value:function(e,t){var n=new kb;return db.ye.re(Om(this.databaseId,t),n.Be(function(e){var t=Pv(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Oe()}},{key:"tn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new kb);var i,a=0,o=at(Pv(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=at(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.cn(t,s.fieldPath)&&Mm(c))r=this.an(r,s,c);else{var h=f.Be(s.kind);db.ye.re(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.hn(r)}},{key:"Ze",value:function(e,t,n){return this.tn(e,t,n.position)}},{key:"hn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Oe();return t}},{key:"an",value:function(e,t,n){var r,i=Wt(e),a=[],o=at(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=at(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new kb;f.seed(l.Oe()),db.ye.re(s,f.Be(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"cn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof ry&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Ab(e),i=Db(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next((function(e){var t=[];return qv.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Ov(t.sequenceNumber,new Fv(eb(t.readTime),new Nv(bk(t.documentKey)),t.largestBatchId)):Ov.empty(),r=e.fields.map((function(e){var t=f(e,2),n=t[0],r=t[1];return new Rv(Cv.fromServerFormat(n),r)}));return new Av(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:bv(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Ab(e),a=Db(e);return this.ln(e).next((function(e){return i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return qv.forEach(t,(function(t){return a.put(ub(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return qv.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?qv.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),qv.forEach(a,(function(r){return n.fn(e,t,r).next((function(t){var a=n.dn(i,r);return t.isEqual(a)?qv.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"wn",value:function(e,t,n,r){return Nb(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(n,t.key),documentKey:t.key.path.toArray()})}},{key:"mn",value:function(e,t,n,r){return Nb(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=Nb(e),i=new sm(wb);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.un(n,t)])},(function(e,r){i=i.add(new bb(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"dn",value:function(e,t){var n=new sm(wb),r=this.on(t,e);if(null==r)return n;var i=Dv(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Mm(a)){var o,u=at(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new bb(t.indexId,e.key,this.nn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new bb(t.indexId,e.key,Sb,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;ev("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=lm(a),s=lm(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=lm(o)):l?(i(u),u=lm(a)):(u=lm(a),s=lm(o))}}(r,i,wb,(function(r){o.push(a.wn(e,t,n,r))}),(function(r){o.push(a.mn(e,t,n,r))})),qv.waitFor(o)}},{key:"ln",value:function(e){var t=1;return Db(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return wb(e,t)})).filter((function(e,t,n){return!t||0!==wb(e,n[t-1])}));var r=[];r.push(e);var i,a=at(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=wb(o,e),s=wb(o,t);if(0===u)r[0]=e.Le();else if(u>0&&s<0)r.push(o),r.push(o.Le());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Sb,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Sb,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Pb)}},{key:"getMinOffset",value:function(e,t){var n=this;return qv.mapArray(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){return e||iv()}))})).next(Pb)}}]),e}();function Cb(e){return Gk(e,"collectionParents")}function Nb(e){return Gk(e,"indexEntries")}function Ab(e){return Gk(e,"indexConfiguration")}function Db(e){return Gk(e,"indexState")}function Pb(e){av(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Vv(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Fv(t.readTime,t.documentKey,n)}var Rb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ob=function(){function e(t,n,r){nt(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return it(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Lb(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.J({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){av(1===u)})));var c,l=[],f=at(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Ik(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return qv.waitFor(a).next((function(){return l}))}function Mb(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw iv();t=e.noDocument}return JSON.stringify(t).length}Ob.DEFAULT_COLLECTION_PERCENTILE=10,Ob.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ob.DEFAULT=new Ob(41943040,Ob.DEFAULT_COLLECTION_PERCENTILE,Ob.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ob.DISABLED=new Ob(-1,0,0);var Fb=function(){function e(t,n,r,i){nt(this,e),this.userId=t,this.wt=n,this.indexManager=r,this.referenceDelegate=i,this.gn={}}return it(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ub(e).J({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=jb(e),o=Ub(e);return o.add({}).next((function(u){av("number"==typeof u);var s,c=new Wk(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return rk(e.ne,t)})),i=n.mutations.map((function(t){return rk(e.ne,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.wt,i.userId,c),f=[],h=new sm((function(e,t){return bv(e.canonicalString(),t.canonicalString())})),d=at(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Ik(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,_k))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.gn[u]=c.keys()})),qv.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Ub(e).get(t).next((function(e){return e?(av(e.userId===n.userId),tb(n.wt,e)):null}))}},{key:"yn",value:function(e,t){var n=this;return this.gn[t]?qv.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.gn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Ub(e).J({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(av(t.batchId>=r),a=tb(n.wt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ub(e).J({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ub(e).K("userMutationsIndex",n).next((function(e){return e.map((function(e){return tb(t.wt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=xk(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return jb(e).J({range:i},(function(r,i,o){var u=f(r,3),s=u[0],c=u[1],l=u[2],h=bk(c);if(s===n.userId&&t.path.isEqual(h))return Ub(e).get(l).next((function(e){if(!e)throw iv();av(e.userId===n.userId),a.push(tb(n.wt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new sm(bv),i=[];return t.forEach((function(t){var a=xk(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=jb(e).J({range:o},(function(e,i,a){var o=f(e,3),u=o[0],s=o[1],c=o[2],l=bk(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),qv.waitFor(i).next((function(){return n.pn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=xk(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new sm(bv);return jb(e).J({range:o},(function(e,t,a){var o=f(e,3),s=o[0],c=o[1],l=o[2],h=bk(c);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.pn(e,u)}))}},{key:"pn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Ub(e).get(t).next((function(e){if(null===e)throw iv();av(e.userId===n.userId),r.push(tb(n.wt,e))})))})),qv.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Lb(e.ee,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.In(t.batchId)})),qv.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"In",value:function(e){delete this.gn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return qv.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return jb(e).J({range:r},(function(e,n,r){if(e[0]===t.userId){var a=bk(e[1]);i.push(a)}else r.done()})).next((function(){av(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Vb(e,this.userId,t)}},{key:"Tn",value:function(e){var t=this;return Bb(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"se",value:function(t,n,r,i){return av(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Vb(e,t,n){var r=xk(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return jb(e).J({range:a,H:!0},(function(e,n,r){var a=f(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Ub(e){return Gk(e,"mutations")}function jb(e){return Gk(e,"documentMutations")}function Bb(e){return Gk(e,"mutationQueues")}var zb=function(){function e(t){nt(this,e),this.En=t}return it(e,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new e(0)}},{key:"Rn",value:function(){return new e(-1)}}]),e}(),qb=function(){function e(t,n){nt(this,e),this.referenceDelegate=t,this.wt=n}return it(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.bn(e).next((function(n){var r=new zb(n.highestTargetId);return n.highestTargetId=r.next(),t.Pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.bn(e).next((function(e){return _v.fromTimestamp(new Iv(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.bn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.bn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.vn(e,t).next((function(){return n.bn(e).next((function(r){return r.targetCount+=1,n.Vn(t,r),n.Pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.vn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Kb(e).delete(t.targetId)})).next((function(){return n.bn(e)})).next((function(t){return av(t.targetCount>0),t.targetCount-=1,n.Pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Kb(e).J((function(o,u){var s=nb(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return qv.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Kb(e).J((function(e,n){var r=nb(n);t(r)}))}},{key:"bn",value:function(e){return Gb(e).get("targetGlobalKey").next((function(e){return av(null!==e),e}))}},{key:"Pn",value:function(e,t){return Gb(e).put("targetGlobalKey",t)}},{key:"vn",value:function(e,t){return Kb(e).put(rb(this.wt,t))}},{key:"Vn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.bn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Ym(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Kb(e).J({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=nb(n);Xm(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Wb(e);return t.forEach((function(t){var o=yk(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),qv.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Wb(e);return qv.forEach(t,(function(t){var a=yk(t.path);return qv.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Wb(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Wb(e),i=Tg();return r.J({range:n,H:!0},(function(e,t,n){var r=bk(e[1]),a=new Nv(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=yk(t.path),r=IDBKeyRange.bound([n],[xv(n)],!1,!0),i=0;return Wb(e).J({index:"documentTargetsIndex",H:!0,range:r},(function(e,t,n){var r=f(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"te",value:function(e,t){return Kb(e).get(t).next((function(e){return e?nb(e):null}))}}]),e}();function Kb(e){return Gk(e,"targets")}function Gb(e){return Gk(e,"targetGlobal")}function Wb(e){return Gk(e,"targetDocuments")}function Hb(e,t){var n=f(e,2),r=n[0],i=n[1],a=f(t,2),o=a[0],u=a[1],s=bv(r,o);return 0===s?bv(i,u):s}var Qb=function(){function e(t){nt(this,e),this.Sn=t,this.buffer=new sm(Hb),this.Dn=0}return it(e,[{key:"Cn",value:function(){return++this.Dn}},{key:"xn",value:function(e){var t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Hb(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),$b=function(){function e(t,n,r){nt(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Nn=null}return it(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}},{key:"stop",value:function(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}},{key:"started",get:function(){return null!==this.Nn}},{key:"kn",value:function(e){var t=this;ev("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Nn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Qv(e.t0)){e.next=12;break}ev("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Bv(e.t0);case 14:return e.next=16,t.kn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Jb=function(){function e(t,n){nt(this,e),this.On=t,this.params=n}return it(e,[{key:"calculateTargetCount",value:function(e,t){return this.On.Mn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return qv.resolve(tm.ot);var r=new Qb(t);return this.On.forEachTarget(e,(function(e){return r.xn(e.sequenceNumber)})).next((function(){return n.On.Fn(e,(function(e){return r.xn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.On.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.On.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(ev("LruGarbageCollector","Garbage collection skipped; disabled"),qv.resolve(Rb)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(ev("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Rb):n.$n(e,t)}))}},{key:"getCacheSize",value:function(e){return this.On.getCacheSize(e)}},{key:"$n",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(ev("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Zp()<=Zt.DEBUG&&ev("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),qv.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Yb=function(){function e(t,n){nt(this,e),this.db=t,this.garbageCollector=function(e,t){return new Jb(e,t)}(this,n)}return it(e,[{key:"Mn",value:function(e){var t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Bn",value:function(e){var t=0;return this.Fn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Fn",value:function(e,t){return this.Ln(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Xb(e,n)}},{key:"removeReference",value:function(e,t,n){return Xb(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Xb(e,t)}},{key:"Un",value:function(e,t){return function(e,t){var n=!1;return Bb(e).Y((function(r){return Vb(e,r,t).next((function(e){return e&&(n=!0),qv.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ln(e,(function(o,u){if(u<=t){var s=n.Un(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,_v.min()),Wb(e).delete([0,yk(o.path)])}))}));i.push(s)}})).next((function(){return qv.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Xb(e,t)}},{key:"Ln",value:function(e,t){var n,r=Wb(e),i=tm.ot;return r.J({index:"documentTargetsIndex"},(function(e,r){var a=f(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==tm.ot&&t(new Nv(bk(n)),i),i=s,n=u):i=tm.ot})).next((function(){i!==tm.ot&&t(new Nv(bk(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Xb(e,t){return Wb(e).put(function(e,t){return{targetId:0,path:yk(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Zb=function(){function e(){nt(this,e),this.changes=new mg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return it(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Qm.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?qv.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),ew=function(){function e(t){nt(this,e),this.wt=t}return it(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return iw(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return iw(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Xk(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Qm.newInvalidDocument(t);return iw(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(aw(t))},(function(e,i){r=n.Kn(t,i)})).next((function(){return r}))}},{key:"Gn",value:function(e,t){var n=this,r={size:0,document:Qm.newInvalidDocument(t)};return iw(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(aw(t))},(function(e,i){r={document:n.Kn(t,i),size:Mb(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=gg();return this.Qn(e,t,(function(e,t){var i=n.Kn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"jn",value:function(e,t){var n=this,r=gg(),i=new am(Nv.comparator);return this.Qn(e,t,(function(e,t){var a=n.Kn(e,t);r=r.insert(e,a),i=i.insert(e,Mb(t))})).next((function(){return{documents:r,Wn:i}}))}},{key:"Qn",value:function(e,t,n){if(t.isEmpty())return qv.resolve();var r=new sm(uw);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(aw(r.first()),aw(r.last())),a=r.getIterator(),o=a.getNext();return iw(e).J({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Nv.fromSegments([].concat(Wt(t.prefixPath),[t.collectionGroup,t.documentId]));o&&uw(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.q(aw(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Xk(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return iw(e).K(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=gg(),i=at(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Kn(Nv.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=gg(),o=ow(t,n),u=ow(t,Fv.max());return iw(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Kn(Nv.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new nw(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return rw(e).get("remoteDocumentGlobalKey").next((function(e){return av(!!e),e}))}},{key:"qn",value:function(e,t){return rw(e).put("remoteDocumentGlobalKey",t)}},{key:"Kn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=tk(e.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Nv.fromSegments(t.noDocument.path),i=eb(t.noDocument.readTime);n=Qm.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return iv();var a=Nv.fromSegments(t.unknownDocument.path),o=eb(t.unknownDocument.version);n=Qm.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Iv(e[0],e[1]);return _v.fromTimestamp(t)}(t.readTime)),n}(this.wt,t);if(!n.isNoDocument()||!n.version.isEqual(_v.min()))return n}return Qm.newInvalidDocument(e)}}]),e}();function tw(e){return new ew(e)}var nw=function(e){st(n,e);var t=dt(n);function n(e,r){var i;return nt(this,n),(i=t.call(this)).zn=e,i.trackRemovals=r,i.Hn=new mg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return it(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new sm((function(e,t){return bv(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Hn.get(a);if(n.push(t.zn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Yk(t.zn.wt,o);i=i.add(a.path.popLast());var c=Mb(s);r+=c-u.size,n.push(t.zn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Yk(t.zn.wt,o.convertToNoDocument(_v.min()));n.push(t.zn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.zn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.zn.updateMetadata(e,r)),qv.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.zn.Gn(e,t).next((function(e){return n.Hn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.zn.jn(e,t).next((function(e){var t=e.documents;return e.Wn.forEach((function(e,r){n.Hn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Zb);function rw(e){return Gk(e,"remoteDocumentGlobal")}function iw(e){return Gk(e,"remoteDocumentsV14")}function aw(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function ow(e,t){var n=t.documentKey.path.toArray();return[e,Xk(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function uw(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=bv(n[a],r[a]))return i;return(i=bv(n.length,r.length))||((i=bv(n[n.length-2],r[r.length-2]))||bv(n[n.length-1],r[r.length-1]))}var sw=it((function e(t,n){nt(this,e),this.overlayedDocument=t,this.mutatedFields=n})),cw=function(){function e(t,n,r,i){nt(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return it(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&tg(r.mutation,e,fm.empty(),Iv.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Tg()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tg(),i=xg();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=bg();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=xg();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Tg())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=gg(),a=_g(),o=_g();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof ag)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),tg(o.mutation,t,o.mutation.getFieldMask(),Iv.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new sw(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=_g(),i=new am((function(e,t){return e-t})),a=Tg();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=at(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||fm.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Tg()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Ig();c.forEach((function(e){if(!a.has(e)){var n=Zy(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return qv.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Nv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):qv.resolve(xg()),u=-1,s=a;return o.next((function(t){return qv.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?qv.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Tg())})).next((function(e){return{batchId:u,changes:wg(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Nv(t)).next((function(e){var t=bg();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=bg();return this.indexManager.getCollectionParents(e,i).next((function(o){return qv.forEach(o,(function(o){var u=function(e,t){return new yy(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,Qm.newInvalidDocument(n)))}));var n=bg();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&tg(a.mutation,i,fm.empty(),Iv.now()),Ny(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):qv.resolve(Qm.newInvalidDocument(t))}}]),e}(),lw=function(){function e(t){nt(this,e),this.wt=t,this.Jn=new Map,this.Yn=new Map}return it(e,[{key:"getBundleMetadata",value:function(e,t){return qv.resolve(this.Jn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:Gg(n.createTime)}),qv.resolve()}},{key:"getNamedQuery",value:function(e,t){return qv.resolve(this.Yn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:ib(e.bundledQuery),readTime:Gg(e.readTime)}}(t)),qv.resolve()}}]),e}(),fw=function(){function e(){nt(this,e),this.overlays=new am(Nv.comparator),this.Xn=new Map}return it(e,[{key:"getOverlay",value:function(e,t){return qv.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=xg();return qv.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ie(e,t,i)})),qv.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Xn.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Xn.delete(n)),qv.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=xg(),i=t.length+1,a=new Nv(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return qv.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new am((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=xg(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=xg(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return qv.resolve(s)}},{key:"ie",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Qk(t,n));var a=this.Xn.get(t);void 0===a&&(a=Tg(),this.Xn.set(t,a)),this.Xn.set(t,a.add(n.key))}}]),e}(),hw=function(){function e(){nt(this,e),this.Zn=new sm(dw.ts),this.es=new sm(dw.ns)}return it(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new dw(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new dw(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new Nv(new Sv([])),r=new dw(n,e),i=new dw(n,e+1),a=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),a.push(e.key)})),a}},{key:"cs",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new Nv(new Sv([])),n=new dw(t,e),r=new dw(t,e+1),i=Tg();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new dw(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),dw=function(){function e(t,n){nt(this,e),this.key=t,this.ls=n}return it(e,null,[{key:"ts",value:function(e,t){return Nv.comparator(e.key,t.key)||bv(e.ls,t.ls)}},{key:"ns",value:function(e,t){return bv(e.ls,t.ls)||Nv.comparator(e.key,t.key)}}]),e}(),pw=function(){function e(t,n){nt(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new sm(dw.ts)}return it(e,[{key:"checkEmpty",value:function(e){return qv.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Wk(i,t,n,r);this.mutationQueue.push(a);var o,u=at(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ds=this.ds.add(new dw(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return qv.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return qv.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return qv.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return qv.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return qv.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new dw(t,0),i=new dw(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],(function(e){var t=n._s(e.ls);a.push(t)})),qv.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new sm(bv);return t.forEach((function(e){var t=new dw(e,0),i=new dw(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),qv.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Nv.isDocumentKey(i)||(i=i.child(""));var a=new dw(new Nv(i),0),o=new sm(bv);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),a),qv.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;av(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return qv.forEach(t.mutations,(function(i){var a=new dw(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new dw(t,0),r=this.ds.firstAfterOrEqual(n);return qv.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,qv.resolve()}},{key:"ys",value:function(e,t){return this.ws(e)}},{key:"ws",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"_s",value:function(e){var t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),vw=function(){function e(t){nt(this,e),this.ps=t,this.docs=new am(Nv.comparator),this.size=0}return it(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return qv.resolve(n?n.document.mutableCopy():Qm.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=gg();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Qm.newInvalidDocument(e))})),qv.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=gg(),i=new Nv(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Vv(Mv(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return qv.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){iv()}},{key:"Is",value:function(e,t){return qv.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new mw(this)}},{key:"getSize",value:function(e){return qv.resolve(this.size)}}]),e}(),mw=function(e){st(n,e);var t=dt(n);function n(e){var r;return nt(this,n),(r=t.call(this)).zn=e,r}return it(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.zn.addEntry(e,i)):t.zn.removeEntry(r)})),qv.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.zn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.zn.getEntries(e,t)}}]),n}(Zb),yw=function(){function e(t){nt(this,e),this.persistence=t,this.Ts=new mg((function(e){return Ym(e)}),Xm),this.lastRemoteSnapshotVersion=_v.min(),this.highestTargetId=0,this.Es=0,this.As=new hw,this.targetCount=0,this.Rs=zb.An()}return it(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),qv.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return qv.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return qv.resolve(this.Es)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),qv.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),qv.resolve()}},{key:"vn",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new zb(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.vn(t),this.targetCount+=1,qv.resolve()}},{key:"updateTargetData",value:function(e,t){return this.vn(t),qv.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,qv.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Ts.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Ts.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),qv.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return qv.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return qv.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),qv.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),qv.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.us(t),qv.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return qv.resolve(n)}},{key:"containsKey",value:function(e,t){return qv.resolve(this.As.containsKey(t))}}]),e}(),gw=function(){function e(t,n){var r=this;nt(this,e),this.bs={},this.overlays={},this.Ps=new tm(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new yw(this),this.indexManager=new _b,this.remoteDocumentCache=new vw((function(e){return r.referenceDelegate.Ss(e)})),this.wt=new Jk(n),this.Ds=new lw(this.wt)}return it(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new fw,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.bs[e.toKey()];return n||(n=new pw(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;ev("MemoryPersistence","Starting transaction:",e);var i=new kw(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((function(e){return r.referenceDelegate.xs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ns",value:function(e,t){return qv.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),kw=function(e){st(n,e);var t=dt(n);function n(e){var r;return nt(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return it(n)}(jv),bw=function(){function e(t){nt(this,e),this.persistence=t,this.ks=new hw,this.Os=null}return it(e,[{key:"Fs",get:function(){if(this.Os)return this.Os;throw iv()}},{key:"addReference",value:function(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),qv.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),qv.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Fs.add(t.toString()),qv.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ks.us(t.targetId).forEach((function(e){return n.Fs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Fs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Cs",value:function(){this.Os=new Set}},{key:"xs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qv.forEach(this.Fs,(function(r){var i=Nv.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i,_v.min())}))})).next((function(){return t.Os=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.Fs.delete(t.toString()):n.Fs.add(t.toString())}))}},{key:"Ss",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return qv.or([function(){return qv.resolve(n.ks.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ns(e,t)}])}}],[{key:"Ms",value:function(t){return new e(t)}}]),e}(),ww=function(){function e(t){nt(this,e),this.wt=t}return it(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new Kv("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wk,{unique:!0}),e.createObjectStore("documentMutations")}(e),xw(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=qv.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),xw(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_v.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").K().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wk,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return qv.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Bs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ls(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Us(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ks(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Mk});t.createIndex("collectionPathOverlayIndex",Fk,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Vk,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Ek});t.createIndex("documentKeyIndex",Sk),t.createIndex("collectionGroupIndex",Tk)}(e)})).next((function(){return i.Gs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.Qs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Pk}).createIndex("sequenceNumberIndex",Rk,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Ok}).createIndex("documentKeyIndex",Lk,{unique:!1})}(e)}))),o}},{key:"Ls",value:function(e){var t=0;return e.store("remoteDocuments").J((function(e,n){t+=Mb(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Bs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.K().next((function(n){return qv.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",i).next((function(r){return qv.forEach(r,(function(r){av(r.userId===n.userId);var i=tb(t.wt,r);return Lb(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Us",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.J((function(n,i){var a=new Sv(n),o=function(e){return[0,yk(e)]}(a);r.push(t.get(o).next((function(n){return n?qv.resolve():function(n){return t.put({targetId:0,path:yk(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return qv.waitFor(r)}))}))}},{key:"qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Dk});var n=t.store("collectionParents"),r=new Eb,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:yk(i)})}};return t.store("remoteDocuments").J({H:!0},(function(e,t){var n=new Sv(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").J({H:!0},(function(e,t){var n=f(e,3),r=(n[0],n[1]),a=(n[2],bk(r));return i(a.popLast())}))}))}},{key:"Ks",value:function(e){var t=this,n=e.store("targets");return n.J((function(e,r){var i=nb(r),a=rb(t.wt,i);return n.put(a)}))}},{key:"Gs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.J((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Nv(Sv.fromString(i.document.name).popFirst(5)):i.noDocument?Nv.fromSegments(i.noDocument.path):i.unknownDocument?Nv.fromSegments(i.unknownDocument.path):iv()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return qv.waitFor(r)}))}},{key:"Qs",value:function(e,t){var n=this,r=t.store("mutations"),i=tw(this.wt),a=new gw(bw.Ms,this.wt.ne);return r.K().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Tg();tb(n.wt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),qv.forEach(r,(function(e,r){var o=new Jp(r),u=fb.se(n.wt,o),s=a.getIndexManager(o),c=Fb.se(o,n.wt,s,a.referenceDelegate);return new cw(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Kk(t,tm.ot),e).next()}))}))}}]),e}();function xw(e){e.createObjectStore("targetDocuments",{keyPath:Nk}).createIndex("documentTargetsIndex",Ak,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ck,{unique:!0}),e.createObjectStore("targetGlobal")}var Iw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",_w=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:14;if(nt(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.js=a,this.window=o,this.document=u,this.Ws=c,this.zs=l,this.Hs=f,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=function(e){return Promise.resolve()},!e.V())throw new sv(uv.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Yb(this,i),this.ei=n+"main",this.wt=new Jk(s),this.ni=new Gv(this.ei,this.Hs,new ww(this.wt)),this.Vs=new qb(this.referenceDelegate,this.wt),this.remoteDocumentCache=tw(this.wt),this.Ds=new sb,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===l&&tv("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return it(e,[{key:"start",value:function(){var e=this;return this.ii().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new sv(uv.FAILED_PRECONDITION,Iw);return e.ri(),e.oi(),e.ui(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Vs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ps=new tm(t,e.Ws)})).then((function(){e.vs=!0})).catch((function(t){return e.ni&&e.ni.close(),Promise.reject(t)}))}},{key:"ci",value:function(e){var t=this;return this.ti=function(){var n=Qt(Kt().mark((function n(r){return Kt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ni.F(function(){var t=Qt(Kt().mark((function t(n){return Kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ii();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ii",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Sw(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.ai(t).next((function(t){t||(e.isPrimary=!1,e.js.enqueueRetryable((function(){return e.ti(!1)})))}))})).next((function(){return e.hi(t)})).next((function(n){return e.isPrimary&&!n?e.li(t).next((function(){return!1})):!!n&&e.fi(t).next((function(){return!0}))}))})).catch((function(t){if(Qv(t))return ev("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return ev("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.js.enqueueRetryable((function(){return e.ti(t)})),e.isPrimary=t}))}},{key:"ai",value:function(e){var t=this;return Ew(e).get("owner").next((function(e){return qv.resolve(t.di(e))}))}},{key:"_i",value:function(e){return Sw(e).delete(this.clientId)}},{key:"wi",value:function(){var e=Qt(Kt().mark((function e(){var t,n,r,i,a=this;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.mi(this.Zs,18e5)){e.next=6;break}return this.Zs=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Gk(e,"clientMetadata");return t.K().next((function(e){var n=a.gi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return qv.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.si){n=at(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.si.removeItem(this.yi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ui",value:function(){var e=this;this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ii().then((function(){return e.wi()})).then((function(){return e.ui()}))}))}},{key:"di",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"hi",value:function(e){var t=this;return this.zs?qv.resolve(!0):Ew(e).get("owner").next((function(n){if(null!==n&&t.mi(n.leaseTimestampMs,5e3)&&!t.pi(n.ownerId)){if(t.di(n)&&t.networkEnabled)return!0;if(!t.di(n)){if(!n.allowTabSynchronization)throw new sv(uv.FAILED_PRECONDITION,Iw);return!1}}return!(!t.networkEnabled||!t.inForeground)||Sw(e).K().next((function(e){return void 0===t.gi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&ev("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Qt(Kt().mark((function e(){var t=this;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),e.next=7,this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Kk(e,tm.ot);return t.li(n).next((function(){return t._i(n)}))}));case 7:this.ni.close(),this.Ai();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"gi",value:function(e,t){var n=this;return e.filter((function(e){return n.mi(e.updateTimeMs,t)&&!n.pi(e.clientId)}))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Sw(t).K().next((function(t){return e.gi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.vs}},{key:"getMutationQueue",value:function(e,t){return Fb.se(e,this.wt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Tb(e,this.wt.ne.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return fb.se(this.wt,e)}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;ev("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Hs)?qk:14===i?zk:13===i?Bk:12===i?jk:11===i?Uk:void iv();return this.ni.runTransaction(e,o,u,(function(i){return a=new Kk(i,r.Ps?r.Ps.next():tm.ot),"readwrite-primary"===t?r.ai(a).next((function(e){return!!e||r.hi(a)})).next((function(t){if(!t)throw tv("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.js.enqueueRetryable((function(){return r.ti(!1)})),new sv(uv.FAILED_PRECONDITION,Uv);return n(a)})).next((function(e){return r.fi(a).next((function(){return e}))})):r.bi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"bi",value:function(e){var t=this;return Ew(e).get("owner").next((function(e){if(null!==e&&t.mi(e.leaseTimestampMs,5e3)&&!t.pi(e.ownerId)&&!t.di(e)&&!(t.zs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new sv(uv.FAILED_PRECONDITION,Iw)}))}},{key:"fi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ew(e).put("owner",t)}},{key:"li",value:function(e){var t=this,n=Ew(e);return n.get("owner").next((function(e){return t.di(e)?(ev("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):qv.resolve()}))}},{key:"mi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(tv("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ri",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=function(){e.js.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ii()}))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ti",value:function(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}},{key:"oi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=function(){t.Ii(),!Et()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.js.enterRestrictedMode(!0),t.js.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Js))}},{key:"Ei",value:function(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}},{key:"pi",value:function(e){var t;try{var n=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return ev("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return tv("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ii",value:function(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch($l){tv("Failed to set zombie client id.",$l)}}},{key:"Ai",value:function(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch($l){}}},{key:"yi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"V",value:function(){return Gv.V()}}]),e}();function Ew(e){return Gk(e,"owner")}function Sw(e){return Gk(e,"clientMetadata")}function Tw(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Cw=function(){function e(t,n,r,i){nt(this,e),this.targetId=t,this.fromCache=n,this.Pi=r,this.vi=i}return it(e,null,[{key:"Vi",value:function(t,n){var r,i=Tg(),a=Tg(),o=at(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Nw=function(){function e(){nt(this,e),this.Si=!1}return it(e,[{key:"initialize",value:function(e,t){this.Di=e,this.indexManager=t,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ci(e,t).next((function(a){return a||i.xi(e,t,r,n)})).next((function(n){return n||i.Ni(e,t)}))}},{key:"Ci",value:function(e,t){return qv.resolve(null)}},{key:"xi",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(_v.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((function(a){var o=i.ki(t,a);return i.Oi(t,o,n,r)?i.Ni(e,t):(Zp()<=Zt.DEBUG&&ev("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Cy(t)),i.Mi(e,o,t,Lv(r,-1)))}))}},{key:"ki",value:function(e,t){var n=new sm(Dy(e));return t.forEach((function(t,r){Ny(e,r)&&(n=n.add(r))})),n}},{key:"Oi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ni",value:function(e,t){return Zp()<=Zt.DEBUG&&ev("QueryEngine","Using full collection scan to execute query:",Cy(t)),this.Di.getDocumentsMatchingQuery(e,t,Fv.min())}},{key:"Mi",value:function(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Aw=function(){function e(t,n,r,i){nt(this,e),this.persistence=t,this.Fi=n,this.wt=i,this.$i=new am(bv),this.Bi=new mg((function(e){return Ym(e)}),Xm),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}return it(e,[{key:"qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cw(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.$i)}))}}]),e}();function Dw(e,t,n,r){return new Aw(e,t,n,r)}function Pw(e,t){return Rw.apply(this,arguments)}function Rw(){return Rw=Qt(Kt().mark((function e(t,n){var r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ov(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Tg(),s=at(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=at(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=at(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=at(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Ki:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Rw.apply(this,arguments)}function Ow(e,t){var n=ov(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=qv.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);av(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Tg(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Lw(e){var t=ov(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Vs.getLastRemoteSnapshotVersion(e)}))}function Mw(e,t){var n=ov(e),r=t.snapshotVersion,i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Vs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Vs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(hm.EMPTY_BYTE_STRING,_v.min()).withLastLimboFreeSnapshotVersion(_v.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Vs.updateTargetData(e,c))}}));var u=gg(),s=Tg();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Fw(e,a,t.documentUpdates).next((function(e){u=e.Gi,s=e.Qi}))),!r.isEqual(_v.min())){var c=n.Vs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return qv.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.$i=i,e}))}function Fw(e,t,n){var r=Tg(),i=Tg();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=gg();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(_v.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):ev("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Gi:r,Qi:i}}))}function Vw(e,t){var n=ov(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Uw(e,t){var n=ov(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Vs.getTargetData(e,t).next((function(i){return i?(r=i,qv.resolve(r)):n.Vs.allocateTargetId(e).next((function(i){return r=new $k(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}function jw(e,t,n){return Bw.apply(this,arguments)}function Bw(){return Bw=Qt(Kt().mark((function e(t,n,r){var i,a,o;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ov(t),a=i.$i.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Qv(e.t1)){e.next=12;break}throw e.t1;case 12:ev("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.$i=i.$i.remove(n),i.Bi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Bw.apply(this,arguments)}function zw(e,t,n){var r=ov(e),i=_v.min(),a=Tg();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=ov(e),i=r.Bi.get(n);return void 0!==i?qv.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,_y(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(e,t,n?i:_v.min(),n?a:Tg())})).next((function(e){return Gw(r,Ay(t),e),{documents:e,ji:a}}))}))}function qw(e,t){var n=ov(e),r=ov(n.Vs),i=n.$i.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.te(e,t).next((function(e){return e?e.target:null}))}))}function Kw(e,t){var n=ov(e),r=n.Li.get(t)||_v.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ui.getAllFromCollectionGroup(e,t,Lv(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Gw(n,t,e),e}))}function Gw(e,t,n){var r=_v.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}function Ww(e,t,n,r){return Hw.apply(this,arguments)}function Hw(){return Hw=Qt(Kt().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=ov(t),o=Tg(),u=gg(),s=at(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Wi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.zi(l)).setReadTime(n.Hi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Ui.newChangeBuffer({trackRemovals:!0}),e.next=7,Uw(a,function(e){return _y(ky(Sv.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Fw(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Vs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Vs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Gi,t.Qi)})).next((function(){return t.Gi}))}))})));case 9:case"end":return e.stop()}}),e)}))),Hw.apply(this,arguments)}function Qw(e,t){return $w.apply(this,arguments)}function $w(){return $w=Qt(Kt().mark((function e(t,n){var r,i,a,o=arguments;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Tg(),e.next=3,Uw(t,_y(ib(n.bundledQuery)));case 3:return i=e.sent,a=ov(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Gg(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ds.saveNamedQuery(e,n);var o=i.withResumeToken(hm.EMPTY_BYTE_STRING,t);return a.$i=a.$i.insert(o.targetId,o),a.Vs.updateTargetData(e,o).next((function(){return a.Vs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Vs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),$w.apply(this,arguments)}function Jw(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Yw(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Xw(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Zw=function(){function e(t,n,r,i){nt(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return it(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new sv(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(tv("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),ex=function(){function e(t,n,r){nt(this,e),this.targetId=t,this.state=n,this.error=r}return it(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new sv(i.error.code,i.error.message))),a?new e(t,i.state,r):(tv("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),tx=function(){function e(t,n){nt(this,e),this.clientId=t,this.activeTargetIds=n}return it(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Ng(),o=0;i&&o<r.activeTargetIds.length;++o)i=_m(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(tv("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),nx=function(){function e(t,n){nt(this,e),this.clientId=t,this.onlineState=n}return it(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(tv("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),rx=function(){function e(){nt(this,e),this.activeTargetIds=Ng()}return it(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),ix=function(){function e(t,n,r,i,a){nt(this,e),this.window=t,this.js=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new am(bv),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=Jw(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new rx),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.ar=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return it(e,[{key:"start",value:function(){var e=Qt(Kt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ri();case 2:t=e.sent,n=at(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Jw(this.persistenceKey,i)))&&(o=tx.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(u=this.storage.getItem(this.lr))&&(s=this.wr(u))&&this.mr(s),c=at(this.ir);try{for(c.s();!(l=c.n()).done;)f=l.value,this.nr(f)}catch(d){c.e(d)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Xw(this.persistenceKey,e));if(n){var r=ex.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Xw(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return ev("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){ev("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){ev("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(ev("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void tv("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(Qt(Kt().mark((function e(){var r,i,a,o,u,s,c;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.ar.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}s=function(e){var t=tm.ot;if(null!=e)try{var n=JSON.parse(e);av("number"==typeof n),t=n}catch(e){tv("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==tm.ot&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new Zw(this.currentUser,e,t,n),i=Yw(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=Yw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=Xw(this.persistenceKey,e),i=new ex(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return tx.Ji(n,t)}},{key:"vr",value:function(e,t){var n=this.ar.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Zw.Ji(new Jp(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return ex.Ji(r,t)}},{key:"wr",value:function(e){return nx.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"Vr",value:function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:ev("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Mr(o,u).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=Ng();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"V",value:function(e){return!(!e||!e.localStorage)}}]),e}(),ax=function(){function e(){nt(this,e),this.Fr=new rx,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return it(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new rx,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),ox=function(){function e(){nt(this,e)}return it(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),ux=function(){function e(){var t=this;nt(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Kr()},this.Gr=[],this.Qr()}return it(e,[{key:"Br",value:function(e){this.Gr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){ev("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=at(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Kr",value:function(){ev("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=at(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),sx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},cx=function(){function e(t){nt(this,e),this.jr=t.jr,this.Wr=t.Wr}return it(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),lx=function(e){st(n,e);var t=dt(n);function n(e){var r;return nt(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return it(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Qp;o.listenOnce(qp.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case zp.NO_ERROR:var t=o.getResponseJson();ev("Connection","XHR received:",JSON.stringify(t)),i(t);break;case zp.TIMEOUT:ev("Connection",'RPC "'+e+'" timed out'),a(new sv(uv.DEADLINE_EXCEEDED,"Request time out"));break;case zp.HTTP_ERROR:var n=o.getStatus();if(ev("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(uv).indexOf(t)>=0?t:uv.UNKNOWN}(r.status);a(new sv(u,r.message))}else a(new sv(uv.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new sv(uv.UNAVAILABLE,"Connection failed."));break;default:iv()}}finally{ev("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=jp(),a=Bp(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Wp({})),this.uo(o.initMessageHeaders,t,n),_t()||Tt()||It().indexOf("Electron/")>=0||Ct()||It().indexOf("MSAppHost/")>=0||St()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");ev("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new cx({jr:function(e){l?ev("Connection","Not sending because WebChannel is closed:",e):(c||(ev("Connection","Opening WebChannel transport."),s.open(),c=!0),ev("Connection","WebChannel sending:",e),s.send(e))},Wr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Hp.EventType.OPEN,(function(){l||ev("Connection","WebChannel transport opened.")})),h(s,Hp.EventType.CLOSE,(function(){l||(l=!0,ev("Connection","WebChannel transport closed"),f.eo())})),h(s,Hp.EventType.ERROR,(function(e){l||(l=!0,nv("Connection","WebChannel transport errored:",e),f.eo(new sv(uv.UNAVAILABLE,"The operation could not be completed")))})),h(s,Hp.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];av(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){ev("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=cg[e];if(void 0!==t)return vg(t)}(a),u=i.message;void 0===o&&(o=uv.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.eo(new sv(o,u)),s.close()}else ev("Connection","WebChannel received:",n),f.no(n)}})),h(a,Kp.STAT_EVENT,(function(e){e.stat===Gp.PROXY?ev("Connection","Detected buffering proxy"):e.stat===Gp.NOPROXY&&ev("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Zr()}),0),f}}]),n}(function(){function e(t){nt(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return it(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);ev("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.co(e,a,o,n).then((function(e){return ev("RestConnection","Received: ",e),e}),(function(t){throw nv("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ao",value:function(e,t,n,r,i,a){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Yp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=sx[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function fx(){return"undefined"!=typeof window?window:null}function hx(){return"undefined"!=typeof document?document:null}function dx(e){return new Bg(e,!0)}var px=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;nt(this,e),this.js=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return it(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&ev("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),vx=function(){function e(t,n,r,i,a,o,u,s){nt(this,e),this.js=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new px(t,n)}return it(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Oo()})))}},{key:"Mo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Oo",value:function(){var e=Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===uv.RESOURCE_EXHAUSTED?(tv(n.toString()),tv("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===uv.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=f(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new sv(uv.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.Vo=n.js.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(Qt(Kt().mark((function t(){return Kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return ev("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.js.enqueueAndForget((function(){return t.Po===e?n():(ev("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),mx=function(e){st(n,e);var t=dt(n);function n(e,r,i,a,o,u){var s;return nt(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s}return it(n,[{key:"Ko",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:iv()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.dt?(av(void 0===t||"string"==typeof t),hm.fromBase64String(t||"")):(av(void 0===t||t instanceof Uint8Array),hm.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?uv.UNKNOWN:vg(e.code);return new sv(t,e.message||"")}(o);n=new Og(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=$g(e,s.document.name),l=Gg(s.document.updateTime),f=new Wm({mapValue:{fields:s.document.fields}}),h=Qm.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new Pg(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=$g(e,v.document),y=v.readTime?Gg(v.readTime):_v.min(),g=Qm.newNoDocument(m,y),k=v.removedTargetIds||[];n=new Pg([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=$g(e,b.document),x=b.removedTargetIds||[];n=new Pg([],x,w,null)}else{if(!("filter"in t))return iv();t.filter;var I=t.filter;I.targetId;var _=I.count||0,E=new dg(_),S=I.targetId;n=new Rg(S,E)}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return _v.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?_v.min():t.readTime?Gg(t.readTime):_v.min()}(e);return this.listener.Go(t,n)}},{key:"Qo",value:function(e){var t={};t.database=Xg(this.wt),t.addTarget=function(e,t){var n,r=t.target;return(n=Zm(r)?{documents:ak(e,r)}:{query:ok(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=qg(e,t.resumeToken):t.snapshotVersion.compareTo(_v.min())>0&&(n.readTime=zg(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return iv()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Mo(t)}},{key:"jo",value:function(e){var t={};t.database=Xg(this.wt),t.removeTarget=e,this.Mo(t)}}]),n}(vx),yx=function(e){st(n,e);var t=dt(n);function n(e,r,i,a,o,u){var s;return nt(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s.Wo=!1,s}return it(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,wr(ct(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(av(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(av(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Gg(e.updateTime):Gg(t);return n.isEqual(_v.min())&&(n=Gg(t)),new $y(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Gg(e.commitTime);return this.listener.Jo(n,t)}return av(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=Xg(this.wt),this.Mo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return rk(t.wt,e)}))};this.Mo(n)}}]),n}(vx),gx=function(e){st(n,e);var t=dt(n);function n(e,r,i,a){var o;return nt(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.wt=a,o.Zo=!1,o}return it(n,[{key:"tu",value:function(){if(this.Zo)throw new sv(uv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=f(i,2),o=a[0],u=a[1];return r.bo.ro(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===uv.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new sv(uv.UNKNOWN,e.toString())}))}},{key:"ao",value:function(e,t,n,r){var i=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=f(a,2),u=o[0],s=o[1];return i.bo.ao(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===uv.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new sv(uv.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return it((function e(){nt(this,e)}))}()),kx=function(){function e(t,n){nt(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return it(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(tv(t),this.su=!1):ev("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),bx=it((function e(t,n,r,i,a){var o=this;nt(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Dx(o),!e.t0){e.next=5;break}return ev("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Qt(Kt().mark((function e(t){var n;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=ov(t)).lu.add(4),e.next=4,Ix(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,wx(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new kx(r,i)}));function wx(e){return xx.apply(this,arguments)}function xx(){return xx=Qt(Kt().mark((function e(t){var n,r,i;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Dx(t)){e.next=18;break}n=at(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),xx.apply(this,arguments)}function Ix(e){return _x.apply(this,arguments)}function _x(){return _x=Qt(Kt().mark((function e(t){var n,r,i;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=at(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),_x.apply(this,arguments)}function Ex(e,t){var n=ov(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),Ax(n)?Nx(n):oI(n).Co()&&Tx(n,t))}function Sx(e,t){var n=ov(e),r=oI(n);n.hu.delete(t),r.Co()&&Cx(n,t),0===n.hu.size&&(r.Co()?r.ko():Dx(n)&&n._u.set("Unknown"))}function Tx(e,t){e.wu.Nt(t.targetId),oI(e).Qo(t)}function Cx(e,t){e.wu.Nt(t),oI(e).jo(t)}function Nx(e){e.wu=new Mg({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},te:function(t){return e.hu.get(t)||null}}),oI(e).start(),e._u.iu()}function Ax(e){return Dx(e)&&!oI(e).Do()&&e.hu.size>0}function Dx(e){return 0===ov(e).lu.size}function Px(e){e.wu=void 0}function Rx(e){return Ox.apply(this,arguments)}function Ox(){return Ox=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){Tx(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Ox.apply(this,arguments)}function Lx(e,t){return Mx.apply(this,arguments)}function Mx(){return Mx=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Px(t),Ax(t)?(t._u.uu(n),Nx(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Mx.apply(this,arguments)}function Fx(e,t,n){return Vx.apply(this,arguments)}function Vx(){return Vx=Qt(Kt().mark((function e(t,n,r){var i;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof Og&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Qt(Kt().mark((function e(t,n){var r,i,a,o;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=at(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),ev("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Ux(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Pg?t.wu.Ut(n):n instanceof Rg?t.wu.zt(n):t.wu.Gt(n),r.isEqual(_v.min())){e.next=29;break}return e.prev=14,e.next=17,Lw(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.Yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(hm.EMPTY_BYTE_STRING,n.snapshotVersion)),Cx(e,t);var r=new $k(n.target,t,1,n.sequenceNumber);Tx(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),ev("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Ux(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Vx.apply(this,arguments)}function Ux(e,t,n){return jx.apply(this,arguments)}function jx(){return jx=Qt(Kt().mark((function e(t,n,r){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qv(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,Ix(t);case 5:t._u.set("Offline"),r||(r=function(){return Lw(t.localStore)}),t.asyncQueue.enqueueRetryable(Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ev("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,wx(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),jx.apply(this,arguments)}function Bx(e,t){return t().catch((function(n){return Ux(e,n,t)}))}function zx(e){return qx.apply(this,arguments)}function qx(){return qx=Qt(Kt().mark((function e(t){var n,r,i,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ov(t),r=uI(n),i=n.au.length>0?n.au[n.au.length-1].batchId:-1;case 2:if(!Kx(n)){e.next=19;break}return e.prev=3,e.next=6,Vw(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.au.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,Gx(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Ux(n,e.t0);case 17:e.next=2;break;case 19:Wx(n)&&Hx(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),qx.apply(this,arguments)}function Kx(e){return Dx(e)&&e.au.length<10}function Gx(e,t){e.au.push(t);var n=uI(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function Wx(e){return Dx(e)&&!uI(e).Do()&&e.au.length>0}function Hx(e){uI(e).start()}function Qx(e){return $x.apply(this,arguments)}function $x(){return $x=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:uI(t).Xo();case 1:case"end":return e.stop()}}),e)}))),$x.apply(this,arguments)}function Jx(e){return Yx.apply(this,arguments)}function Yx(){return Yx=Qt(Kt().mark((function e(t){var n,r,i,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=uI(t),r=at(t.au);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Yx.apply(this,arguments)}function Xx(e,t,n){return Zx.apply(this,arguments)}function Zx(){return Zx=Qt(Kt().mark((function e(t,n,r){var i,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.au.shift(),a=Hk.from(i,n,r),e.next=3,Bx(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,zx(t);case 5:case"end":return e.stop()}}),e)}))),Zx.apply(this,arguments)}function eI(e,t){return tI.apply(this,arguments)}function tI(){return tI=Qt(Kt().mark((function e(t,n){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&uI(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Qt(Kt().mark((function e(t,n){var r,i;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!pg(i=n.code)||i===uv.ABORTED){e.next=7;break}return r=t.au.shift(),uI(t).No(),e.next=5,Bx(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,zx(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Wx(t)&&Hx(t);case 5:case"end":return e.stop()}}),e)}))),tI.apply(this,arguments)}function nI(e,t){return rI.apply(this,arguments)}function rI(){return rI=Qt(Kt().mark((function e(t,n){var r,i;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=ov(t)).asyncQueue.verifyOperationInProgress(),ev("RemoteStore","RemoteStore received new credentials"),i=Dx(r),r.lu.add(3),e.next=6,Ix(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,wx(r);case 12:case"end":return e.stop()}}),e)}))),rI.apply(this,arguments)}function iI(e,t){return aI.apply(this,arguments)}function aI(){return aI=Qt(Kt().mark((function e(t,n){var r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ov(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,wx(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,Ix(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),aI.apply(this,arguments)}function oI(e){return e.mu||(e.mu=function(e,t,n){var r=ov(e);return r.tu(),new mx(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:Rx.bind(null,e),Jr:Lx.bind(null,e),Go:Fx.bind(null,e)}),e.fu.push(function(){var t=Qt(Kt().mark((function t(n){return Kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),Ax(e)?Nx(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:Px(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function uI(e){return e.gu||(e.gu=function(e,t,n){var r=ov(e);return r.tu(),new yx(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:Qx.bind(null,e),Jr:eI.bind(null,e),Yo:Jx.bind(null,e),Jo:Xx.bind(null,e)}),e.fu.push(function(){var t=Qt(Kt().mark((function t(n){return Kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,zx(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.au.length>0&&(ev("RemoteStore","Stopping write stream with ".concat(e.au.length," pending writes")),e.au=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var sI=function(){function e(t,n,r,i,a){nt(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new cv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return it(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new sv(uv.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function cI(e,t){if(tv("AsyncQueue","".concat(t,": ").concat(e)),Qv(e))return new sv(uv.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var lI=function(){function e(t){nt(this,e),this.comparator=t?function(e,n){return t(e,n)||Nv.comparator(e.key,n.key)}:function(e,t){return Nv.comparator(e.key,t.key)},this.keyedMap=bg(),this.sortedSet=new am(this.comparator)}return it(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),fI=function(){function e(){nt(this,e),this.yu=new am(Nv.comparator)}return it(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):iv():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),hI=function(){function e(t,n,r,i,a,o,u,s){nt(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return it(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,lI.emptySet(n),a,r,i,!0,!1)}}]),e}(),dI=it((function e(){nt(this,e),this.Iu=void 0,this.listeners=[]})),pI=it((function e(){nt(this,e),this.queries=new mg((function(e){return Ty(e)}),Sy),this.onlineState="Unknown",this.Tu=new Set}));function vI(e,t){return mI.apply(this,arguments)}function mI(){return mI=Qt(Kt().mark((function e(t,n){var r,i,a,o,u;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ov(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new dI),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=cI(e.t0,"Initialization of query '".concat(Cy(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&wI(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),mI.apply(this,arguments)}function yI(e,t){return gI.apply(this,arguments)}function gI(){return gI=Qt(Kt().mark((function e(t,n){var r,i,a,o,u;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ov(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),gI.apply(this,arguments)}function kI(e,t){var n,r=ov(e),i=!1,a=at(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=at(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Iu=o}}}catch(f){a.e(f)}finally{a.f()}i&&wI(r)}function bI(e,t,n){var r=ov(e),i=r.queries.get(t);if(i){var a,o=at(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function wI(e){e.Tu.forEach((function(e){e.next()}))}var xI=function(){function e(t,n,r){nt(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return it(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=at(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new hI(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),a=!0):this.Vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"Vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=hI.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),II=function(){function e(t,n){nt(this,e),this.payload=t,this.byteLength=n}return it(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),_I=function(){function e(t){nt(this,e),this.wt=t}return it(e,[{key:"Wi",value:function(e){return $g(this.wt,e)}},{key:"zi",value:function(e){return e.metadata.exists?tk(this.wt,e.document,!1):Qm.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}},{key:"Hi",value:function(e){return Gg(e)}}]),e}(),EI=function(){function e(t,n,r){nt(this,e),this.xu=t,this.localStore=n,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=SI(t)}return it(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Sv.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new _I(this.wt),i=at(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Wi(a.metadata.name),s=at(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Tg()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Qt(Kt().mark((function e(){var t,n,r,i,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ww(this.localStore,new _I(this.wt),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=at(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Qw(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Mu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function SI(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var TI=it((function e(t){nt(this,e),this.key=t})),CI=it((function e(t){nt(this,e),this.key=t})),NI=function(){function e(t,n){nt(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=Tg(),this.mutatedKeys=Tg(),this.Lu=Dy(t),this.Uu=new lI(this.Lu)}return it(e,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(e,t){var n=this,r=t?t.Gu:new fI,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Ny(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Qu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Lu(f,s)>0||c&&n.Lu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Gu:r,Oi:u,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Gu.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return iv()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],u=0===this.Bu.size&&this.current?1:0,s=u!==this.$u;return this.$u=u,0!==a.length||s?{snapshot:new hI(this.query,e.Uu,i,a,e.mutatedKeys,0===u,s,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new fI,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=Tg(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new CI(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new TI(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.ji,this.Bu=Tg();var t=this.Ku(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return hI.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),AI=it((function e(t,n,r){nt(this,e),this.query=t,this.targetId=n,this.view=r})),DI=it((function e(t){nt(this,e),this.key=t,this.Xu=!1})),PI=function(){function e(t,n,r,i,a,o){nt(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new mg((function(e){return Ty(e)}),Sy),this.ec=new Map,this.nc=new Set,this.sc=new am(Nv.comparator),this.ic=new Map,this.rc=new hw,this.oc={},this.uc=new Map,this.cc=zb.Rn(),this.onlineState="Unknown",this.ac=void 0}return it(e,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),e}();function RI(e,t){return OI.apply(this,arguments)}function OI(){return OI=Qt(Kt().mark((function e(t,n){var r,i,a,o,u,s;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=S_(t),!(o=r.tc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,Uw(r.localStore,_y(n));case 8:return u=e.sent,r.isPrimaryClient&&Ex(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,LI(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),OI.apply(this,arguments)}function LI(e,t,n,r){return MI.apply(this,arguments)}function MI(){return MI=Qt(Kt().mark((function e(t,n,r,i){var a,o,u,s,c,l;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hc=function(e,n,r){return function(){var e=Qt(Kt().mark((function e(t,n,r,i){var a,o,u;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ku(r),e.t0=a.Oi,!e.t0){e.next=6;break}return e.next=5,zw(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ku(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(n_(t,n.targetId,u.zu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,zw(t.localStore,n,!0);case 3:return a=e.sent,o=new NI(n,a.ji),u=o.Ku(a.documents),s=Dg.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),n_(t,r,c.zu),l=new AI(n,r,o),e.abrupt("return",(t.tc.set(n,l),t.ec.has(r)?t.ec.get(r).push(n):t.ec.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),MI.apply(this,arguments)}function FI(e,t){return VI.apply(this,arguments)}function VI(){return VI=Qt(Kt().mark((function e(t,n){var r,i,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ov(t),i=r.tc.get(n),!((a=r.ec.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ec.set(i.targetId,a.filter((function(e){return!Sy(e,n)}))),void r.tc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,jw(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Sx(r.remoteStore,i.targetId),e_(r,i.targetId)})).catch(Bv);case 9:e.next=14;break;case 11:return e_(r,i.targetId),e.next=14,jw(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),VI.apply(this,arguments)}function UI(e,t,n){return jI.apply(this,arguments)}function jI(){return jI=Qt(Kt().mark((function e(t,n,r){var i,a,o;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=T_(t),e.prev=1,e.next=4,function(e,t){var n,r,i=ov(e),a=Iv.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Tg());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=gg(),s=Tg();return i.Ui.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=at(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=ng(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new ag(c.key,l,Hm(l.value.mapValue),Jy.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:wg(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oc[e.currentUser.toKey()];r||(r=new am(bv)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,a_(i,a.changes);case 9:return e.next=11,zx(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=cI(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),jI.apply(this,arguments)}function BI(e,t){return zI.apply(this,arguments)}function zI(){return zI=Qt(Kt().mark((function e(t,n){var r,i;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ov(t),e.prev=1,e.next=4,Mw(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ic.get(t);n&&(av(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?av(n.Xu):e.removedDocuments.size>0&&(av(n.Xu),n.Xu=!1))})),e.next=8,a_(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Bv(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),zI.apply(this,arguments)}function qI(e,t,n){var r=ov(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.tc.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=ov(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=at(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&wI(n)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function KI(e,t,n){return GI.apply(this,arguments)}function GI(){return GI=Qt(Kt().mark((function e(t,n,r){var i,a,o,u,s,c;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=ov(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ic.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new am(Nv.comparator)).insert(o,Qm.newNoDocument(o,_v.min())),s=Tg().add(o),c=new Ag(_v.min(),new Map,new sm(bv),u,s),e.next=9,BI(i,c);case 9:i.sc=i.sc.remove(o),i.ic.delete(n),i_(i),e.next=16;break;case 14:return e.next=16,jw(i.localStore,n,!1).then((function(){return e_(i,n,r)})).catch(Bv);case 16:case"end":return e.stop()}}),e)}))),GI.apply(this,arguments)}function WI(e,t){return HI.apply(this,arguments)}function HI(){return HI=Qt(Kt().mark((function e(t,n){var r,i,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ov(t),i=n.batch.batchId,e.prev=1,e.next=4,Ow(r.localStore,n);case 4:return a=e.sent,ZI(r,i,null),XI(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,a_(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Bv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),HI.apply(this,arguments)}function QI(e,t,n){return $I.apply(this,arguments)}function $I(){return $I=Qt(Kt().mark((function e(t,n,r){var i,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ov(t),e.prev=1,e.next=4,function(e,t){var n=ov(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return av(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,ZI(i,n,r),XI(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,a_(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Bv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),$I.apply(this,arguments)}function JI(e,t){return YI.apply(this,arguments)}function YI(){return YI=Qt(Kt().mark((function e(t,n){var r,i,a,o;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dx((r=ov(t)).remoteStore)||ev("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=ov(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.uc.get(i)||[]).push(n),r.uc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=cI(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),YI.apply(this,arguments)}function XI(e,t){(e.uc.get(t)||[]).forEach((function(e){e.resolve()})),e.uc.delete(t)}function ZI(e,t,n){var r=ov(e),i=r.oc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function e_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=at(e.ec.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.tc.delete(a),n&&e.Zu.lc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((function(t){e.rc.containsKey(t)||t_(e,t)}))}function t_(e,t){e.nc.delete(t.path.canonicalString());var n=e.sc.get(t);null!==n&&(Sx(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),i_(e))}function n_(e,t,n){var r,i=at(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof TI?(e.rc.addReference(a.key,t),r_(e,a)):a instanceof CI?(ev("SyncEngine","Document no longer in limbo: "+a.key),e.rc.removeReference(a.key,t),e.rc.containsKey(a.key)||t_(e,a.key)):iv()}}catch(o){i.e(o)}finally{i.f()}}function r_(e,t){var n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(ev("SyncEngine","New document in limbo: "+n),e.nc.add(r),i_(e))}function i_(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){var t=e.nc.values().next().value;e.nc.delete(t);var n=new Nv(Sv.fromString(t)),r=e.cc.next();e.ic.set(r,new DI(n)),e.sc=e.sc.insert(n,r),Ex(e.remoteStore,new $k(_y(ky(n.path)),r,2,tm.ot))}}function a_(e,t,n){return o_.apply(this,arguments)}function o_(){return o_=Qt(Kt().mark((function e(t,n,r){var i,a,o,u;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ov(t),a=[],o=[],u=[],e.t0=i.tc.isEmpty(),e.t0){e.next=9;break}return i.tc.forEach((function(e,t){u.push(i.hc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Cw.Vi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Zu.Go(a),e.next=9,function(){var e=Qt(Kt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ov(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return qv.forEach(n,(function(t){return qv.forEach(t.Pi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return qv.forEach(t.vi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Qv(e.t0)){e.next=10;break}throw e.t0;case 10:ev("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=at(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.$i.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.$i=r.$i.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),o_.apply(this,arguments)}function u_(e,t){return s_.apply(this,arguments)}function s_(){return s_=Qt(Kt().mark((function e(t,n){var r,i;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=ov(t)).currentUser.isEqual(n)){e.next=11;break}return ev("SyncEngine","User change. New user:",n.toKey()),e.next=5,Pw(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.uc.forEach((function(e){e.forEach((function(e){e.reject(new sv(uv.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,a_(r,i.Ki);case 11:case"end":return e.stop()}}),e)}))),s_.apply(this,arguments)}function c_(e,t){var n=ov(e),r=n.ic.get(t);if(r&&r.Xu)return Tg().add(r.key);var i=Tg(),a=n.ec.get(t);if(!a)return i;var o,u=at(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.tc.get(s);i=i.unionWith(c.view.qu)}}catch(l){u.e(l)}finally{u.f()}return i}function l_(e,t){return f_.apply(this,arguments)}function f_(){return f_=Qt(Kt().mark((function e(t,n){var r,i,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ov(t),e.next=3,zw(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&n_(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),f_.apply(this,arguments)}function h_(e,t){return d_.apply(this,arguments)}function d_(){return d_=Qt(Kt().mark((function e(t,n){var r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ov(t),e.abrupt("return",Kw(r.localStore,n).then((function(e){return a_(r,e)})));case 2:case"end":return e.stop()}}),e)}))),d_.apply(this,arguments)}function p_(e,t,n,r){return v_.apply(this,arguments)}function v_(){return v_=Qt(Kt().mark((function e(t,n,r,i){var a,o;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ov(t),e.next=3,function(e,t){var n=ov(e),r=ov(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.yn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):qv.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,zx(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(ZI(a,n,i||null),XI(a,n),function(e,t){ov(ov(e).mutationQueue).In(t)}(a.localStore,n)):iv();case 11:return e.next=13,a_(a,o);case 13:e.next=16;break;case 15:ev("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),v_.apply(this,arguments)}function m_(e,t){return y_.apply(this,arguments)}function y_(){return y_=Qt(Kt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S_(r=ov(t)),T_(r),!0!==n||!0===r.ac){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,g_(r,i.toArray());case 5:return a=e.sent,r.ac=!0,e.next=9,iI(r.remoteStore,!0);case 9:o=at(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Ex(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ac){e.next=25;break}return c=[],l=Promise.resolve(),r.ec.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return e_(r,t),jw(r.localStore,t,!0)})),Sx(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,g_(r,c);case 21:return function(e){var t=ov(e);t.ic.forEach((function(e,n){Sx(t.remoteStore,n)})),t.rc.cs(),t.ic=new Map,t.sc=new am(Nv.comparator)}(r),r.ac=!1,e.next=25,iI(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),y_.apply(this,arguments)}function g_(e,t,n){return k_.apply(this,arguments)}function k_(){return k_=Qt(Kt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=ov(t),a=[],o=[],u=at(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ec.get(c))||0===f.length){e.next=34;break}return e.next=11,Uw(i.localStore,_y(f[0]));case 11:l=e.sent,h=at(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.tc.get(p),e.next=20,l_(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,qw(i.localStore,c);case 36:return y=e.sent,e.next=39,Uw(i.localStore,y);case 39:return l=e.sent,e.next=42,LI(i,b_(y),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Go(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),k_.apply(this,arguments)}function b_(e){return gy(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function w_(e){var t=ov(e);return ov(ov(t.localStore).persistence).Ri()}function x_(e,t,n,r){return I_.apply(this,arguments)}function I_(){return I_=Qt(Kt().mark((function e(t,n,r,i){var a,o,u,s;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=ov(t)).ac){e.next=3;break}return e.abrupt("return",void ev("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ec.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Kw(a.localStore,Ay(o[0]));case 10:return u=e.sent,s=Ag.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,a_(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,jw(a.localStore,n,!0);case 17:return e_(a,n,i),e.abrupt("break",20);case 19:iv();case 20:case"end":return e.stop()}}),e)}))),I_.apply(this,arguments)}function __(e,t,n){return E_.apply(this,arguments)}function E_(){return E_=Qt(Kt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=S_(t)).ac){e.next=45;break}a=at(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ec.has(u)){e.next=10;break}return ev("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,qw(i.localStore,u);case 12:return s=e.sent,e.next=15,Uw(i.localStore,s);case 15:return c=e.sent,e.next=18,LI(i,b_(s),c.targetId,!1);case 18:Ex(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=at(r),e.prev=30,h=Kt().mark((function e(){var t;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ec.has(t),!e.t0){e.next=5;break}return e.next=5,jw(i.localStore,t,!1).then((function(){Sx(i.remoteStore,t),e_(i,t)})).catch(Bv);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),E_.apply(this,arguments)}function S_(e){var t=ov(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=BI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=c_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=KI.bind(null,t),t.Zu.Go=kI.bind(null,t.eventManager),t.Zu.lc=bI.bind(null,t.eventManager),t}function T_(e){var t=ov(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=WI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=QI.bind(null,t),t}function C_(e,t,n){var r=ov(e);(function(){var e=Qt(Kt().mark((function e(t,n,r){var i,a,o,u,s;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=ov(e),r=Gg(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(SI(i)),a=new EI(i,t.localStore,n.wt),e.next=15,n.fc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.fc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,a_(t,s.Mu,void 0);case 31:return e.next=33,function(e,t){var n=ov(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Ou));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(nv("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var N_=function(){function e(){nt(this,e),this.synchronizeTabs=!1}return it(e,[{key:"initialize",value:function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wt=dx(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),e.next=5,this.persistence.start();case 5:this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e,t){return null}},{key:"gc",value:function(e,t){return null}},{key:"wc",value:function(e){return Dw(this.persistence,new Nw,e.initialUser,this.wt)}},{key:"_c",value:function(e){return new gw(bw.Ms,this.wt)}},{key:"dc",value:function(e){return new ax}},{key:"terminate",value:function(){var e=Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),A_=function(e){st(n,e);var t=dt(n);function n(e,r,i){var a;return nt(this,n),(a=t.call(this)).yc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return it(n,[{key:"initialize",value:function(){var e=Qt(Kt().mark((function e(t){var r=this;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wr(ct(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.yc.initialize(this,t);case 4:return e.next=6,T_(this.yc.syncEngine);case 6:return e.next=8,zx(this.yc.remoteStore);case 8:return e.next=10,this.persistence.ci((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wc",value:function(e){return Dw(this.persistence,new Nw,e.initialUser,this.wt)}},{key:"mc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new $b(n,e.asyncQueue,t)}},{key:"gc",value:function(e,t){var n=new em(t,this.persistence);return new Zv(e.asyncQueue,n)}},{key:"_c",value:function(e){var t=Tw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Ob.withCacheSize(this.cacheSizeBytes):Ob.DEFAULT;return new _w(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,fx(),hx(),this.wt,this.sharedClientState,!!this.forceOwnership)}},{key:"dc",value:function(e){return new ax}}]),n}(N_),D_=function(e){st(n,e);var t=dt(n);function n(e,r){var i;return nt(this,n),(i=t.call(this,e,r,!1)).yc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return it(n,[{key:"initialize",value:function(){var e=Qt(Kt().mark((function e(t){var r,i=this;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wr(ct(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.yc.syncEngine,e.t0=this.sharedClientState instanceof ix,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:p_.bind(null,r),Or:x_.bind(null,r),Mr:__.bind(null,r),Ri:w_.bind(null,r),Nr:h_.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.ci(function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m_(i.yc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dc",value:function(e){var t=fx();if(!ix.V(t))throw new sv(uv.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Tw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ix(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(A_),P_=function(){function e(){nt(this,e)}return it(e,[{key:"initialize",value:function(){var e=Qt(Kt().mark((function e(t,n){var r=this;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return qI(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=u_.bind(null,this.syncEngine),e.next=12,iI(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new pI}},{key:"createDatastore",value:function(e){var t,n=dx(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new lx(t));return function(e,t,n,r){return new gx(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return qI(o.syncEngine,e,0)},a=ux.V()?new ux:new ox,new bx(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new PI(e,t,n,r,i,a);return o&&(u.ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Qt(Kt().mark((function e(t){var n;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ov(t),ev("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,Ix(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function R_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Qt(Kt().mark((function r(){var i;return Kt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var O_=function(){function e(t){nt(this,e),this.observer=t,this.muted=!1}return it(e,[{key:"next",value:function(e){this.observer.next&&this.Ic(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),L_=function(){function e(t,n){var r=this;nt(this,e),this.Ec=t,this.wt=n,this.metadata=new cv,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return it(e,[{key:"close",value:function(){return this.Ec.cancel()}},{key:"getMetadata",value:function(){var e=Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fc",value:function(){var e=Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Rc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Rc",value:function(){var e=Qt(Kt().mark((function e(){var t,n,r,i;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ac.decode(t),r=Number(n),isNaN(r)&&this.Pc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new II(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"bc",value:function(){var e=Qt(Kt().mark((function e(){var t,n;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Vc()<0)){e.next=7;break}return e.next=3,this.Sc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Vc())<0&&this.Pc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=Qt(Kt().mark((function e(t){var n;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Sc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ac.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pc",value:function(e){throw this.Ec.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Sc",value:function(){var e=Qt(Kt().mark((function e(){var t,n;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ec.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),M_=function(){function e(t){nt(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return it(e,[{key:"lookup",value:function(){var e=Qt(Kt().mark((function e(t){var n,r=this;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new sv(uv.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Qt(Kt().mark((function e(t,n){var r,i,a,o,u,s;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ov(t),i=Xg(r.wt)+"/documents",a={documents:n.map((function(e){return Qg(r.wt,e)}))},e.next=5,r.ao("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=nk(r.wt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());av(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new fg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Qt(Kt().mark((function e(){var t,n=this;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Nv.fromPath(t);n.mutations.push(new hg(r,n.precondition(r)))})),e.next=7,function(){var e=Qt(Kt().mark((function e(t,n){var r,i,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ov(t),i=Xg(r.wt)+"/documents",a={writes:n.map((function(e){return rk(r.wt,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw iv();t=_v.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new sv(uv.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Jy.updateTime(t):Jy.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_v.min()))throw new sv(uv.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Jy.updateTime(t)}return Jy.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),F_=function(){function e(t,n,r,i,a){nt(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new px(this.asyncQueue,"transaction_retry")}return it(e,[{key:"run",value:function(){this.Dc-=1,this.Cc()}},{key:"Cc",value:function(){var e=this;this.So.Io(Qt(Kt().mark((function t(){var n,r;return Kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new M_(e.datastore),(r=e.xc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Nc(t)}))}))})).catch((function(t){e.Nc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"xc",value:function(e){try{var t=this.updateFunction(e);return!xm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Nc",value:function(e){var t=this;this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Cc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!pg(t)}return!1}}]),e}(),V_=function(){function e(t,n,r,i){var a=this;nt(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Jp.UNAUTHENTICATED,this.clientId=kv.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ev("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return ev("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return it(e,[{key:"getConfiguration",value:function(){var e=Qt(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new sv(uv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new cv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Qt(Kt().mark((function n(){var r;return Kt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=cI(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function U_(e,t){return j_.apply(this,arguments)}function j_(){return j_=Qt(Kt().mark((function e(t,n){var r,i;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),ev("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Pw(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),j_.apply(this,arguments)}function B_(e,t){return z_.apply(this,arguments)}function z_(){return z_=Qt(Kt().mark((function e(t,n){var r,i;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,q_(t);case 3:return r=e.sent,ev("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return nI(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return nI(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),z_.apply(this,arguments)}function q_(e){return K_.apply(this,arguments)}function K_(){return K_=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return ev("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,U_(t,new N_);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),K_.apply(this,arguments)}function G_(e){return W_.apply(this,arguments)}function W_(){return W_=Qt(Kt().mark((function e(t){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return ev("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,B_(t,new P_);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),W_.apply(this,arguments)}function H_(e){return q_(e).then((function(e){return e.persistence}))}function Q_(e){return q_(e).then((function(e){return e.localStore}))}function $_(e){return G_(e).then((function(e){return e.remoteStore}))}function J_(e){return G_(e).then((function(e){return e.syncEngine}))}function Y_(e){return X_.apply(this,arguments)}function X_(){return X_=Qt(Kt().mark((function e(t){var n,r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G_(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=RI.bind(null,n.syncEngine),r.onUnlisten=FI.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),X_.apply(this,arguments)}function Z_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new cv;return e.asyncQueue.enqueueAndForget(Qt(Kt().mark((function i(){return Kt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new O_({next:function(a){t.enqueueAndForget((function(){return yI(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new sv(uv.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new sv(uv.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new xI(ky(n.path),a,{includeMetadataChanges:!0,Du:!0});return vI(e,o)},i.next=3,Y_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function eE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new cv;return e.asyncQueue.enqueueAndForget(Qt(Kt().mark((function i(){return Kt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new O_({next:function(n){t.enqueueAndForget((function(){return yI(e,o)})),n.fromCache&&"server"===r.source?i.reject(new sv(uv.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new xI(n,a,{includeMetadataChanges:!0,Du:!0});return vI(e,o)},i.next=3,Y_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var tE=new Map;function nE(e,t,n){if(!n)throw new sv(uv.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function rE(e,t,n,r){if(!0===t&&!0===r)throw new sv(uv.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function iE(e){if(!Nv.isDocumentKey(e))throw new sv(uv.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function aE(e){if(Nv.isDocumentKey(e))throw new sv(uv.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function oE(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":iv()}function uE(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new sv(uv.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=oE(e);throw new sv(uv.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function sE(e,t){if(t<=0)throw new sv(uv.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var cE=function(){function e(t){var n;if(nt(this,e),void 0===t.host){if(void 0!==t.ssl)throw new sv(uv.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new sv(uv.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,rE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return it(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),lE=function(){function e(t,n,r){nt(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cE({}),this._settingsFrozen=!1,t instanceof wm?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new sv(uv.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wm(e.options.projectId)}(t))}return it(e,[{key:"app",get:function(){if(!this._app)throw new sv(uv.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new sv(uv.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cE(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new fv;switch(e.type){case"gapi":var t=e.client;return av(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new vv(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new sv(uv.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=tE.get(e);t&&(ev("ComponentProvider","Removing Datastore"),tE.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function fE(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=uE(e,lE))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&nv("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Jp.MOCK_USER;else{o=xt(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new sv(uv.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Jp(s)}e._authCredentials=new hv(new lv(o,u))}}var hE=function(){function e(t,n,r){nt(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return it(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new pE(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),dE=function(){function e(t,n,r){nt(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return it(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),pE=function(e){st(n,e);var t=dt(n);function n(e,r,i){var a;return nt(this,n),(a=t.call(this,e,r,ky(i)))._path=i,a.type="collection",a}return it(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new hE(this.firestore,null,new Nv(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(dE);function vE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=qt(e),nE("collection","path",t),e instanceof lE){var a=Sv.fromString.apply(Sv,[t].concat(r));return aE(a),new pE(e,null,a)}if(!(e instanceof hE||e instanceof pE))throw new sv(uv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Sv.fromString.apply(Sv,[t].concat(r)));return aE(o),new pE(e.firestore,null,o)}function mE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=qt(e),1===arguments.length&&(t=kv.I()),nE("doc","path",t),e instanceof lE){var a=Sv.fromString.apply(Sv,[t].concat(r));return iE(a),new hE(e,null,new Nv(a))}if(!(e instanceof hE||e instanceof pE))throw new sv(uv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Sv.fromString.apply(Sv,[t].concat(r)));return iE(o),new hE(e.firestore,e instanceof pE?e.converter:null,new Nv(o))}function yE(e,t){return e=qt(e),t=qt(t),(e instanceof hE||e instanceof pE)&&(t instanceof hE||t instanceof pE)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function gE(e,t){return e=qt(e),t=qt(t),e instanceof dE&&t instanceof dE&&e.firestore===t.firestore&&Sy(e._query,t._query)&&e.converter===t.converter}var kE=function(){function e(){var t=this;nt(this,e),this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new px(this,"async_queue_retry"),this.Kc=function(){var e=hx();e&&ev("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=hx();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Kc)}return it(e,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Gc(),this.Qc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;var t=hx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new cv;return this.Qc((function(){return t.Fc&&t.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Mc.push(e),t.jc()}))}},{key:"jc",value:function(){var e=Qt(Kt().mark((function e(){var t=this;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Mc.length){e.next=14;break}return e.prev=1,e.next=4,this.Mc[0]();case 4:this.Mc.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Qv(e.t0)){e.next=12;break}throw e.t0;case 12:ev("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Mc.length>0&&this.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){var t=this,n=this.Oc.then((function(){return t.Lc=!0,e().catch((function(e){t.Bc=e,t.Lc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw tv("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Lc=!1,e}))}));return this.Oc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Gc(),this.qc.indexOf(e)>-1&&(t=0);var i=sI.createAndSchedule(this,e,t,n,(function(e){return r.Wc(e)}));return this.$c.push(i),i}},{key:"Gc",value:function(){this.Bc&&iv()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=Qt(Kt().mark((function e(){var t;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Oc,e.next=3,t;case 3:if(t!==this.Oc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t,n=at(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Jc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=at(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Yc",value:function(e){this.qc.push(e)}},{key:"Wc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function bE(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=at(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var wE=function(){function e(){nt(this,e),this._progressObserver={},this._taskCompletionResolver=new cv,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return it(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),xE=function(e){st(n,e);var t=dt(n);function n(e,r,i){var a;return nt(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new kE,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return it(n,[{key:"_terminate",value:function(){return this._firestoreClient||_E(this),this._firestoreClient.terminate()}}]),n}(lE);function IE(e){return e._firestoreClient||_E(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function _E(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new bm(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new V_(e._authCredentials,e._appCheckCredentials,e._queue,r)}function EE(e,t,n){var r=new cv;return e.asyncQueue.enqueue(Qt(Kt().mark((function i(){var a;return Kt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,U_(e,n);case 3:return i.next=5,B_(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===uv.FAILED_PRECONDITION||e.code===uv.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function SE(e){return function(e){return e.asyncQueue.enqueue(Qt(Kt().mark((function t(){var n,r;return Kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H_(e);case 2:return n=t.sent,t.next=5,$_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=ov(e);return t.lu.delete(0),wx(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(IE(e=uE(e,xE)))}function TE(e){return function(e){return e.asyncQueue.enqueue(Qt(Kt().mark((function t(){var n,r;return Kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H_(e);case 2:return n=t.sent,t.next=5,$_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Qt(Kt().mark((function e(t){var n;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=ov(t)).lu.add(0),e.next=4,Ix(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(IE(e=uE(e,xE)))}function CE(e,t){var n=IE(e=uE(e,xE)),r=new wE;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new L_(e,t)}(function(e,t){if(e instanceof Uint8Array)return R_(e,t);if(e instanceof ArrayBuffer)return R_(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,dx(t));e.asyncQueue.enqueueAndForget(Qt(Kt().mark((function t(){return Kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=C_,t.next=3,J_(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function NE(e,t){return function(e,t){return e.asyncQueue.enqueue(Qt(Kt().mark((function n(){return Kt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=ov(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ds.getNamedQuery(e,t)}))},n.next=3,Q_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(IE(e=uE(e,xE)),t).then((function(t){return t?new dE(e,null,t.query):null}))}function AE(e){if(e._initialized||e._terminated)throw new sv(uv.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var DE=function(){function e(){nt(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new sv(uv.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cv(n)}return it(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var PE=function(){function e(t){nt(this,e),this._byteString=t}return it(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(hm.fromBase64String(t))}catch(t){throw new sv(uv.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(hm.fromUint8Array(t))}}]),e}(),RE=it((function e(t){nt(this,e),this._methodName=t})),OE=function(){function e(t,n){if(nt(this,e),!isFinite(t)||t<-90||t>90)throw new sv(uv.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new sv(uv.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return it(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return bv(this._lat,e._lat)||bv(this._long,e._long)}}]),e}(),LE=/^__.*__$/,ME=function(){function e(t,n,r){nt(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return it(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new ag(e,this.data,this.fieldMask,t,this.fieldTransforms):new ig(e,this.data,t,this.fieldTransforms)}}]),e}(),FE=function(){function e(t,n,r){nt(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return it(e,[{key:"toMutation",value:function(e,t){return new ag(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function VE(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw iv()}}var UE=function(){function e(t,n,r,i,a,o){nt(this,e),this.settings=t,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return it(e,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(e){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(e){return aS(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.sa(this.path.get(e))}},{key:"sa",value:function(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(VE(this.Zc)&&LE.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}]),e}(),jE=function(){function e(t,n,r){nt(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.wt=r||dx(t)}return it(e,[{key:"aa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new UE({Zc:e,methodName:t,ca:n,path:Cv.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),e}();function BE(e){var t=e._freezeSettings(),n=dx(e._databaseId);return new jE(e._databaseId,!!t.ignoreUndefinedProperties,n)}function zE(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.aa(a.merge||a.mergeFields?2:0,t,n,i);tS("Data must be an object, but it was:",o,r);var u,s,c=ZE(r,o);if(a.merge)u=new fm(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=at(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=nS(t,d,n);if(!o.contains(p))throw new sv(uv.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));oS(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new fm(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new ME(new Wm(c),u,s)}var qE=function(e){st(n,e);var t=dt(n);function n(){return nt(this,n),t.apply(this,arguments)}return it(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Zc)throw 1===e.Zc?e.oa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.oa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(RE);function KE(e,t,n){return new UE({Zc:3,ca:t.settings.ca,methodName:e._methodName,na:n},t.databaseId,t.wt,t.ignoreUndefinedProperties)}var GE=function(e){st(n,e);var t=dt(n);function n(){return nt(this,n),t.apply(this,arguments)}return it(n,[{key:"_toFieldTransform",value:function(e){return new Qy(e.path,new jy)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(RE),WE=function(e){st(n,e);var t=dt(n);function n(e,r){var i;return nt(this,n),(i=t.call(this,e)).ha=r,i}return it(n,[{key:"_toFieldTransform",value:function(e){var t=KE(this,e,!0),n=this.ha.map((function(e){return XE(e,t)})),r=new By(n);return new Qy(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(RE),HE=function(e){st(n,e);var t=dt(n);function n(e,r){var i;return nt(this,n),(i=t.call(this,e)).ha=r,i}return it(n,[{key:"_toFieldTransform",value:function(e){var t=KE(this,e,!0),n=this.ha.map((function(e){return XE(e,t)})),r=new qy(n);return new Qy(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(RE),QE=function(e){st(n,e);var t=dt(n);function n(e,r){var i;return nt(this,n),(i=t.call(this,e)).la=r,i}return it(n,[{key:"_toFieldTransform",value:function(e){var t=new Gy(e.wt,Ly(e.wt,this.la));return new Qy(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(RE);function $E(e,t,n,r){var i=e.aa(1,t,n);tS("Data must be an object, but it was:",i,r);var a=[],o=Wm.empty();rm(r,(function(e,r){var u=iS(t,e,n);r=qt(r);var s=i.ia(u);if(r instanceof qE)a.push(u);else{var c=XE(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new fm(a);return new FE(o,u,i.fieldTransforms)}function JE(e,t,n,r,i,a){var o=e.aa(1,t,n),u=[nS(t,r,n)],s=[i];if(a.length%2!=0)throw new sv(uv.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(nS(t,a[c])),s.push(a[c+1]);for(var l=[],f=Wm.empty(),h=u.length-1;h>=0;--h)if(!oS(l,u[h])){var d=u[h],p=s[h];p=qt(p);var v=o.ia(d);if(p instanceof qE)l.push(d);else{var m=XE(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new fm(l);return new FE(f,y,o.fieldTransforms)}function YE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return XE(n,e.aa(r?4:3,t))}function XE(e,t){if(eS(e=qt(e)))return tS("Unsupported field value:",t,e),ZE(e,t);if(e instanceof RE)return function(e,t){if(!VE(t.Zc))throw t.oa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.oa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=at(e);try{for(a.s();!(n=a.n()).done;){var o=XE(n.value,t.ra(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=qt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ly(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Iv.fromDate(e);return{timestampValue:zg(t.wt,n)}}if(e instanceof Iv){var r=new Iv(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:zg(t.wt,r)}}if(e instanceof OE)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof PE)return{bytesValue:qg(t.wt,e._byteString)};if(e instanceof hE){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.oa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Wg(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa("Unsupported field value: ".concat(oE(e)))}(e,t)}function ZE(e,t){var n={};return im(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):rm(e,(function(e,r){var i=XE(r,t.ea(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function eS(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Iv||e instanceof OE||e instanceof PE||e instanceof hE||e instanceof RE)}function tS(e,t,n){if(!eS(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=oE(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function nS(e,t,n){if((t=qt(t))instanceof DE)return t._internalPath;if("string"==typeof t)return iS(e,t);throw aS("Field path arguments must be of type string or ",e,!1,void 0,n)}var rS=new RegExp("[~\\*/\\[\\]]");function iS(e,t,n){if(t.search(rS)>=0)throw aS("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return pt(DE,Wt(t.split(".")))._internalPath}catch(r){throw aS("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function aS(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new sv(uv.INVALID_ARGUMENT,u+e+s)}function oS(e,t){return e.some((function(e){return e.isEqual(t)}))}var uS=function(){function e(t,n,r,i,a){nt(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return it(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new hE(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new sS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(cS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),sS=function(e){st(n,e);var t=dt(n);function n(){return nt(this,n),t.apply(this,arguments)}return it(n,[{key:"data",value:function(){return wr(ct(n.prototype),"data",this).call(this)}}]),n}(uS);function cS(e,t){return"string"==typeof t?iS(e,t):t instanceof DE?t._internalPath:t._delegate._internalPath}var lS=function(){function e(t,n){nt(this,e),this.hasPendingWrites=t,this.fromCache=n}return it(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),fS=function(e){st(n,e);var t=dt(n);function n(e,r,i,a,o,u){var s;return nt(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return it(n,[{key:"exists",value:function(){return wr(ct(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new hS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(cS("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(uS),hS=function(e){st(n,e);var t=dt(n);function n(){return nt(this,n),t.apply(this,arguments)}return it(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return wr(ct(n.prototype),"data",this).call(this,e)}}]),n}(fS),dS=function(){function e(t,n,r,i){nt(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new lS(i.hasPendingWrites,i.fromCache),this.query=r}return it(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new hS(n._firestore,n._userDataWriter,r.key,r,new lS(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new sv(uv.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new hS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new lS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new hS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new lS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:pS(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function pS(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return iv()}}function vS(e,t){return e instanceof fS&&t instanceof fS?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof dS&&t instanceof dS&&e._firestore===t._firestore&&gE(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function mS(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new sv(uv.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var yS=it((function e(){nt(this,e)}));function gS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var kS=function(e){st(n,e);var t=dt(n);function n(e,r,i){var a;return nt(this,n),(a=t.call(this)).fa=e,a.da=r,a._a=i,a.type="where",a}return it(n,[{key:"_apply",value:function(e){var t=BE(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new sv(uv.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){AS(o,a);var s,c=[],l=at(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(NS(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=NS(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||AS(o,a),u=YE(n,"where",o,"in"===a||"not-in"===a);var h=ry.create(i,a,u);return function(e,t){if(t.ht()){var n=wy(e);if(null!==n&&!n.isEqual(t.field))throw new sv(uv.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=by(e);null!==r&&DS(e,t.field,r)}var i=function(e,t){var n,r=at(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new sv(uv.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new sv(uv.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new dE(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new yy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(yS);var bS=function(e){st(n,e);var t=dt(n);function n(e,r){var i;return nt(this,n),(i=t.call(this)).fa=e,i.wa=r,i.type="orderBy",i}return it(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new sv(uv.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new sv(uv.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new dy(t,n);return function(e,t){if(null===by(e)){var n=wy(e);null!==n&&DS(e,n,t.field)}}(e,r),r}(e._query,this.fa,this.wa);return new dE(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new yy(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(yS);var wS=function(e){st(n,e);var t=dt(n);function n(e,r,i){var a;return nt(this,n),(a=t.call(this)).type=e,a.ma=r,a.ga=i,a}return it(n,[{key:"_apply",value:function(e){return new dE(e.firestore,e.converter,Ey(e._query,this.ma,this.ga))}}]),n}(yS);var xS=function(e){st(n,e);var t=dt(n);function n(e,r,i){var a;return nt(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return it(n,[{key:"_apply",value:function(e){var t=CS(e,this.type,this.ya,this.pa);return new dE(e.firestore,e.converter,function(e,t){return new yy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(yS);function IS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new xS("startAt",t,!0)}function _S(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new xS("startAfter",t,!1)}var ES=function(e){st(n,e);var t=dt(n);function n(e,r,i){var a;return nt(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return it(n,[{key:"_apply",value:function(e){var t=CS(e,this.type,this.ya,this.pa);return new dE(e.firestore,e.converter,function(e,t){return new yy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(yS);function SS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ES("endBefore",t,!1)}function TS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ES("endAt",t,!0)}function CS(e,t,n,r){if(n[0]=qt(n[0]),n[0]instanceof uS)return function(e,t,n,r,i){if(!r)throw new sv(uv.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=at(Iy(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Om(t,r.key));else{var c=r.data.field(s.field);if(ym(c))throw new sv(uv.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new sv(uv.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new hy(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=BE(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new sv(uv.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new sv(uv.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!xy(e)&&-1!==c.indexOf("/"))throw new sv(uv.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Sv.fromString(c));if(!Nv.isDocumentKey(l))throw new sv(uv.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Nv(l);u.push(Om(t,f))}else{var h=YE(n,r,c);u.push(h)}}return new hy(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function NS(e,t,n){if("string"==typeof(n=qt(n))){if(""===n)throw new sv(uv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xy(t)&&-1!==n.indexOf("/"))throw new sv(uv.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Sv.fromString(n));if(!Nv.isDocumentKey(r))throw new sv(uv.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Om(e,new Nv(r))}if(n instanceof hE)return Om(e,n._key);throw new sv(uv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(oE(n),"."))}function AS(e,t){if(!Array.isArray(e)||0===e.length)throw new sv(uv.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new sv(uv.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function DS(e,t,n){if(!n.isEqual(t))throw new sv(uv.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var PS={maxAttempts:5},RS=function(){function e(){nt(this,e)}return it(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Tm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vm(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw iv()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return rm(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new OE(vm(e.latitude),vm(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=gm(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(km(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=pm(e);return new Iv(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Sv.fromString(e);av(mk(n));var r=new wm(n.get(1),n.get(3)),i=new Nv(n.popFirst(5));return r.isEqual(t)||tv("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function OS(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var LS=function(e){st(n,e);var t=dt(n);function n(e){var r;return nt(this,n),(r=t.call(this)).firestore=e,r}return it(n,[{key:"convertBytes",value:function(e){return new PE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new hE(this.firestore,null,t)}}]),n}(RS),MS=function(){function e(t,n){nt(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=BE(t)}return it(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=FS(e,this._firestore),i=OS(r.converter,t,n),a=zE(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Jy.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=FS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=qt(t))||t instanceof DE?JE(this._dataReader,"WriteBatch.update",i._key,t,n,o):$E(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Jy.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=FS(e,this._firestore);return this._mutations=this._mutations.concat(new fg(t._key,Jy.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new sv(uv.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function FS(e,t){if((e=qt(e)).firestore!==t)throw new sv(uv.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var VS=function(e){st(n,e);var t=dt(n);function n(e){var r;return nt(this,n),(r=t.call(this)).firestore=e,r}return it(n,[{key:"convertBytes",value:function(e){return new PE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new hE(this.firestore,null,t)}}]),n}(RS);function US(e){e=uE(e,hE);var t=uE(e.firestore,xE),n=IE(t),r=new VS(t);return function(e,t){var n=new cv;return e.asyncQueue.enqueueAndForget(Qt(Kt().mark((function r(){return Kt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Qt(Kt().mark((function e(t,n,r){var i,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=ov(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new sv(uv.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=cI(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Q_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new fS(t,r,e._key,n,new lS(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function jS(e){e=uE(e,dE);var t=uE(e.firestore,xE),n=IE(t),r=new VS(t);return function(e,t){var n=new cv;return e.asyncQueue.enqueueAndForget(Qt(Kt().mark((function r(){return Kt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Qt(Kt().mark((function e(t,n,r){var i,a,o,u,s;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,zw(t,n,!0);case 3:i=e.sent,a=new NI(n,i.ji),o=a.Ku(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=cI(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Q_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new dS(t,r,e,n)}))}function BS(e,t,n){e=uE(e,hE);var r=uE(e.firestore,xE),i=OS(e.converter,t,n);return GS(r,[zE(BE(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Jy.none())])}function zS(e,t,n){e=uE(e,hE);for(var r=uE(e.firestore,xE),i=BE(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return GS(r,[("string"==typeof(t=qt(t))||t instanceof DE?JE(i,"updateDoc",e._key,t,n,o):$E(i,"updateDoc",e._key,t)).toMutation(e._key,Jy.exists(!0))])}function qS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=qt(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||bE(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(bE(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof hE)l=uE(e.firestore,xE),f=ky(e._key.path),c={next:function(t){n[s]&&n[s](WS(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=uE(e,dE);l=uE(p.firestore,xE),f=p._query;var v=new VS(l);c={next:function(e){n[s]&&n[s](new dS(l,v,p,e))},error:n[s+1],complete:n[s+2]},mS(e._query)}return function(e,t,n,r){var i=new O_(r),a=new xI(t,i,n);return e.asyncQueue.enqueueAndForget(Qt(Kt().mark((function t(){return Kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=vI,t.next=3,Y_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Tc(),e.asyncQueue.enqueueAndForget(Qt(Kt().mark((function t(){return Kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=yI,t.next=3,Y_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(IE(l),f,h,c)}function KS(e,t){return function(e,t){var n=new O_(t);return e.asyncQueue.enqueueAndForget(Qt(Kt().mark((function t(){return Kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){ov(e).Tu.add(t),t.next()},t.next=3,Y_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Tc(),e.asyncQueue.enqueueAndForget(Qt(Kt().mark((function t(){return Kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){ov(e).Tu.delete(t)},t.next=3,Y_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(IE(e=uE(e,xE)),bE(t)?t:{next:t})}function GS(e,t){return function(e,t){var n=new cv;return e.asyncQueue.enqueueAndForget(Qt(Kt().mark((function r(){return Kt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=UI,r.next=3,J_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(IE(e),t)}function WS(e,t,n){var r=n.docs.get(t._key),i=new VS(e);return new fS(e,i,t._key,r,new lS(n.hasPendingWrites,n.fromCache),t.converter)}var HS=function(e){st(n,e);var t=dt(n);function n(e,r){var i;return nt(this,n),(i=t.call(this,e,r))._firestore=e,i}return it(n,[{key:"get",value:function(e){var t=this,r=FS(e,this._firestore),i=new VS(this._firestore);return wr(ct(n.prototype),"get",this).call(this,e).then((function(e){return new fS(t._firestore,i,r._key,e._document,new lS(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){nt(this,e),this._firestore=t,this._transaction=n,this._dataReader=BE(t)}return it(e,[{key:"get",value:function(e){var t=this,n=FS(e,this._firestore),r=new LS(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return iv();var i=e[0];if(i.isFoundDocument())return new uS(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new uS(t._firestore,r,n._key,null,n.converter);throw iv()}))}},{key:"set",value:function(e,t,n){var r=FS(e,this._firestore),i=OS(r.converter,t,n),a=zE(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=FS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=qt(t))||t instanceof DE?JE(this._dataReader,"Transaction.update",i._key,t,n,o):$E(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=FS(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function QS(e,t,n){e=uE(e,xE);var r=Object.assign(Object.assign({},PS),n);return function(e){if(e.maxAttempts<1)throw new sv(uv.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new cv;return e.asyncQueue.enqueueAndForget(Qt(Kt().mark((function i(){var a;return Kt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return G_(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new F_(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(IE(e),(function(n){return t(new HS(e,n))}),r)}function $S(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new WE("arrayUnion",t)}function JS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new HE("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Yp=e}(qn),Mn(new $t("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new xE(i,new dv(e.getProvider("auth-internal")),new yv(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),$n($p,"3.4.13",e),$n($p,"3.4.13","esm2017")}();function YS(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new sv("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function XS(){if("undefined"===typeof Uint8Array)throw new sv("unimplemented","Uint8Arrays are not available in this environment.")}function ZS(){if("undefined"==typeof atob)throw new sv("unimplemented","Blobs are unavailable in Firestore in this environment.")}var eT=function(){function e(t){nt(this,e),this._delegate=t}return it(e,[{key:"toBase64",value:function(){return ZS(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return XS(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return ZS(),new e(PE.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return XS(),new e(PE.fromUint8Array(t))}}]),e}();function tT(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=at(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var nT=function(){function e(){nt(this,e)}return it(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){AE(e=uE(e,xE));var n=IE(e),r=e._freezeSettings(),i=new P_;return EE(n,i,new A_(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){AE(e=uE(e,xE));var t=IE(e),n=e._freezeSettings(),r=new P_;return EE(t,r,new D_(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new sv(uv.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new cv;return e._queue.enqueueAndForgetEvenWhileRestricted(Qt(Kt().mark((function n(){return Kt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Qt(Kt().mark((function e(t){var n;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Gv.V()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Gv.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Tw(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),rT=function(){function e(t,n,r){var i=this;nt(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof wm||(this._appCompat=t)}return it(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||nv("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};fE(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return SE(this._delegate)}},{key:"disableNetwork",value:function(){return TE(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&rE("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new cv;return e.asyncQueue.enqueueAndForget(Qt(Kt().mark((function n(){return Kt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=JI,n.next=3,J_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(IE(e=uE(e,xE)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return KS(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new sv("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new yT(this,vE(this._delegate,e))}catch(t){throw cT(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new sT(this,mE(this._delegate,e))}catch(t){throw cT(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new pT(this,function(e,t){if(e=uE(e,lE),nE("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new sv(uv.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new dE(e,null,function(e){return new yy(Sv.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw cT(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return QS(this._delegate,(function(n){return e(new aT(t,n))}))}},{key:"batch",value:function(){var e=this;return IE(this._delegate),new oT(new MS(this._delegate,(function(t){return GS(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return CE(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return NE(this._delegate,e).then((function(e){return e?new pT(t,e):null}))}}]),e}(),iT=function(e){st(n,e);var t=dt(n);function n(e){var r;return nt(this,n),(r=t.call(this)).firestore=e,r}return it(n,[{key:"convertBytes",value:function(e){return new eT(new PE(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return sT.forKey(t,this.firestore,null)}}]),n}(RS);var aT=function(){function e(t,n){nt(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new iT(t)}return it(e,[{key:"get",value:function(e){var t=this,n=gT(e);return this._delegate.get(n).then((function(e){return new hT(t._firestore,new fS(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=gT(e);return n?(YS("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=gT(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=gT(e);return this._delegate.delete(t),this}}]),e}(),oT=function(){function e(t){nt(this,e),this._delegate=t}return it(e,[{key:"set",value:function(e,t,n){var r=gT(e);return n?(YS("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=gT(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=gT(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),uT=function(){function e(t,n,r){nt(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return it(e,[{key:"fromFirestore",value:function(e,t){var n=new hS(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new dT(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new iT(t),n),i.set(n,a)),a}}]),e}();uT.INSTANCES=new WeakMap;var sT=function(){function e(t,n){nt(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new iT(t)}return it(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new yT(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new yT(this.firestore,vE(this._delegate,e))}catch(t){throw cT(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=qt(e))instanceof hE&&yE(this._delegate,e)}},{key:"set",value:function(e,t){t=YS("DocumentReference.set",t);try{return t?BS(this._delegate,e,t):BS(this._delegate,e)}catch(n){throw cT(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?zS(this._delegate,e):zS.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw cT(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return GS(uE(e.firestore,xE),[new fg(e._key,Jy.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=lT(n),a=fT(n,(function(t){return new hT(e.firestore,new fS(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return qS(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?US(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=uE(e,hE);var t=uE(e.firestore,xE);return Z_(IE(t),e._key,{source:"server"}).then((function(n){return WS(t,e,n)}))}(this._delegate):function(e){e=uE(e,hE);var t=uE(e.firestore,xE);return Z_(IE(t),e._key).then((function(n){return WS(t,e,n)}))}(this._delegate),t.then((function(e){return new hT(n.firestore,new fS(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(uT.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new sv("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new hE(n._delegate,r,new Nv(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new hE(n._delegate,r,t))}}]),e}();function cT(e,t,n){return e.message=e.message.replace(t,n),e}function lT(e){var t,n=at(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!tT(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function fT(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=tT(e[0])?e[0]:tT(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var hT=function(){function e(t,n){nt(this,e),this._firestore=t,this._delegate=n}return it(e,[{key:"ref",get:function(){return new sT(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return vS(this._delegate,e._delegate)}}]),e}(),dT=function(e){st(n,e);var t=dt(n);function n(){return nt(this,n),t.apply(this,arguments)}return it(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||iv()}(void 0!==t),t}}]),n}(hT),pT=function(){function e(t,n){nt(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new iT(t)}return it(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,gS(this._delegate,function(e,t,n){var r=t,i=cS("where",e);return new kS(i,r,n)}(t,n,r)))}catch(i){throw cT(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,gS(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=cS("orderBy",e);return new bS(n,t)}(t,n)))}catch(r){throw cT(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,gS(this._delegate,function(e){return sE("limit",e),new wS("limit",e,"F")}(t)))}catch(n){throw cT(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,gS(this._delegate,function(e){return sE("limitToLast",e),new wS("limitToLast",e,"L")}(t)))}catch(n){throw cT(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,gS(this._delegate,IS.apply(void 0,arguments)))}catch(t){throw cT(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,gS(this._delegate,_S.apply(void 0,arguments)))}catch(t){throw cT(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,gS(this._delegate,SS.apply(void 0,arguments)))}catch(t){throw cT(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,gS(this._delegate,TS.apply(void 0,arguments)))}catch(t){throw cT(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return gE(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?jS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=uE(e,dE);var t=uE(e.firestore,xE),n=IE(t),r=new VS(t);return eE(n,e._query,{source:"server"}).then((function(n){return new dS(t,r,e,n)}))}(this._delegate):function(e){e=uE(e,dE);var t=uE(e.firestore,xE),n=IE(t),r=new VS(t);return mS(e._query),eE(n,e._query).then((function(n){return new dS(t,r,e,n)}))}(this._delegate),t.then((function(e){return new mT(n.firestore,new dS(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=lT(n),a=fT(n,(function(t){return new mT(e.firestore,new dS(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return qS(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(uT.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),vT=function(){function e(t,n){nt(this,e),this._firestore=t,this._delegate=n}return it(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new dT(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),mT=function(){function e(t,n){nt(this,e),this._firestore=t,this._delegate=n}return it(e,[{key:"query",get:function(){return new pT(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new dT(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new vT(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new dT(n._firestore,r))}))}},{key:"isEqual",value:function(e){return vS(this._delegate,e._delegate)}}]),e}(),yT=function(e){st(n,e);var t=dt(n);function n(e,r){var i;return nt(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return it(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new sT(this.firestore,e):null}},{key:"doc",value:function(e){try{return new sT(this.firestore,void 0===e?mE(this._delegate):mE(this._delegate,e))}catch(t){throw cT(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=uE(e.firestore,xE),r=mE(e),i=OS(e.converter,t);return GS(n,[zE(BE(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Jy.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new sT(t.firestore,e)}))}},{key:"isEqual",value:function(e){return yE(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(uT.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(pT);function gT(e){return uE(e,hE)}var kT=function(){function e(){nt(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=pt(DE,n)}return it(e,[{key:"isEqual",value:function(e){return(e=qt(e))instanceof DE&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Cv.keyField().canonicalString())}}]),e}(),bT=function(){function e(t){nt(this,e),this._delegate=t}return it(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new GE("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new qE("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=$S.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=JS.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new QE("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),wT={Firestore:rT,GeoPoint:OE,Timestamp:Iv,Blob:eT,Transaction:aT,WriteBatch:oT,DocumentReference:sT,DocumentSnapshot:hT,Query:pT,QueryDocumentSnapshot:dT,QuerySnapshot:mT,CollectionReference:yT,FieldPath:kT,FieldValue:bT,setLogLevel:function(e){!function(e){Xp.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new $t("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},wT)))}(e,(function(e,t){return new rT(e,t,new nT)})),e.registerVersion("@firebase/firestore-compat","0.1.22")}(kr);kr.initializeApp({apiKey:"AIzaSyBQUm_N2jd0sa_xvMwqWvysF7jMGptIbv8",authDomain:"multi-steps-form-ff6b0.firebaseapp.com",projectId:"multi-steps-form-ff6b0",storageBucket:"multi-steps-form-ff6b0.appspot.com",messagingSenderId:"1046382008043",appId:"1:1046382008043:web:7fa03616b5be39cbf1d0ae"});var xT=kr,IT=function(e){var n=e.values,r=n.primeiroNome,i=n.ultimoNome,a=n.email,o=n.trabalho,u=n.cidade,s=n.pais;return(0,t.useEffect)((function(){xT.firestore().collection("multiFormData").doc(r).set({pnome:r,unome:i,email:a,trabalho:o,cidade:u,local:s}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}),[u,a,s,r,o,i]),(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{children:"Suas respostas foram registradas com sucesso! Obrigado! \ud83d\ude04 "}),(0,g.jsxs)(tt,{style:{maxWidth:"600px",margin:"auto"},children:[(0,g.jsxs)(tt.Item,{variant:"secondary",children:["PRIMEIRO NOME: ",r]}),(0,g.jsxs)(tt.Item,{variant:"success",children:["\xdaLTIMO NOME: ",i]}),(0,g.jsxs)(tt.Item,{variant:"danger",children:["EMAIL: ",a]}),(0,g.jsxs)(tt.Item,{variant:"info",children:["TRABALHO: ",o]}),(0,g.jsxs)(tt.Item,{variant:"light",children:["CIDADE: ",u]}),(0,g.jsxs)(tt.Item,{variant:"dark",children:["PA\xcdS: ",s]})]})]})},_T=function(e){var t=e.values,n=e.handleChange;return console.log(t,n),(0,g.jsx)("div",{children:(0,g.jsxs)(ye,{className:"mt-5",children:[(0,g.jsx)("h4",{children:"Preencha as informa\xe7\xf5es"}),(0,g.jsxs)(ye.Group,{className:"mt-5",children:[(0,g.jsx)(ye.Label,{children:"Primeiro Nome"}),(0,g.jsx)(ye.Control,{defaultValue:t.primeiroNome,onChange:n("primeiroNome"),type:"text",placeholder:"Primeiro Nome"})]}),(0,g.jsxs)(ye.Group,{className:"mt-5",children:[(0,g.jsx)(ye.Label,{children:"\xdaltimo Nome"}),(0,g.jsx)(ye.Control,{defaultValue:t.ultimoNome,onChange:n("ultimoNome"),type:"text",placeholder:"\xdaltimo Nome"})]}),(0,g.jsxs)(ye.Group,{className:"mt-5",children:[(0,g.jsx)(ye.Label,{children:"Endere\xe7o de email"}),(0,g.jsx)(ye.Control,{defaultValue:t.email,onChange:n("email"),type:"email",placeholder:"Seu email"})]})]})})},ET=function(){return(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{children:"Bem vindo ao formul\xe1rio de m\xfaltiplas etapas utilizando React"}),(0,g.jsx)("p",{children:" Este \xe9 um formul\xe1rio simples, apenas para testar as funcionalidades do React e sua integra\xe7\xe3o com o FireBase"})]})},ST=["as","bsPrefix","variant","size","active","className"],TT=t.forwardRef((function(e,t){var n=e.as,r=e.bsPrefix,i=e.variant,a=e.size,u=e.active,s=e.className,c=d(e,ST),l=S(r,"btn"),h=f(Ve(o({tagName:n},c)),2),p=h[0],m=h[1].tagName;return(0,g.jsx)(m,o(o(o({},p),c),{},{ref:t,className:v()(s,l,u&&"active",i&&"".concat(l,"-").concat(i),a&&"".concat(l,"-").concat(a),c.href&&c.disabled&&"disabled")}))}));TT.displayName="Button",TT.defaultProps={variant:"primary",active:!1,disabled:!1};var CT=TT,NT=function(){var e=f((0,t.useState)(0),2),n=e[0],r=e[1],a=["Welcome","User Details","Biography","Confirm"],u=f((0,t.useState)({primeiroNome:"",ultimoNome:"",email:"",trabalho:"",cidade:"",pais:""}),2),s=u[0],c=u[1],l=function(e){return function(t){c(o(o({},s),{},i({},e,t.target.value)))}};return(0,g.jsxs)("div",{children:[0===n&&(0,g.jsx)(ET,{handleChange:l}),1===n&&(0,g.jsx)(_T,{values:s,handleChange:l}),2===n&&(0,g.jsx)(ge,{values:s,handleChange:l}),3===n&&(0,g.jsx)(IT,{values:s,handleChange:l}),(0,g.jsx)(CT,{disabled:0===n,className:"mr-5",onClick:function(){r((function(e){return e-1}))},style:3===n?{display:"none"}:{},children:"Voltar"}),(0,g.jsx)(CT,{className:"ml-5",variant:"contained",onClick:function(){r((function(e){return e+1}))},style:3===n?{display:"none"}:{},children:n===a.length-2?"Enviar":"Pr\xf3ximo"})]})};var AT=function(){return(0,g.jsx)("div",{className:"App",children:(0,g.jsx)(NT,{})})},DT=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};r.createRoot(document.getElementById("root")).render((0,g.jsx)(t.StrictMode,{children:(0,g.jsx)(AT,{})})),DT()}()}();
//# sourceMappingURL=main.31377de8.js.map